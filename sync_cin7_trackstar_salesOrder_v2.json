[
  {
    "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
    "id": "sync_cin7_trackstar_salesOrder_v2",
    "newName": null,
    "name": "sync_cin7_trackstar_salesOrder_v2",
    "description": null,
    "actionType": "CREATE",
    "inputName": "input",
    "inputModelId": "e9dbee74a1d87e460a6584ddf199a909",
    "chatWelcomeMessage": null,
    "outputModelId": "json",
    "errorModelId": "",
    "headerModelId": "json",
    "apiPreview": {
      "graphql": null,
      "rest": {
        "schema": "{\"openapi\":\"3.0.3\",\"info\":{\"title\":\"Flow OpenAPI Specification\",\"description\":\"OpenAPI specification for the flow\",\"version\":\"1.0.11\"},\"servers\":[{\"url\":\"https://live.fastn.ai/api/v1\"}],\"paths\":{\"/sync_cin7_trackstar_salesOrder_v2\":{\"post\":{\"summary\":\"sync_cin7_trackstar_salesOrder_v2\",\"operationId\":\"POST-sync_cin7_trackstar_salesOrder_v2\",\"parameters\":[{\"in\":\"header\",\"name\":\"x-fastn-space-id\",\"description\":\"x-fastn-space-id Header\",\"schema\":{\"type\":\"string\",\"default\":\"d0f8c7f3-69d3-403c-90a0-17c8857e095f\"},\"required\":false},{\"in\":\"header\",\"name\":\"stage\",\"description\":\"stage Header\",\"schema\":{\"type\":\"string\",\"default\":\"DRAFT\"},\"required\":false},{\"in\":\"header\",\"name\":\"content-type\",\"description\":\"content-type Header\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"},\"required\":false},{\"in\":\"header\",\"name\":\"x-fastn-space-tenantid\",\"description\":\"x-fastn-space-tenantid Header\",\"schema\":{\"type\":\"string\",\"default\":\"\"},\"required\":false}],\"requestBody\":{\"required\":true,\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"input\":{\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\",\"properties\":{\"syncMode\":{\"type\":\"string\"},\"saleId\":{\"type\":\"string\"},\"purchaseId\":{\"type\":\"string\"},\"isRetry\":{\"type\":\"boolean\"},\"connection_id\":{\"type\":\"string\"}}}},\"type\":\"object\"}}}},\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{},\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\"}}}}},\"security\":[{\"apiKey\":[]}]}}},\"components\":{\"securitySchemes\":{\"apiKey\":{\"type\":\"apiKey\",\"in\":\"header\",\"name\":\"x-fastn-api-key\"},\"bearerAuth\":{\"type\":\"http\",\"scheme\":\"bearer\"}}}}"
      }
    },
    "version": null,
    "inputModel": {
      "createdAt": 1764229725.2016416,
      "updatedAt": 1764229725.2015848,
      "id": "e9dbee74a1d87e460a6584ddf199a909",
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "name": "publish_cin7_trackstar_orders_request",
      "type": null,
      "version": "1.0",
      "preview": null,
      "jsonSchema": {
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "properties": {
          "syncMode": {
            "type": "string"
          },
          "saleId": {
            "type": "string"
          },
          "purchaseId": {
            "type": "string"
          },
          "isRetry": {
            "type": "boolean"
          },
          "connection_id": {
            "type": "string"
          }
        },
        "required": [
          "connection_id",
          "connection_id",
          "connection_id",
          "connection_id"
        ]
      },
      "uiSchema": null,
      "isReadOnly": true,
      "imageUrl": null,
      "groupId": null,
      "resourceType": null,
      "deleted": false,
      "isCommunityCreated": false,
      "dataModel": {
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "properties": {
          "syncMode": {
            "type": "string"
          },
          "saleId": {
            "type": "string"
          },
          "purchaseId": {
            "type": "string"
          },
          "isRetry": {
            "type": "boolean"
          },
          "connection_id": {
            "type": "string"
          }
        },
        "required": [
          "connection_id",
          "connection_id",
          "connection_id",
          "connection_id"
        ]
      }
    },
    "outputModel": {
      "createdAt": 1764229725.2365804,
      "updatedAt": 1764229725.2365549,
      "id": "json",
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "name": "Json",
      "type": null,
      "version": "1.0",
      "preview": null,
      "jsonSchema": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      },
      "uiSchema": null,
      "isReadOnly": true,
      "imageUrl": null,
      "groupId": null,
      "resourceType": null,
      "deleted": false,
      "isCommunityCreated": false,
      "dataModel": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      }
    },
    "errorModel": null,
    "headerModel": {
      "createdAt": 1760852072.8216062,
      "updatedAt": 1760852072.8215563,
      "id": "json",
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "name": "Json",
      "type": null,
      "version": "1.0",
      "preview": null,
      "jsonSchema": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      },
      "uiSchema": null,
      "isReadOnly": true,
      "imageUrl": null,
      "groupId": null,
      "resourceType": null,
      "deleted": false,
      "isCommunityCreated": false,
      "dataModel": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      }
    },
    "status": "CONNECT",
    "createdAt": 1764229725.2444892,
    "updatedAt": 1764233526.85597,
    "deployedAt": 1764135112.151342,
    "resolver": {
      "id": "publish_cin7_trackstar_orders",
      "label": null,
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "groupId": null,
      "type": null,
      "field": null,
      "dependencies": null,
      "start": "SelectTenantConfig",
      "nodeBased": false,
      "steps": [
        {
          "type": "INLINE",
          "id": "Success",
          "actionId": null,
          "inline": {
            "code": "\n{\n  \"message\": {% if data.var.message  is defined %}{{data.var.message | tojson}}{% else %}null{% endif %}\n}",
            "language": "JINJA",
            "fields": [],
            "next": null,
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"message\":{\"actionType\":\"map\",\"target\":\"{{data.var.message}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "hasResponse": true,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "message"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "message"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": null,
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable425",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "Variable3833",
            "variables": [],
            "code": "\n{\n  \"tenantId\": {% if data.headers['x-fastn-space-tenantid']  is defined %}{{data.headers['x-fastn-space-tenantid'] | tojson}}{% else %}null{% endif %},\n  \"batchSize\": 5,\n  \"referenceTable\": {{( \"cin7_trackstar_reference:\" ~ data.headers['x-fastn-space-tenantid'] ~ \"\") | tojson}},\n  \"schemaTable\": \"tbl_trackstar_schema\",\n  \"tenantConfig\": {% if data.steps.SelectTenantConfig.output[0].config.value %}{{data.steps.SelectTenantConfig.output[0].config.value| shape}}{% else %}null{% endif %},\n  \"connectionId\": \"default\",\n  \"saleId\": \"{{ data.input.SaleID | lower }}\"\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"tenantId\":{\"actionType\":\"map\",\"target\":\"{{data.headers['x-fastn-space-tenantid']}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"batchSize\":{\"actionType\":\"map\",\"target\":\"5\",\"targetType\":\"integer\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"referenceTable\":{\"actionType\":\"map\",\"target\":\"cin7_trackstar_reference:{{data.headers['x-fastn-space-tenantid']}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"schemaTable\":{\"actionType\":\"map\",\"target\":\"tbl_trackstar_schema\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"tenantConfig\":{\"actionType\":\"map\",\"target\":\"{{data.steps.SelectTenantConfig.output[0].config.value}}\",\"targetType\":\"object\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"connectionId\":{\"actionType\":\"map\",\"target\":\"default\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"saleId\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"string\",\"actions\":[{\"actionType\":\"typeConverter\",\"converterFunction\":\"lowercase\",\"dateFormat\":\"ISO_8601\",\"date\":\"{{data.input.SaleID}}\",\"variable\":\"saleId_filter_date_converter\"},{\"actionType\":\"actions_return\",\"targetType\":\"string\",\"target\":\"saleId_filter_date_converter\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "headers"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "x-fastn-space-tenantid"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "x-fastn-space-tenantid"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "headers"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "input"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "SaleID"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "SaleID"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "input"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "SelectTenantConfig"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.math.BigInteger",
                                            "value": "0"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "config"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "value"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "value"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "config"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.math.BigInteger",
                                              "value": "0"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "SelectTenantConfig"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Variable3833",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "COMPOSITE",
          "id": "getCin7SaleDetails",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": {
            "steps": [
              {
                "type": "INLINE",
                "id": "getCin7SaleDetailsMap",
                "actionId": null,
                "inline": {
                  "code": "\n{\n  \"param\": {\n  \"CombineAdditionalCharges\": \"false\",\n  \"HideInventoryMovements\": \"false\",\n  \"ID\": {% if data.var.saleId  is defined %}{{data.var.saleId | tojson}}{% else %}\"\"{% endif %},\n  \"IncludeTransactions\": \"false\"\n}\n}",
                  "language": "JINJA",
                  "fields": [],
                  "next": "getCin7SaleDetailsApi",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"param\":{\"actionType\":\"map\",\"target\":{\"CombineAdditionalCharges\":{\"actionType\":\"map\",\"target\":\"false\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"path\":\"param.CombineAdditionalCharges\",\"byUser\":false},\"HideInventoryMovements\":{\"actionType\":\"map\",\"target\":\"false\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"path\":\"param.HideInventoryMovements\",\"byUser\":false},\"ID\":{\"actionType\":\"map\",\"target\":\"{{data.var.saleId}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"path\":\"param.ID\",\"byUser\":true},\"IncludeTransactions\":{\"actionType\":\"map\",\"target\":\"false\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"path\":\"param.IncludeTransactions\",\"byUser\":false}},\"targetType\":\"object\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"default\":[],\"isRequred\":false,\"selected\":false,\"title\":\"\",\"description\":\"\",\"enum\":[]}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "saleId"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "saleId"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "getCin7SaleDetailsApi",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "API",
                "id": "getCin7SaleDetailsApi",
                "actionId": null,
                "inline": null,
                "function": {
                  "id": "_knexa_2vYoXKcbwP5uf87YykDR4GmE3JC",
                  "groupId": "_knexa_ae6a88b6-0c2a-4f9d-b3f8-f641a782ab6a",
                  "connectorId": "community",
                  "name": "getSale",
                  "version": "1.0.3",
                  "imageUrl": null,
                  "configuration": {
                    "enableCache": true,
                    "cacheTtlInSeconds": 300,
                    "required": true,
                    "validate": false,
                    "enableRetry": false,
                    "enableAuth": true,
                    "authType": "NO_AUTH",
                    "auth": {
                      "identifier": "$fastn_tenant_header",
                      "authKey": null,
                      "enableMultiConnection": true,
                      "isWorkspaceIdentifier": false,
                      "defaultConnectionId": null
                    },
                    "retry": {
                      "maxRetries": 1,
                      "maxDelayMilliseconds": 1000,
                      "enableConnectionErrors": false,
                      "retryList": [
                        {
                          "delayMilliseconds": 50,
                          "statusCode": 500,
                          "body": null
                        }
                      ]
                    },
                    "requestSetting": null
                  },
                  "next": null,
                  "queryExecutor": null
                },
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "next": "FindMappedConnection",
            "start": null,
            "queryExecutor": null
          },
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"ID\":{\"type\":\"string\"},\"Customer\":{\"type\":\"string\"},\"CustomerID\":{\"type\":\"string\"},\"Contact\":{\"type\":\"string\"},\"Phone\":{\"type\":\"string\"},\"Email\":{\"type\":\"string\"},\"DefaultAccount\":{\"type\":\"string\"},\"SkipQuote\":{\"type\":\"boolean\"},\"BillingAddress\":{\"type\":\"object\",\"properties\":{\"DisplayAddressLine1\":{\"type\":\"string\"},\"DisplayAddressLine2\":{\"type\":\"string\"},\"Line1\":{\"type\":\"string\"},\"Line2\":{\"type\":\"string\"},\"City\":{\"type\":\"string\"},\"State\":{\"type\":\"string\"},\"Postcode\":{\"type\":\"string\"},\"Country\":{\"type\":\"string\"}},\"required\":[]},\"ShippingAddress\":{\"type\":\"object\",\"properties\":{\"ID\":{\"type\":\"string\"},\"DisplayAddressLine1\":{\"type\":\"string\"},\"DisplayAddressLine2\":{\"type\":\"string\"},\"Line1\":{\"type\":\"string\"},\"Line2\":{\"type\":\"string\"},\"City\":{\"type\":\"string\"},\"State\":{\"type\":\"string\"},\"Postcode\":{\"type\":\"string\"},\"Country\":{\"type\":\"string\"},\"Company\":{\"type\":\"string\"},\"Contact\":{\"type\":\"string\"},\"ShipToOther\":{\"type\":\"boolean\"}},\"required\":[]},\"ShippingNotes\":{\"type\":\"string\"},\"BaseCurrency\":{\"type\":\"string\"},\"CustomerCurrency\":{\"type\":\"string\"},\"TaxRule\":{\"type\":\"string\"},\"TaxCalculation\":{\"type\":\"string\"},\"Terms\":{\"type\":\"string\"},\"PriceTier\":{\"type\":\"string\"},\"ShipBy\":{\"type\":\"string\"},\"Location\":{\"type\":\"string\"},\"SaleOrderDate\":{\"type\":\"string\"},\"LastModifiedOn\":{\"type\":\"string\"},\"Note\":{\"type\":\"string\"},\"CustomerReference\":{\"type\":\"string\"},\"COGSAmount\":{\"type\":\"number\"},\"Status\":{\"type\":\"string\"},\"CombinedPickingStatus\":{\"type\":\"string\"},\"CombinedPackingStatus\":{\"type\":\"string\"},\"CombinedShippingStatus\":{\"type\":\"string\"},\"FulFilmentStatus\":{\"type\":\"string\"},\"CombinedInvoiceStatus\":{\"type\":\"string\"},\"CombinedPaymentStatus\":{\"type\":\"string\"},\"CombinedTrackingNumbers\":{\"type\":\"string\"},\"Carrier\":{\"type\":\"string\"},\"CurrencyRate\":{\"type\":\"number\"},\"SalesRepresentative\":{\"type\":\"string\"},\"ServiceOnly\":{\"type\":\"boolean\"},\"Type\":{\"type\":\"string\"},\"SourceChannel\":{\"type\":\"string\"},\"Quote\":{\"type\":\"object\",\"properties\":{\"Memo\":{\"type\":\"string\"},\"Status\":{\"type\":\"string\"},\"Prepayments\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"AdditionalCharges\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"TotalBeforeTax\":{\"type\":\"number\"},\"Tax\":{\"type\":\"number\"},\"Total\":{\"type\":\"number\"}},\"required\":[]},\"Order\":{\"type\":\"object\",\"properties\":{\"SaleOrderNumber\":{\"type\":\"string\"},\"Memo\":{\"type\":\"string\"},\"Status\":{\"type\":\"string\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"ProductID\":{\"type\":\"string\"},\"SKU\":{\"type\":\"string\"},\"Name\":{\"type\":\"string\"},\"Quantity\":{\"type\":\"number\"},\"Price\":{\"type\":\"number\"},\"Discount\":{\"type\":\"number\"},\"Tax\":{\"type\":\"number\"},\"AverageCost\":{\"type\":\"number\"},\"TaxRule\":{\"type\":\"string\"},\"Comment\":{\"type\":\"string\"},\"DropShip\":{\"type\":\"boolean\"},\"BackorderQuantity\":{\"type\":\"number\"},\"Total\":{\"type\":\"number\"},\"ProductLength\":{\"type\":\"number\"},\"ProductWidth\":{\"type\":\"number\"},\"ProductHeight\":{\"type\":\"number\"},\"ProductWeight\":{\"type\":\"number\"},\"WeightUnits\":{\"type\":\"string\"},\"DimensionsUnits\":{\"type\":\"string\"},\"ProductCustomField1\":{\"type\":\"string\"},\"ProductCustomField2\":{\"type\":\"string\"},\"ProductCustomField3\":{\"type\":\"string\"},\"ProductCustomField4\":{\"type\":\"string\"},\"ProductCustomField5\":{\"type\":\"string\"},\"ProductCustomField6\":{\"type\":\"string\"},\"ProductCustomField7\":{\"type\":\"string\"},\"ProductCustomField8\":{\"type\":\"string\"},\"ProductCustomField9\":{\"type\":\"string\"},\"ProductCustomField10\":{\"type\":\"string\"}},\"required\":[]}},\"AdditionalCharges\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"TotalBeforeTax\":{\"type\":\"number\"},\"Tax\":{\"type\":\"number\"},\"Total\":{\"type\":\"number\"}},\"required\":[]},\"Fulfilments\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"TaskID\":{\"type\":\"string\"},\"FulfillmentNumber\":{\"type\":\"integer\"},\"LinkedInvoiceNumber\":{\"type\":\"string\"},\"FulFilmentStatus\":{\"type\":\"string\"},\"Pick\":{\"type\":\"object\",\"properties\":{\"Status\":{\"type\":\"string\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]},\"Pack\":{\"type\":\"object\",\"properties\":{\"Status\":{\"type\":\"string\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]},\"Ship\":{\"type\":\"object\",\"properties\":{\"Status\":{\"type\":\"string\"},\"RequireBy\":{\"type\":\"string\"},\"ShippingAddress\":{\"type\":\"object\",\"properties\":{\"DisplayAddressLine1\":{\"type\":\"string\"},\"DisplayAddressLine2\":{\"type\":\"string\"},\"Line1\":{\"type\":\"string\"},\"Line2\":{\"type\":\"string\"},\"City\":{\"type\":\"string\"},\"State\":{\"type\":\"string\"},\"Postcode\":{\"type\":\"string\"},\"Country\":{\"type\":\"string\"},\"Company\":{\"type\":\"string\"},\"Contact\":{\"type\":\"string\"},\"ShipToOther\":{\"type\":\"boolean\"}},\"required\":[]},\"ShippingNotes\":{\"type\":\"string\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]}},\"required\":[]}},\"Invoices\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"TaskID\":{\"type\":\"string\"},\"InvoiceNumber\":{\"type\":\"string\"},\"Memo\":{\"type\":\"string\"},\"Status\":{\"type\":\"string\"},\"InvoiceDate\":{\"type\":\"string\"},\"InvoiceDueDate\":{\"type\":\"string\"},\"CurrencyConversionRate\":{\"type\":\"number\"},\"BillingAddressLine1\":{\"type\":\"string\"},\"BillingAddressLine2\":{\"type\":\"string\"},\"LinkedFulfillmentNumber\":{\"type\":\"string\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"ProductID\":{\"type\":\"string\"},\"SKU\":{\"type\":\"string\"},\"Name\":{\"type\":\"string\"},\"Quantity\":{\"type\":\"number\"},\"Price\":{\"type\":\"number\"},\"Discount\":{\"type\":\"number\"},\"Tax\":{\"type\":\"number\"},\"Total\":{\"type\":\"number\"},\"AverageCost\":{\"type\":\"number\"},\"TaxRule\":{\"type\":\"string\"},\"Account\":{\"type\":\"string\"},\"Comment\":{\"type\":\"string\"},\"ProductLength\":{\"type\":\"number\"},\"ProductWidth\":{\"type\":\"number\"},\"ProductHeight\":{\"type\":\"number\"},\"ProductWeight\":{\"type\":\"number\"},\"WeightUnits\":{\"type\":\"string\"},\"DimensionsUnits\":{\"type\":\"string\"},\"ProductCustomField1\":{\"type\":\"string\"},\"ProductCustomField2\":{\"type\":\"string\"},\"ProductCustomField3\":{\"type\":\"string\"},\"ProductCustomField4\":{\"type\":\"string\"},\"ProductCustomField5\":{\"type\":\"string\"},\"ProductCustomField6\":{\"type\":\"string\"},\"ProductCustomField7\":{\"type\":\"string\"},\"ProductCustomField8\":{\"type\":\"string\"},\"ProductCustomField9\":{\"type\":\"string\"},\"ProductCustomField10\":{\"type\":\"string\"}},\"required\":[]}},\"AdditionalCharges\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"Payments\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"ID\":{\"type\":\"string\"},\"Reference\":{\"type\":\"string\"},\"Amount\":{\"type\":\"number\"},\"DatePaid\":{\"type\":\"string\"},\"Account\":{\"type\":\"string\"},\"CurrencyRate\":{\"type\":\"number\"},\"DateCreated\":{\"type\":\"string\"}},\"required\":[]}},\"TotalBeforeTax\":{\"type\":\"number\"},\"Tax\":{\"type\":\"number\"},\"Total\":{\"type\":\"number\"},\"Paid\":{\"type\":\"number\"}},\"required\":[]}},\"CreditNotes\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"TaskID\":{\"type\":\"string\"},\"CreditNoteInvoiceNumber\":{\"type\":\"string\"},\"Memo\":{\"type\":\"string\"},\"Status\":{\"type\":\"string\"},\"CreditNoteDate\":{\"type\":\"string\"},\"CreditNoteNumber\":{\"type\":\"string\"},\"CreditNoteConversionRate\":{\"type\":\"number\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"AdditionalCharges\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"Refunds\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"Restock\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"TotalBeforeTax\":{\"type\":\"number\"},\"Tax\":{\"type\":\"number\"},\"Total\":{\"type\":\"number\"},\"RestockStatus\":{\"type\":\"string\"}},\"required\":[]}},\"ManualJournals\":{\"type\":\"object\",\"properties\":{\"Status\":{\"type\":\"string\"},\"Lines\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]},\"ExternalID\":{\"type\":\"string\"},\"AdditionalAttributes\":{\"type\":\"object\",\"properties\":{\"AdditionalAttribute1\":{\"type\":\"string\"},\"AdditionalAttribute2\":{\"type\":\"string\"},\"AdditionalAttribute3\":{\"type\":\"string\"},\"AdditionalAttribute4\":{\"type\":\"string\"},\"AdditionalAttribute5\":{\"type\":\"string\"},\"AdditionalAttribute6\":{\"type\":\"string\"},\"AdditionalAttribute7\":{\"type\":\"string\"},\"AdditionalAttribute8\":{\"type\":\"string\"},\"AdditionalAttribute9\":{\"type\":\"string\"},\"AdditionalAttribute10\":{\"type\":\"string\"}},\"required\":[]},\"Attachments\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"InventoryMovements\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"Transactions\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]}",
          "next": "FindMappedConnection",
          "prevStep": null,
          "enableDebug": false,
          "description": "This tool is designed to execute the getSale operation on the Cin7 platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "CONDITIONAL",
          "id": "DetermineTransactionType",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": {
            "id": "DetermineTransactionType",
            "next": "loopOverOrderFulfillments",
            "expressions": [
              {
                "name": "If SaleId",
                "logic": "AND",
                "conditions": null,
                "variable": "{{data.var.saleId}}",
                "value": null,
                "operation": "EXISTS",
                "next": "getCin7SaleDetails"
              }
            ],
            "queryExecutor": null
          },
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "loopOverOrderFulfillments",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INTERNAL_DB",
          "id": "GetIntegrationSchemaFromDB",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": {
            "next": "flattenSchemaForCreateOrder",
            "query": "SELECT *\nFROM \"{{data.var.schemaTable}}\"\nWHERE integration_name = ?;\n",
            "code": "\n[\n{\n  \"type\" : \"string\",\n  \"value\" : {{ data.steps.get_trackstar_integration_v1.output.integrationName | tojson}}\n}\n\n]",
            "dbQueryParams": [
              {
                "type": "string",
                "value": " {{data.steps.get_trackstar_integration_v1.output.integrationName}}"
              }
            ],
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "schemaTable"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "schemaTable"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "flattenSchemaForCreateOrder",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "CONTINUE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "LAMBDA",
          "id": "flattenSchemaForCreateOrder",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": {
            "code": "def fastn_function(params):\n    def set_nested(obj, path, value):\n        keys = path.split(\".\")\n        curr = obj\n        for i, key in enumerate(keys):\n            if i == len(keys) - 1:\n                curr[key] = value\n            else:\n                if key not in curr or not isinstance(curr[key], dict):\n                    curr[key] = {}\n                curr = curr[key]\n\n    schema_list = params.get(\"data\", {}).get(\"steps\", {}).get(\"GetIntegrationSchemaFromDB\", \n{}).get(\"output\", [])\n    schema = schema_list[0] if schema_list else {}\n\n    value_str = schema.get(\"data\", {}).get(\"value\")\n    if not value_str:\n        return {\"schema\": {}}\n\n    try:\n        parse_schema = json.loads(value_str)\n    except json.JSONDecodeError:\n        return {\"error\": \"Invalid JSON in schema.value\"}\n\n    action = params.get(\"data\", {}).get(\"input\", {}).get(\"action\", \"create_order\")\n\n    operations = parse_schema.get(\"operations\", [])\n    superset_schema = {}\n\n    for operation in operations:\n        if operation.get(\"action\") == action:\n            superset_schema = operation.get(\"superset_schema\", {})\n            break\n\n    if not superset_schema and operations:\n        superset_schema = operations[0].get(\"superset_schema\", {})\n\n    flatten_schema = {}\n\n    for key, value in superset_schema.items():\n        set_nested(flatten_schema, key, value)\n\n    return {\"schema\": flatten_schema}",
            "next": "Variable1050",
            "validation": {
              "validData": true,
              "reason": null,
              "valid": false,
              "queryExecutor": null
            },
            "language": "PYTHON",
            "version": 2,
            "queryExecutor": null
          },
          "outputSchema": null,
          "next": "Variable1050",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INTERNAL_DB",
          "id": "SelectTenantConfig",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": {
            "next": "Variable425",
            "query": "SELECT config\nFROM \"tbl_cin7_trackstar_tenant_config\"\nWHERE tenant_id = ?;\n",
            "code": "\n[\n{\n  \"type\" : \"string\",\n  \"value\" : {{data.headers['x-fastn-space-tenantid'] | tojson}}\n}\n\n]",
            "dbQueryParams": [
              {
                "type": "string",
                "value": "{{data.headers['x-fastn-space-tenantid']}}"
              }
            ],
            "queryExecutor": {
              "children": [],
              "returnLiteral": true,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Variable425",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "CONDITIONAL",
          "id": "CheckLocationMappingSet",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": {
            "id": "CheckLocationMappingSet",
            "next": "Log2",
            "expressions": [
              {
                "name": "If config is set",
                "logic": "AND",
                "conditions": null,
                "variable": "{{data.var.tenantConfig.locationMapping}}",
                "value": null,
                "operation": "EXISTS",
                "next": "Variable7488"
              }
            ],
            "queryExecutor": null
          },
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Log2",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable7488",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "DetermineTransactionType",
            "variables": [],
            "code": "\n{\n  \"connectionId\": \"\"\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"connectionId\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [],
              "returnLiteral": true,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "DetermineTransactionType",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": "Reset the connectionID waiting for the actual mapping (Default is default connection)"
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "CONDITIONAL",
          "id": "IfConnectionIDSet",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": {
            "id": "IfConnectionIDSet",
            "next": "loopOverOrderFulfillments",
            "expressions": [
              {
                "name": "If Connection Identified",
                "logic": "AND",
                "conditions": null,
                "variable": "{{data.var.connectionId}}",
                "value": null,
                "operation": "EXISTS",
                "next": "get_trackstar_integration_v1"
              }
            ],
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "connectionId"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "connectionId"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "loopOverOrderFulfillments",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": "This determines if the sync should be skipped as the mapping was defined by location is not mapped"
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "FindMappedConnection",
          "actionId": null,
          "inline": {
            "code": " function handler(params) {\n      const locationMappingConfig = params.data?.var?.locationMapping;\n      const searchLocationRaw =\n        params.data.steps.getCin7SaleDetails.output.Location || '';\n      const searchLocation = (searchLocationRaw || '').toString().trim();\n\n      const normalize = (s) => (s || '').toString().trim().replace(/\\s+/g, ' ');\n\n      let connectionId = \"\";\n      let mappedWarehouse = \"\";\n      let mappingKey = undefined;\n\n      try {\n        const mapping = typeof locationMappingConfig === 'string'\n          ? JSON.parse(locationMappingConfig)\n          : locationMappingConfig;\n\n        if (Array.isArray(mapping)) {\n          const normalizedSearch = normalize(searchLocation).toLowerCase();\n\n          // Iterate through each connection in the array\n          for (const connection of mapping) {\n            if (!connection.warehouses || typeof connection.warehouses !== 'object') {\n              continue;\n            }\n\n            // Check if searchLocation exists in this connection's warehouses\n            // Try direct property access first\n            if (connection.warehouses[searchLocation]) {\n              connectionId = String(connection.connectionId || \"\");\n              mappedWarehouse = String(connection.warehouses[searchLocation]);\n              mappingKey = searchLocation;\n              break;\n            }\n\n            // Fallback: normalized matching\n            const normalizedWarehouses = JSON.parse(JSON.stringify(connection.warehouses));\n            const keys = Object.keys(normalizedWarehouses);\n\n            const targetIndex = keys.findIndex(k =>\n              normalize(k).toLowerCase() === normalizedSearch\n            );\n\n            if (targetIndex !== -1) {\n              const originalKey = keys[targetIndex];\n              connectionId = String(connection.connectionId || \"\");\n              mappedWarehouse = String(normalizedWarehouses[originalKey]);\n              mappingKey = originalKey;\n              break;\n            }\n          }\n        }\n      } catch (e) {\n        connectionId = \"\";\n        mappedWarehouse = \"\";\n      }\n\n      return {\n        connectionId,\n        mappedWarehouse,\n        mappingKey\n      };\n    }",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "Variable1870",
            "uiCode": " function handler(params) {\n      const locationMappingConfig = params.data?.var?.locationMapping;\n      const searchLocationRaw =\n        params.data.steps.getCin7SaleDetails.output.Location || '';\n      const searchLocation = (searchLocationRaw || '').toString().trim();\n\n      const normalize = (s) => (s || '').toString().trim().replace(/\\s+/g, ' ');\n\n      let connectionId = \"\";\n      let mappedWarehouse = \"\";\n      let mappingKey = undefined;\n\n      try {\n        const mapping = typeof locationMappingConfig === 'string'\n          ? JSON.parse(locationMappingConfig)\n          : locationMappingConfig;\n\n        if (Array.isArray(mapping)) {\n          const normalizedSearch = normalize(searchLocation).toLowerCase();\n\n          // Iterate through each connection in the array\n          for (const connection of mapping) {\n            if (!connection.warehouses || typeof connection.warehouses !== 'object') {\n              continue;\n            }\n\n            // Check if searchLocation exists in this connection's warehouses\n            // Try direct property access first\n            if (connection.warehouses[searchLocation]) {\n              connectionId = String(connection.connectionId || \"\");\n              mappedWarehouse = String(connection.warehouses[searchLocation]);\n              mappingKey = searchLocation;\n              break;\n            }\n\n            // Fallback: normalized matching\n            const normalizedWarehouses = JSON.parse(JSON.stringify(connection.warehouses));\n            const keys = Object.keys(normalizedWarehouses);\n\n            const targetIndex = keys.findIndex(k =>\n              normalize(k).toLowerCase() === normalizedSearch\n            );\n\n            if (targetIndex !== -1) {\n              const originalKey = keys[targetIndex];\n              connectionId = String(connection.connectionId || \"\");\n              mappedWarehouse = String(normalizedWarehouses[originalKey]);\n              mappingKey = originalKey;\n              break;\n            }\n          }\n        }\n      } catch (e) {\n        connectionId = \"\";\n        mappedWarehouse = \"\";\n      }\n\n      return {\n        connectionId,\n        mappedWarehouse,\n        mappingKey\n      };\n    }",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Variable1870",
          "prevStep": null,
          "enableDebug": false,
          "description": "This is intended to find the connection if location mapping is set",
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable1870",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "IfConnectionIDSet",
            "variables": [],
            "code": "\n{\n  \"connectionId\": {% if data.steps.FindMappedConnection.output.connectionId  is defined %}{{data.steps.FindMappedConnection.output.connectionId | tojson}}{% else %}\"\"{% endif %},\n  \"mappedWarehouse\": {% if data.steps.FindMappedConnection.output.mappedWarehouse  is defined %}{{data.steps.FindMappedConnection.output.mappedWarehouse | tojson}}{% else %}null{% endif %},\n  \"saleOrderNumber\": {% if data.steps.getCin7SaleDetails.output.Order.SaleOrderNumber  is defined %}{{data.steps.getCin7SaleDetails.output.Order.SaleOrderNumber | tojson}}{% else %}null{% endif %},\n  \"referenceKey\": {{( \"sale:\" ~ data.var.saleId ~ \"\") | tojson}},\n  \"orderFulfillments\": {% if data.steps.getCin7SaleDetails.output.Fulfilments %}{{data.steps.getCin7SaleDetails.output.Fulfilments| shape}}{% else %}null{% endif %}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"connectionId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.FindMappedConnection.output.connectionId}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"mappedWarehouse\":{\"actionType\":\"map\",\"target\":\"{{data.steps.FindMappedConnection.output.mappedWarehouse}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"saleOrderNumber\":{\"actionType\":\"map\",\"target\":\"{{data.steps.getCin7SaleDetails.output.Order.SaleOrderNumber}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"referenceKey\":{\"actionType\":\"map\",\"target\":\"sale:{{data.var.saleId}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"orderFulfillments\":{\"actionType\":\"map\",\"target\":\"{{data.steps.getCin7SaleDetails.output.Fulfilments}}\",\"targetType\":\"array\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "getCin7SaleDetails"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "Fulfilments"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "Fulfilments"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "Order"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "SaleOrderNumber"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "SaleOrderNumber"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "Order"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "getCin7SaleDetails"
                                },
                                "version": 2
                              }
                            },
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "FindMappedConnection"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "mappedWarehouse"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "mappedWarehouse"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "connectionId"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "connectionId"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "FindMappedConnection"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "saleId"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "saleId"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "IfConnectionIDSet",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable3833",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "CheckLocationMappingSet",
            "variables": [],
            "code": "\n{\n  \"locationMapping\": {% if data.var.tenantConfig.locationMapping %}{{data.var.tenantConfig.locationMapping| shape}}{% else %}\"\"{% endif %}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"locationMapping\":{\"actionType\":\"map\",\"target\":\"{{data.var.tenantConfig.locationMapping}}\",\"targetType\":\"object\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "tenantConfig"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "locationMapping"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "locationMapping"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "tenantConfig"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "CheckLocationMappingSet",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "COMPOSITE",
          "id": "get_trackstar_integration_v1",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": {
            "steps": [
              {
                "type": "INLINE",
                "id": "get_trackstar_integration_v1Map",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n\tlet tenantId = params.data?.headers['x-fastn-space-tenantid'];\n    let connectorId = params.data?.input.connectorId || \"_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15\";\n\tlet connectionId = params.data?.var.connectionId;\n\n    return {\n\t\"headers\": {\n\t\t\"customAuth\": true,\n\t\t\"x-fastn-space-tenantid\": tenantId,\n\t\t\"x-fastn-space-connection-id\": connectionId\n\t},\n\t\"body\": {\n\t\t\"input\": {\n\t\t\tconnectorId,\n\t\t\tconnectionId,\n\t\t\torgId: \"workspace\",\n\t\t}\n\t}\n}\n  }\n    ",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "get_trackstar_integration_v1Api",
                  "uiCode": "function handler(params) {\n\tlet tenantId = params.data?.headers['x-fastn-space-tenantid'];\n    let connectorId = params.data?.input.connectorId || \"_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15\";\n\tlet connectionId = params.data?.var.connectionId;\n\n    return {\n\t\"headers\": {\n\t\t\"customAuth\": true,\n\t\t\"x-fastn-space-tenantid\": tenantId,\n\t\t\"x-fastn-space-connection-id\": connectionId\n\t},\n\t\"body\": {\n\t\t\"input\": {\n\t\t\tconnectorId,\n\t\t\tconnectionId,\n\t\t\torgId: \"workspace\",\n\t\t}\n\t}\n}\n  }\n    ",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "get_trackstar_integration_v1Api",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "API",
                "id": "get_trackstar_integration_v1Api",
                "actionId": null,
                "inline": null,
                "function": {
                  "id": "get_trackstar_integration_v1",
                  "groupId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
                  "connectorId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
                  "name": "get_trackstar_integration_v1",
                  "version": "1.0.1",
                  "imageUrl": "https://fastnai.s3.amazonaws.com/assets/fastn_logo.png",
                  "configuration": {
                    "enableCache": false,
                    "cacheTtlInSeconds": 0,
                    "required": true,
                    "validate": false,
                    "enableRetry": false,
                    "enableAuth": false,
                    "authType": "APIKEY",
                    "auth": {
                      "identifier": null,
                      "authKey": null,
                      "enableMultiConnection": false,
                      "isWorkspaceIdentifier": true,
                      "defaultConnectionId": null
                    },
                    "retry": {
                      "maxRetries": 1,
                      "maxDelayMilliseconds": 1000,
                      "enableConnectionErrors": false,
                      "retryList": [
                        {
                          "delayMilliseconds": 50,
                          "statusCode": 500,
                          "body": null
                        }
                      ]
                    },
                    "requestSetting": null
                  },
                  "next": null,
                  "queryExecutor": null
                },
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "next": "Variable7051",
            "start": null,
            "queryExecutor": null
          },
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": "{\"description\":\"\",\"additionalProperties\":false,\"type\":\"object\",\"title\":\"\",\"properties\":{\"data\":{\"description\":\"\",\"additionalProperties\":false,\"type\":\"object\",\"title\":\"\",\"properties\":{\"get_trackstar_integration\":{\"properties\":{},\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\",\"required\":[]}}}}}",
          "next": "Variable7051",
          "prevStep": null,
          "enableDebug": false,
          "description": "This tool is designed to execute the get_trackstar_integration_v1 operation on the My Connectors platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable7051",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "GetIntegrationSchemaFromDB",
            "variables": [],
            "code": "\n{\n  \"integrationName\": {% if data.steps.get_trackstar_integration_v1.output.integrationName  is defined %}{{data.steps.get_trackstar_integration_v1.output.integrationName | tojson}}{% else %}\"\"{% endif %},\n  \"availableActions\": {% if data.steps.get_trackstar_integration_v1.output.availableActions  is defined %}{{data.steps.get_trackstar_integration_v1.output.availableActions | tojson}}{% else %}null{% endif %}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"integrationName\":{\"actionType\":\"map\",\"target\":\"{{data.steps.get_trackstar_integration_v1.output.integrationName}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"availableActions\":{\"actionType\":\"map\",\"target\":\"{{data.steps.get_trackstar_integration_v1.output.availableActions}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "get_trackstar_integration_v1"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "availableActions"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "availableActions"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "integrationName"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "integrationName"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "get_trackstar_integration_v1"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "GetIntegrationSchemaFromDB",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "LOGGER",
          "id": "Log2",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": {
            "next": "DetermineTransactionType",
            "context": "Retained connection to default",
            "message": null,
            "queryExecutor": {
              "children": [],
              "returnLiteral": true,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "DetermineTransactionType",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable1050",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "loopOverOrderFulfillments",
            "variables": [],
            "code": "\n{\n  \"uniqueRefKey\": {{( \"refkey_\" ~ data.var.referenceTable ~ \"\") | tojson}},\n  \"orderLength\": 0\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"uniqueRefKey\":{\"actionType\":\"map\",\"target\":\"refkey_{{data.var.referenceTable}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"orderLength\":{\"actionType\":\"map\",\"target\":\"0\",\"targetType\":\"integer\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "referenceTable"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "referenceTable"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "loopOverOrderFulfillments",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": "SKIP",
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "LOOP",
          "id": "loopOverOrderFulfillments",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": {
            "next": "Success",
            "start": "SelectReferenceTable",
            "loopOver": "{{data.var.orderFulfillments}}",
            "type": "DATA",
            "steps": [
              {
                "type": "INTERNAL_DB",
                "id": "SelectReferenceTable",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": {
                  "next": "IfNoTrackstarRecordInReference",
                  "query": "select * \nfrom \"{{data.var.referenceTable}}\" \nwhere reference_key= lower(?)\n",
                  "code": "\n[\n{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.referenceKey | tojson}}\n}\n\n]",
                  "dbQueryParams": [
                    {
                      "type": "string",
                      "value": "{{data.var.referenceKey}}"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "referenceTable"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "referenceTable"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "IfNoTrackstarRecordInReference",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "CONTINUE",
                  "skipStatus": "UNSKIP",
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "IfNoTrackstarRecordInReference",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "IfNoTrackstarRecordInReference",
                  "next": "GetTrackstarOrder",
                  "expressions": [
                    {
                      "name": "If no record",
                      "logic": "OR",
                      "conditions": [
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.steps.SelectReferenceTable.output}}",
                          "value": "0",
                          "operation": "LENGTH_EQ",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.steps.SelectReferenceTable.output[0].trackstar_id}}",
                          "value": null,
                          "operation": "NOT_EXISTS",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.steps.SelectReferenceTable.output[0].trackstar_id}}",
                          "value": "null",
                          "operation": "EQ",
                          "next": null
                        }
                      ],
                      "variable": "{{data.steps.SelectReferenceTable.output}}",
                      "value": "0",
                      "operation": "LENGTH_EQ",
                      "next": "GetAllOrders"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "SelectReferenceTable"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "SelectReferenceTable"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "GetTrackstarOrder",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "GetTrackstarOrder",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "GetTrackstarOrderMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n    let orderNumber = params.data?.steps.getCin7SaleDetails.output.Order.SaleOrderNumber;\n\tlet id = params.data?.steps.getCin7SaleDetails.output.ID;\n\tlet trackstarOrderNumber = params?.data.steps.SelectReferenceTable.output?.filter(item => item.cin7_id === id);\n\n    return {\n\t\t\"url\": {\t\n\t\t\t\"order_id\": trackstarOrderNumber[0]?.trackstar_id\n\t\t}\n\t}\n}\n\n",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "GetTrackstarOrderApi",
                        "uiCode": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n    let orderNumber = params.data?.steps.getCin7SaleDetails.output.Order.SaleOrderNumber;\n\tlet id = params.data?.steps.getCin7SaleDetails.output.ID;\n\tlet trackstarOrderNumber = params?.data.steps.SelectReferenceTable.output?.filter(item => item.cin7_id === id);\n\n    return {\n\t\t\"url\": {\t\n\t\t\t\"order_id\": trackstarOrderNumber[0]?.trackstar_id\n\t\t}\n\t}\n}\n\n",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "GetTrackstarOrderApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "GetTrackstarOrderApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-order",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Get Order",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": true,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Variable9566",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"reference_id\":{\"type\":\"string\"},\"order_number\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"raw_status\":{\"type\":\"string\"},\"channel\":{\"type\":\"string\"},\"channel_object\":{\"type\":\"object\",\"properties\":{},\"required\":[]},\"type\":{\"type\":\"string\"},\"trading_partner\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"is_third_party_freight\":{\"type\":\"string\"},\"third_party_freight_account_number\":{\"type\":\"string\"},\"first_party_freight_account_number\":{\"type\":\"string\"},\"invoice_currency_code\":{\"type\":\"string\"},\"total_price\":{\"type\":\"string\"},\"total_tax\":{\"type\":\"string\"},\"total_discount\":{\"type\":\"string\"},\"total_shipping\":{\"type\":\"string\"},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"discount_amount\":{\"type\":\"string\"},\"is_picked\":{\"type\":\"string\"},\"product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_price\":{\"type\":\"string\"}},\"required\":[]}},\"tags\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"required_ship_date\":{\"type\":\"string\"},\"saturday_delivery\":{\"type\":\"string\"},\"signature_required\":{\"type\":\"string\"},\"international_duty_paid_by\":{\"type\":\"string\"},\"shipments\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"inventory_item_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"packages\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"carrier\":{\"type\":\"string\"},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"expiration_date\":{\"type\":\"string\"},\"inventory_item_id\":{\"type\":\"string\"},\"lot_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"measurements\":{\"type\":\"object\",\"properties\":{\"height\":{\"type\":\"string\"},\"length\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"},\"weight\":{\"type\":\"string\"},\"weight_unit\":{\"type\":\"string\"},\"width\":{\"type\":\"string\"}},\"required\":[]},\"package_id\":{\"type\":\"string\"},\"package_name\":{\"type\":\"string\"},\"scac\":{\"type\":\"string\"},\"shipping_cost\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"tracking_number\":{\"type\":\"string\"},\"tracking_url\":{\"type\":\"string\"}},\"required\":[]}},\"raw_status\":{\"type\":\"string\"},\"ship_from_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"shipment_id\":{\"type\":\"string\"},\"shipped_date\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]}},\"required\":[]}",
                "next": "Variable9566",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the GetOrder operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable9566",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "ifwarehousesAvilable",
                  "variables": [],
                  "code": "\n{\n  \"orderLength\": {% set orderLength_array_Length= data.steps.GetTrackstarOrder.output.data | length %}{{orderLength_array_Length}},\n  \"type\": \"sales order\",\n  \"itemId\": {% if data.steps.getCin7SaleDetails.output.ID  is defined %}{{data.steps.getCin7SaleDetails.output.ID | tojson}}{% else %}null{% endif %},\n  \"trackstarOrderNumber\": {% if data.steps.GetTrackstarOrder.output.data.order_number  is defined %}{{data.steps.GetTrackstarOrder.output.data.order_number | tojson}}{% else %}null{% endif %},\n  \"trackstarId\": {% if data.steps.GetTrackstarOrder.output.data.id  is defined %}{{data.steps.GetTrackstarOrder.output.data.id | tojson}}{% else %}null{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"orderLength\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"arrayLength\",\"target\":\"{{data.steps.GetTrackstarOrder.output.data}}\",\"variable\":\"orderLength_array_Length\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"orderLength_array_Length\"}],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"type\":{\"actionType\":\"map\",\"target\":\"sales order\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"itemId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.getCin7SaleDetails.output.ID}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarOrderNumber\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetTrackstarOrder.output.data.order_number}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetTrackstarOrder.output.data.id}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "getCin7SaleDetails"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "ID"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "ID"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "getCin7SaleDetails"
                                      },
                                      "version": 2
                                    }
                                  },
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "GetTrackstarOrder"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "id"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "id"
                                                        },
                                                        "version": 2
                                                      }
                                                    },
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "order_number"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "order_number"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "GetTrackstarOrder"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "ifwarehousesAvilable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "ifwarehousesAvilable",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "ifwarehousesAvilable",
                  "next": "IfProductSupported",
                  "expressions": [
                    {
                      "name": "Is get_warehouses available?",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.var.availableActions}}",
                      "value": "get_warehouses",
                      "operation": "CONTAINS",
                      "next": "GetAllWarehouses"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "availableActions"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "availableActions"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "IfProductSupported",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "GetAllWarehouses",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "GetAllWarehousesMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n    return {\n\t\t\"param\": {\t\n\t\t\t\"nameeq\": \"Main Warehouse\" //params.data.var.mappedWarehouse\n\t\t}\n\t}\n}",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "GetAllWarehousesApi",
                        "uiCode": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n    return {\n\t\t\"param\": {\t\n\t\t\t\"nameeq\": \"Main Warehouse\" //params.data.var.mappedWarehouse\n\t\t}\n\t}\n}",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "GetAllWarehousesApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "GetAllWarehousesApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-all-warehouses",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Get All Warehouses",
                        "version": "1.0.3",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": true,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "IfProductSupported",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"code\":{\"type\":\"string\"},\"address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]}},\"required\":[]}},\"next_token\":{\"type\":\"string\"},\"total_count\":{\"type\":\"string\"}},\"required\":[]}",
                "next": "IfProductSupported",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the GetAllWarehouses operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "IfProductSupported",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "IfProductSupported",
                  "next": "Switch6",
                  "expressions": [
                    {
                      "name": "Is get_product available?",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.var.availableActions}}",
                      "value": "get_products",
                      "operation": "CONTAINS",
                      "next": "ExtractSKUList"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "availableActions"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "availableActions"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch6",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch6",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch6",
                  "next": "generateOrderRequestBody",
                  "expressions": [
                    {
                      "name": "If order exist",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.var.orderLength}}",
                      "value": "0",
                      "operation": "GREATER_THAN",
                      "next": "IfUpdateOrderSupported"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "orderLength"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "orderLength"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "generateOrderRequestBody",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "generateOrderRequestBody",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n          params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n          const flatSchema = params.data?.steps.flattenSchemaForCreateOrder?.output?.schema || {};\n          const data = params.data?.steps.getCin7SaleDetails?.output || {};\n          const shipping = params.data?.steps.determineShippingCountry?.output;\n          const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n          let warehouseId = params.data?.var.mappedWarehouse;\n\n          const ensureTimezone = (datetime) => {\n          if (!datetime) return null;\n          // Check if datetime already has timezone (Z or +/- offset)\n          if (datetime.endsWith('Z') || /[+-]\\d{2}:\\d{2}$/.test(datetime)) {\n              return datetime;\n          }\n          // Append 'Z' for UTC timezone\n          return datetime + 'Z';\n      };\n          // Helper function to parse DisplayAddressLine2 format: \"City State/Region Zip/Postcode Country\"\n          const parseDisplayAddressLine2 = (displayLine) => {\n            if (!displayLine) return {};\n\n            const parts = displayLine.trim().split(/\\s+/);\n            if (parts.length < 2) return {};\n\n            // Try to extract components (working backwards from the end)\n            // Common formats: \"Melbourne VIC 3000 Australia\", \"New York NY 10001 USA\"\n            let country = '';\n            let postalCode = '';\n            let state = '';\n            let city = '';\n\n            let idx = parts.length - 1;\n\n            // Last part is usually country\n            if (idx >= 0) {\n              country = parts[idx];\n              idx--;\n            }\n\n            // Check if second-to-last could be part of country (e.g., \"New Zealand\")\n            if (idx >= 0 && parts[idx].length > 2 && !/^\\d/.test(parts[idx]) && parts[idx].length < 8) {\n              // Could be multi-word country, but more likely a long state name\n              // Let's treat single uppercase short strings as state codes\n            }\n\n            // Check for split CANADIAN postal codes first: \"A1A 1A1\" format\n            if (idx >= 1 &&\n                /^[A-Z0-9]{3}$/i.test(parts[idx]) &&           // \"1J0\"\n                /^[A-Z][0-9][A-Z]$/i.test(parts[idx-1])) {     // \"G0G\"\n                // Canadian format: combine both parts\n                postalCode = parts[idx-1] + ' ' + parts[idx];\n                idx -= 2;\n            }\n            // Check for split UK postal codes: \"SW1A 1AA\" format\n            else if (idx >= 1 &&\n                /^[0-9][A-Z]{2}$/i.test(parts[idx]) &&         // \"1AA\"\n                /^[A-Z]{1,2}[0-9]{1,2}[A-Z]?$/i.test(parts[idx-1])) {  // \"SW1A\"\n                postalCode = parts[idx-1] + ' ' + parts[idx];\n                idx -= 2;\n            }\n            // Single-part postal codes (US, AU, etc)\n            else if (idx >= 0 && /^[A-Z0-9]{3,10}$/i.test(parts[idx])) {\n                postalCode = parts[idx];\n                idx--;\n            }\n\n            // State (usually 2-3 letter code or short word)\n            if (idx >= 0 && parts[idx].length <= 4) {\n              state = parts[idx];\n              idx--;\n            }\n\n            // Everything else is city\n            if (idx >= 0) {\n              city = parts.slice(0, idx + 1).join(' ');\n            }\n\n            return { city, state, postalCode, country };\n          };\n\n          // Convert flat schema to nested structure\n          const unflattenSchema = (flatObj) => {\n            const result = {};\n\n            for (const key in flatObj) {\n              const parts = key.split('.');\n              let current = result;\n\n              for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n\n                if (i === parts.length - 1) {\n                  // Last part - set the value\n                  current[part] = flatObj[key];\n                } else {\n                  // Intermediate part - create object if doesn't exist\n                  if (!current[part]) {\n                    current[part] = {};\n                  }\n                  current = current[part];\n                }\n              }\n            }\n\n            return result;\n          };\n\n          const schema = unflattenSchema(flatSchema);\n\n          // Helper to check if a field path is in the schema (use schema, not flatSchema!)\n          const isFieldInSchema = (path) => {\n            return schema.hasOwnProperty(path);\n          };\n\n          // Parse shipping address components from DisplayAddressLine2 if needed\n          const shippingParsed = parseDisplayAddressLine2(data?.ShippingAddress?.DisplayAddressLine2);\n          const billingParsed = parseDisplayAddressLine2(data?.BillingAddress?.DisplayAddressLine2);\n\n          // Determine which shipping/carrier method fields to include based on schema\n          const carrierValue = data?.Carrier;\n          const carrierIdValue = data?.CarrierID;\n          const hasCarrierValue = carrierValue && carrierValue !== \"N/A\";\n\n          // Check what fields exist in schema\n          const hasCarrierName = isFieldInSchema('carrier_name');\n          const hasCarrier = isFieldInSchema('carrier');\n          const hasCarrierId = isFieldInSchema('carrier_id');\n          const hasShippingMethodName = isFieldInSchema('shipping_method_name');\n          const hasShippingMethod = isFieldInSchema('shipping_method');\n          const hasShippingMethodId = isFieldInSchema('shipping_method_id');\n\n          let shippingMethodFields = {};\n\n          // Handle carrier_name vs carrier vs carrier_id\n          if (hasCarrierName) {\n            shippingMethodFields.carrier_name = carrierValue || \"N/A\";\n          } else if (hasCarrier) {\n            shippingMethodFields.carrier = carrierValue || \"N/A\";\n            if (!hasCarrierValue && hasCarrierId) {\n              shippingMethodFields.carrier_id = carrierIdValue || \"N/A\";\n            }\n          } else if (hasCarrierId) {\n            shippingMethodFields.carrier_id = carrierIdValue || \"N/A\";\n          }\n\n          // Handle shipping_method_name vs shipping_method vs shipping_method_id\n          if (hasShippingMethodName) {\n            shippingMethodFields.shipping_method_name = carrierValue || \"N/A\";\n          } else if (hasShippingMethod) {\n            shippingMethodFields.shipping_method = carrierValue || \"N/A\";\n            if (!hasCarrierValue && hasShippingMethodId) {\n              shippingMethodFields.shipping_method_id = carrierIdValue || \"N/A\";\n            }\n          } else if (hasShippingMethodId) {\n            shippingMethodFields.shipping_method_id = carrierIdValue || \"N/A\";\n          }\n\n          // Collect all authorised pick lines from fulfillments\n          const authorisedPickLines = (data?.Fulfilments || [])\n            .filter(fulfillment => fulfillment?.Pick?.Status === \"AUTHORISED\")\n            .flatMap(fulfillment => fulfillment?.Pick?.Lines || []);\n\n          const sourceData = {\n            warehouse_id: warehouseId,\n            reference_id: params.data?.var.saleId,\n            order_number: data?.Order?.SaleOrderNumber,\n            order_date: ensureTimezone(data?.SaleOrderDate),\n            purchase_order_number: data?.CustomerReference || data?.Order?.SaleOrderNumber || \"\",  // Fallback to order number\n            trackstar_tags: [data?.Order?.SaleOrderNumber, `cin7_id:${params.data?.var.saleId}`].filter(Boolean),  // Array of tags\n            ...shippingMethodFields,  // Spread the determined shipping/carrier method fields\n            ship_to_address: {\n              full_name: data?.Customer,\n              address1: data?.ShippingAddress?.Line1 || data?.ShippingAddress?.DisplayAddressLine1,\n              address2: data?.ShippingAddress?.Line2,\n              city: data?.ShippingAddress?.City || shippingParsed.city,\n              state: data?.ShippingAddress?.State || shippingParsed.state,\n              postal_code: data?.ShippingAddress?.Postcode || shippingParsed.postalCode,\n              company: data?.ShippingAddress?.Company || data?.Customer,\n              country: data?.ShippingAddress?.Country || shippingParsed.country || shipping?.country || \"Australia\",\n              phone_number: data?.Phone,\n            },\n            bill_to_address: {\n              full_name: data?.Customer,\n              address1: data?.BillingAddress?.Line1 || data?.BillingAddress?.DisplayAddressLine1,\n              address2: data?.BillingAddress?.Line2,\n              city: data?.BillingAddress?.City || billingParsed.city,\n              state: data?.BillingAddress?.State || billingParsed.state,\n              postal_code: data?.BillingAddress?.Postcode || billingParsed.postalCode,\n              company: data?.BillingAddress?.Company || data?.Customer,\n              country: data?.BillingAddress?.Country || billingParsed.country || shipping?.country || \"Australia\",\n              phone_number: data?.Phone,\n            },\n            line_items: authorisedPickLines.map(pickLine => {\n              // Find matching order line for pricing info\n              const orderLine = (data?.Order?.Lines || []).find(\n                line => line.SKU === pickLine.SKU || line.ProductID === pickLine.ProductID\n              );\n\n              const productMatch = products.find(p => p.sku === pickLine.SKU);\n\n              return {\n                sku: pickLine.SKU,\n                quantity: pickLine.Quantity,  // Use picked quantity from AUTHORISED fulfillments\n                unit_price: orderLine?.Price || 0,\n                product_id: productMatch?.id || null,\n                tax: orderLine?.Tax || 0,\n              };\n            }),\n          };\n\n        const fillFromSchema = (schemaObj, dataObj, parentPath = '') => {\n            const result = {};\n\n            for (const key in schemaObj) {\n              const schemaVal = schemaObj[key];\n              const dataVal = dataObj?.[key];\n              const currentPath = parentPath ? `${parentPath}.${key}` : key;\n\n              // Handle line_items array\n              if (key === \"line_items\") {\n                if (Array.isArray(dataVal) && dataVal.length > 0) {\n                  const lineSchema = schemaObj[key];\n                  const items = dataVal.map(item => fillFromSchema(lineSchema, item, currentPath));\n                  if (items.length > 0) result[key] = items;\n                }\n                continue;\n              }\n\n              // Handle nested objects\n              if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n                const nested = fillFromSchema(schemaVal, dataVal || {}, currentPath);\n\n                // Include if it has content OR if the parent path itself is required\n                if (Object.keys(nested).length > 0 || isFieldInSchema(currentPath)) {\n                  result[key] = nested;\n                }\n                continue;\n              }\n\n              // Handle primitive values\n              const fieldExistsInData = dataObj?.hasOwnProperty(key);\n              const hasValue = dataVal !== undefined &&\n                              dataVal !== null &&\n                              dataVal !== \"\" &&\n                              !(Array.isArray(dataVal) && dataVal.length === 0);\n\n              // Exception: Skip address2 if it has no value\n              const isOptionalEmptyField = key === 'address2' && !hasValue;\n\n              if (hasValue) {\n                // Always include fields with actual values\n                result[key] = dataVal;\n              } else if (fieldExistsInData && !isOptionalEmptyField) {\n                // Only include empty fields if they were explicitly set in sourceData\n                // and are not optional fields like address2\n                result[key] = dataVal ?? \"\";\n              }\n              // If field doesn't exist in sourceData or is an optional empty field, skip it\n            }\n\n            return result;\n          };\n\n          const body = fillFromSchema(schema, sourceData);\n\n          return { body };\n        }",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "CreateOrder1",
                  "uiCode": "function handler(params) {\n          params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n          const flatSchema = params.data?.steps.flattenSchemaForCreateOrder?.output?.schema || {};\n          const data = params.data?.steps.getCin7SaleDetails?.output || {};\n          const shipping = params.data?.steps.determineShippingCountry?.output;\n          const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n          let warehouseId = params.data?.var.mappedWarehouse;\n\n          const ensureTimezone = (datetime) => {\n          if (!datetime) return null;\n          // Check if datetime already has timezone (Z or +/- offset)\n          if (datetime.endsWith('Z') || /[+-]\\d{2}:\\d{2}$/.test(datetime)) {\n              return datetime;\n          }\n          // Append 'Z' for UTC timezone\n          return datetime + 'Z';\n      };\n          // Helper function to parse DisplayAddressLine2 format: \"City State/Region Zip/Postcode Country\"\n          const parseDisplayAddressLine2 = (displayLine) => {\n            if (!displayLine) return {};\n\n            const parts = displayLine.trim().split(/\\s+/);\n            if (parts.length < 2) return {};\n\n            // Try to extract components (working backwards from the end)\n            // Common formats: \"Melbourne VIC 3000 Australia\", \"New York NY 10001 USA\"\n            let country = '';\n            let postalCode = '';\n            let state = '';\n            let city = '';\n\n            let idx = parts.length - 1;\n\n            // Last part is usually country\n            if (idx >= 0) {\n              country = parts[idx];\n              idx--;\n            }\n\n            // Check if second-to-last could be part of country (e.g., \"New Zealand\")\n            if (idx >= 0 && parts[idx].length > 2 && !/^\\d/.test(parts[idx]) && parts[idx].length < 8) {\n              // Could be multi-word country, but more likely a long state name\n              // Let's treat single uppercase short strings as state codes\n            }\n\n            // Check for split CANADIAN postal codes first: \"A1A 1A1\" format\n            if (idx >= 1 &&\n                /^[A-Z0-9]{3}$/i.test(parts[idx]) &&           // \"1J0\"\n                /^[A-Z][0-9][A-Z]$/i.test(parts[idx-1])) {     // \"G0G\"\n                // Canadian format: combine both parts\n                postalCode = parts[idx-1] + ' ' + parts[idx];\n                idx -= 2;\n            }\n            // Check for split UK postal codes: \"SW1A 1AA\" format\n            else if (idx >= 1 &&\n                /^[0-9][A-Z]{2}$/i.test(parts[idx]) &&         // \"1AA\"\n                /^[A-Z]{1,2}[0-9]{1,2}[A-Z]?$/i.test(parts[idx-1])) {  // \"SW1A\"\n                postalCode = parts[idx-1] + ' ' + parts[idx];\n                idx -= 2;\n            }\n            // Single-part postal codes (US, AU, etc)\n            else if (idx >= 0 && /^[A-Z0-9]{3,10}$/i.test(parts[idx])) {\n                postalCode = parts[idx];\n                idx--;\n            }\n\n            // State (usually 2-3 letter code or short word)\n            if (idx >= 0 && parts[idx].length <= 4) {\n              state = parts[idx];\n              idx--;\n            }\n\n            // Everything else is city\n            if (idx >= 0) {\n              city = parts.slice(0, idx + 1).join(' ');\n            }\n\n            return { city, state, postalCode, country };\n          };\n\n          // Convert flat schema to nested structure\n          const unflattenSchema = (flatObj) => {\n            const result = {};\n\n            for (const key in flatObj) {\n              const parts = key.split('.');\n              let current = result;\n\n              for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n\n                if (i === parts.length - 1) {\n                  // Last part - set the value\n                  current[part] = flatObj[key];\n                } else {\n                  // Intermediate part - create object if doesn't exist\n                  if (!current[part]) {\n                    current[part] = {};\n                  }\n                  current = current[part];\n                }\n              }\n            }\n\n            return result;\n          };\n\n          const schema = unflattenSchema(flatSchema);\n\n          // Helper to check if a field path is in the schema (use schema, not flatSchema!)\n          const isFieldInSchema = (path) => {\n            return schema.hasOwnProperty(path);\n          };\n\n          // Parse shipping address components from DisplayAddressLine2 if needed\n          const shippingParsed = parseDisplayAddressLine2(data?.ShippingAddress?.DisplayAddressLine2);\n          const billingParsed = parseDisplayAddressLine2(data?.BillingAddress?.DisplayAddressLine2);\n\n          // Determine which shipping/carrier method fields to include based on schema\n          const carrierValue = data?.Carrier;\n          const carrierIdValue = data?.CarrierID;\n          const hasCarrierValue = carrierValue && carrierValue !== \"N/A\";\n\n          // Check what fields exist in schema\n          const hasCarrierName = isFieldInSchema('carrier_name');\n          const hasCarrier = isFieldInSchema('carrier');\n          const hasCarrierId = isFieldInSchema('carrier_id');\n          const hasShippingMethodName = isFieldInSchema('shipping_method_name');\n          const hasShippingMethod = isFieldInSchema('shipping_method');\n          const hasShippingMethodId = isFieldInSchema('shipping_method_id');\n\n          let shippingMethodFields = {};\n\n          // Handle carrier_name vs carrier vs carrier_id\n          if (hasCarrierName) {\n            shippingMethodFields.carrier_name = carrierValue || \"N/A\";\n          } else if (hasCarrier) {\n            shippingMethodFields.carrier = carrierValue || \"N/A\";\n            if (!hasCarrierValue && hasCarrierId) {\n              shippingMethodFields.carrier_id = carrierIdValue || \"N/A\";\n            }\n          } else if (hasCarrierId) {\n            shippingMethodFields.carrier_id = carrierIdValue || \"N/A\";\n          }\n\n          // Handle shipping_method_name vs shipping_method vs shipping_method_id\n          if (hasShippingMethodName) {\n            shippingMethodFields.shipping_method_name = carrierValue || \"N/A\";\n          } else if (hasShippingMethod) {\n            shippingMethodFields.shipping_method = carrierValue || \"N/A\";\n            if (!hasCarrierValue && hasShippingMethodId) {\n              shippingMethodFields.shipping_method_id = carrierIdValue || \"N/A\";\n            }\n          } else if (hasShippingMethodId) {\n            shippingMethodFields.shipping_method_id = carrierIdValue || \"N/A\";\n          }\n\n          // Collect all authorised pick lines from fulfillments\n          const authorisedPickLines = (data?.Fulfilments || [])\n            .filter(fulfillment => fulfillment?.Pick?.Status === \"AUTHORISED\")\n            .flatMap(fulfillment => fulfillment?.Pick?.Lines || []);\n\n          const sourceData = {\n            warehouse_id: warehouseId,\n            reference_id: params.data?.var.saleId,\n            order_number: data?.Order?.SaleOrderNumber,\n            order_date: ensureTimezone(data?.SaleOrderDate),\n            purchase_order_number: data?.CustomerReference || data?.Order?.SaleOrderNumber || \"\",  // Fallback to order number\n            trackstar_tags: [data?.Order?.SaleOrderNumber, `cin7_id:${params.data?.var.saleId}`].filter(Boolean),  // Array of tags\n            ...shippingMethodFields,  // Spread the determined shipping/carrier method fields\n            ship_to_address: {\n              full_name: data?.Customer,\n              address1: data?.ShippingAddress?.Line1 || data?.ShippingAddress?.DisplayAddressLine1,\n              address2: data?.ShippingAddress?.Line2,\n              city: data?.ShippingAddress?.City || shippingParsed.city,\n              state: data?.ShippingAddress?.State || shippingParsed.state,\n              postal_code: data?.ShippingAddress?.Postcode || shippingParsed.postalCode,\n              company: data?.ShippingAddress?.Company || data?.Customer,\n              country: data?.ShippingAddress?.Country || shippingParsed.country || shipping?.country || \"Australia\",\n              phone_number: data?.Phone,\n            },\n            bill_to_address: {\n              full_name: data?.Customer,\n              address1: data?.BillingAddress?.Line1 || data?.BillingAddress?.DisplayAddressLine1,\n              address2: data?.BillingAddress?.Line2,\n              city: data?.BillingAddress?.City || billingParsed.city,\n              state: data?.BillingAddress?.State || billingParsed.state,\n              postal_code: data?.BillingAddress?.Postcode || billingParsed.postalCode,\n              company: data?.BillingAddress?.Company || data?.Customer,\n              country: data?.BillingAddress?.Country || billingParsed.country || shipping?.country || \"Australia\",\n              phone_number: data?.Phone,\n            },\n            line_items: authorisedPickLines.map(pickLine => {\n              // Find matching order line for pricing info\n              const orderLine = (data?.Order?.Lines || []).find(\n                line => line.SKU === pickLine.SKU || line.ProductID === pickLine.ProductID\n              );\n\n              const productMatch = products.find(p => p.sku === pickLine.SKU);\n\n              return {\n                sku: pickLine.SKU,\n                quantity: pickLine.Quantity,  // Use picked quantity from AUTHORISED fulfillments\n                unit_price: orderLine?.Price || 0,\n                product_id: productMatch?.id || null,\n                tax: orderLine?.Tax || 0,\n              };\n            }),\n          };\n\n        const fillFromSchema = (schemaObj, dataObj, parentPath = '') => {\n            const result = {};\n\n            for (const key in schemaObj) {\n              const schemaVal = schemaObj[key];\n              const dataVal = dataObj?.[key];\n              const currentPath = parentPath ? `${parentPath}.${key}` : key;\n\n              // Handle line_items array\n              if (key === \"line_items\") {\n                if (Array.isArray(dataVal) && dataVal.length > 0) {\n                  const lineSchema = schemaObj[key];\n                  const items = dataVal.map(item => fillFromSchema(lineSchema, item, currentPath));\n                  if (items.length > 0) result[key] = items;\n                }\n                continue;\n              }\n\n              // Handle nested objects\n              if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n                const nested = fillFromSchema(schemaVal, dataVal || {}, currentPath);\n\n                // Include if it has content OR if the parent path itself is required\n                if (Object.keys(nested).length > 0 || isFieldInSchema(currentPath)) {\n                  result[key] = nested;\n                }\n                continue;\n              }\n\n              // Handle primitive values\n              const fieldExistsInData = dataObj?.hasOwnProperty(key);\n              const hasValue = dataVal !== undefined &&\n                              dataVal !== null &&\n                              dataVal !== \"\" &&\n                              !(Array.isArray(dataVal) && dataVal.length === 0);\n\n              // Exception: Skip address2 if it has no value\n              const isOptionalEmptyField = key === 'address2' && !hasValue;\n\n              if (hasValue) {\n                // Always include fields with actual values\n                result[key] = dataVal;\n              } else if (fieldExistsInData && !isOptionalEmptyField) {\n                // Only include empty fields if they were explicitly set in sourceData\n                // and are not optional fields like address2\n                result[key] = dataVal ?? \"\";\n              }\n              // If field doesn't exist in sourceData or is an optional empty field, skip it\n            }\n\n            return result;\n          };\n\n          const body = fillFromSchema(schema, sourceData);\n\n          return { body };\n        }",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "CreateOrder1",
                "prevStep": null,
                "enableDebug": true,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "CreateOrder1",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "CreateOrder1Map",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n    \tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n      \n      const saleCreate = params.data.steps.generateOrderRequestBody.output;\n      return {\n            \"body\": saleCreate?.body\n            };\n  }\n\n/* function handler(params) {\n    params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n    const flatSchema = params.data?.steps.flattenSchemaForCreateOrder?.output?.schema || {};\n    const data = params.data?.steps.getCin7SaleDetails?.output || {};\n    const shipping = params.data?.steps.determineShippingCountry?.output;\n    const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n    let warehouseId = params.data?.var.mappedWarehouse;\n\n    // Convert flat schema to nested structure\n    const unflattenSchema = (flatObj) => {\n      const result = {};\n\n      for (const key in flatObj) {\n        const parts = key.split('.');\n        let current = result;\n\n        for (let i = 0; i < parts.length; i++) {\n          const part = parts[i];\n\n          if (i === parts.length - 1) {\n            // Last part - set the value\n            current[part] = flatObj[key];\n          } else {\n            // Intermediate part - create object if doesn't exist\n            if (!current[part]) {\n              current[part] = {};\n            }\n            current = current[part];\n          }\n        }\n      }\n\n      return result;\n    };\n\n    const schema = unflattenSchema(flatSchema);\n\n    const sourceData = {\n      warehouse_id: warehouseId,\n      reference_id: params.data?.var.saleId,\n      order_number: data?.Order?.SaleOrderNumber,\n      trackstar_tags: \"\",\n      shipping_method: data?.Carrier || \"N/A\",\n      shipping_method_id: data?.CarrierID || \"N/A\",\n      ship_to_address: {\n        full_name: data?.Customer,\n        address1: data?.ShippingAddress?.Line1,\n        address2: data?.ShippingAddress?.Line2,\n        city: data?.ShippingAddress?.City,\n        state: data?.ShippingAddress?.State,\n        postal_code: data?.ShippingAddress?.Postcode,\n        company: data?.ShippingAddress?.Company || data?.Customer,\n        country: data?.ShippingAddress?.Country || shipping?.country || \"Australia\",\n      },\n      line_items: (data?.Order?.Lines || []).map(line => {\n        const productMatch = products.find(p => p.sku === line.SKU);\n        return {\n          sku: line.SKU,\n          quantity: line.Quantity,\n          unit_price: line.Price,\n          product_id: productMatch?.id || null,\n          tax: line.Tax || 0,  //  Add tax here from your source data\n        };\n      }),\n    };\n\n    const fillFromSchema = (schemaObj, dataObj) => {\n      const result = {};\n\n      for (const key in schemaObj) {\n        const schemaVal = schemaObj[key];\n        const dataVal = dataObj?.[key];\n\n        if (key === \"line_items\") {\n          if (Array.isArray(dataVal) && dataVal.length > 0) {\n            const lineSchema = schemaObj[key];\n            const items = dataVal.map(item => fillFromSchema(lineSchema, item));\n            if (items.length > 0) result[key] = items;\n          }\n        } else if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n          const nested = fillFromSchema(schemaVal, dataVal || {});\n          if (Object.keys(nested).length > 0) result[key] = nested;\n        } else {\n          if (\n            dataVal !== undefined &&\n            dataVal !== null &&\n            dataVal !== \"\" &&\n            !(Array.isArray(dataVal) && dataVal.length === 0)\n          ) {\n            result[key] = dataVal;\n          }\n        }\n      }\n\n      return result;\n    };\n\n    const body = fillFromSchema(schema, sourceData);\n\n    return { body };\n  }\n  */\n",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "CreateOrder1Api",
                        "uiCode": "function handler(params) {\n    \tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n      \n      const saleCreate = params.data.steps.generateOrderRequestBody.output;\n      return {\n            \"body\": saleCreate?.body\n            };\n  }\n\n/* function handler(params) {\n    params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n    const flatSchema = params.data?.steps.flattenSchemaForCreateOrder?.output?.schema || {};\n    const data = params.data?.steps.getCin7SaleDetails?.output || {};\n    const shipping = params.data?.steps.determineShippingCountry?.output;\n    const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n    let warehouseId = params.data?.var.mappedWarehouse;\n\n    // Convert flat schema to nested structure\n    const unflattenSchema = (flatObj) => {\n      const result = {};\n\n      for (const key in flatObj) {\n        const parts = key.split('.');\n        let current = result;\n\n        for (let i = 0; i < parts.length; i++) {\n          const part = parts[i];\n\n          if (i === parts.length - 1) {\n            // Last part - set the value\n            current[part] = flatObj[key];\n          } else {\n            // Intermediate part - create object if doesn't exist\n            if (!current[part]) {\n              current[part] = {};\n            }\n            current = current[part];\n          }\n        }\n      }\n\n      return result;\n    };\n\n    const schema = unflattenSchema(flatSchema);\n\n    const sourceData = {\n      warehouse_id: warehouseId,\n      reference_id: params.data?.var.saleId,\n      order_number: data?.Order?.SaleOrderNumber,\n      trackstar_tags: \"\",\n      shipping_method: data?.Carrier || \"N/A\",\n      shipping_method_id: data?.CarrierID || \"N/A\",\n      ship_to_address: {\n        full_name: data?.Customer,\n        address1: data?.ShippingAddress?.Line1,\n        address2: data?.ShippingAddress?.Line2,\n        city: data?.ShippingAddress?.City,\n        state: data?.ShippingAddress?.State,\n        postal_code: data?.ShippingAddress?.Postcode,\n        company: data?.ShippingAddress?.Company || data?.Customer,\n        country: data?.ShippingAddress?.Country || shipping?.country || \"Australia\",\n      },\n      line_items: (data?.Order?.Lines || []).map(line => {\n        const productMatch = products.find(p => p.sku === line.SKU);\n        return {\n          sku: line.SKU,\n          quantity: line.Quantity,\n          unit_price: line.Price,\n          product_id: productMatch?.id || null,\n          tax: line.Tax || 0,  //  Add tax here from your source data\n        };\n      }),\n    };\n\n    const fillFromSchema = (schemaObj, dataObj) => {\n      const result = {};\n\n      for (const key in schemaObj) {\n        const schemaVal = schemaObj[key];\n        const dataVal = dataObj?.[key];\n\n        if (key === \"line_items\") {\n          if (Array.isArray(dataVal) && dataVal.length > 0) {\n            const lineSchema = schemaObj[key];\n            const items = dataVal.map(item => fillFromSchema(lineSchema, item));\n            if (items.length > 0) result[key] = items;\n          }\n        } else if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n          const nested = fillFromSchema(schemaVal, dataVal || {});\n          if (Object.keys(nested).length > 0) result[key] = nested;\n        } else {\n          if (\n            dataVal !== undefined &&\n            dataVal !== null &&\n            dataVal !== \"\" &&\n            !(Array.isArray(dataVal) && dataVal.length === 0)\n          ) {\n            result[key] = dataVal;\n          }\n        }\n      }\n\n      return result;\n    };\n\n    const body = fillFromSchema(schema, sourceData);\n\n    return { body };\n  }\n  */\n",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "CreateOrder1Api",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "CreateOrder1Api",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8ccreate-order",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Create Order",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": false,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Variable3863",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"reference_id\":{\"type\":\"string\"},\"order_number\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"raw_status\":{\"type\":\"string\"},\"channel\":{\"type\":\"string\"},\"channel_object\":{\"type\":\"object\",\"properties\":{},\"required\":[]},\"type\":{\"type\":\"string\"},\"trading_partner\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"is_third_party_freight\":{\"type\":\"string\"},\"third_party_freight_account_number\":{\"type\":\"string\"},\"first_party_freight_account_number\":{\"type\":\"string\"},\"invoice_currency_code\":{\"type\":\"string\"},\"total_price\":{\"type\":\"string\"},\"total_tax\":{\"type\":\"string\"},\"total_discount\":{\"type\":\"string\"},\"total_shipping\":{\"type\":\"string\"},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"discount_amount\":{\"type\":\"string\"},\"is_picked\":{\"type\":\"string\"},\"product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_price\":{\"type\":\"string\"}},\"required\":[]}},\"tags\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"required_ship_date\":{\"type\":\"string\"},\"saturday_delivery\":{\"type\":\"string\"},\"signature_required\":{\"type\":\"string\"},\"international_duty_paid_by\":{\"type\":\"string\"},\"shipments\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"inventory_item_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"packages\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"carrier\":{\"type\":\"string\"},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"expiration_date\":{\"type\":\"string\"},\"inventory_item_id\":{\"type\":\"string\"},\"lot_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"measurements\":{\"type\":\"object\",\"properties\":{\"height\":{\"type\":\"string\"},\"length\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"},\"weight\":{\"type\":\"string\"},\"weight_unit\":{\"type\":\"string\"},\"width\":{\"type\":\"string\"}},\"required\":[]},\"package_id\":{\"type\":\"string\"},\"package_name\":{\"type\":\"string\"},\"scac\":{\"type\":\"string\"},\"shipping_cost\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"tracking_number\":{\"type\":\"string\"},\"tracking_url\":{\"type\":\"string\"}},\"required\":[]}},\"raw_status\":{\"type\":\"string\"},\"ship_from_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"shipment_id\":{\"type\":\"string\"},\"shipped_date\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]},\"id\":{\"type\":\"string\"},\"unused_fields\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]}",
                "next": "Variable3863",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the CreateOrder operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable3863",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "Switch7",
                  "variables": [],
                  "code": "\n{\n  \"statusCode\": {% if data.steps.CreateOrder1.statusCode is defined %}{{data.steps.CreateOrder1.statusCode}}{% else %}\"\"{% endif %},\n  \"errorMessage\": {% if data.steps.CreateOrder1.output.message  is defined %}{{data.steps.CreateOrder1.output.message | tojson}}{% else %}null{% endif %},\n  \"message\": \"Successfully sync order! \",\n  \"trackstarId\": {% if data.steps.CreateOrder1.output.data.id  is defined %}{{data.steps.CreateOrder1.output.data.id | tojson}}{% else %}null{% endif %},\n  \"trackstarOrderNumber\": {% if data.steps.CreateOrder1.output.data.orderNumber  is defined %}{{data.steps.CreateOrder1.output.data.orderNumber | tojson}}{% else %}null{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"statusCode\":{\"actionType\":\"map\",\"target\":\"{{data.steps.CreateOrder1.statusCode}}\",\"targetType\":\"integer\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"errorMessage\":{\"actionType\":\"map\",\"target\":\"{{data.steps.CreateOrder1.output.message}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"message\":{\"actionType\":\"map\",\"target\":\"Successfully sync order! \",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.CreateOrder1.output.data.id}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarOrderNumber\":{\"actionType\":\"map\",\"target\":\"{{data.steps.CreateOrder1.output.data.orderNumber}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "CreateOrder1"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "id"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "id"
                                                        },
                                                        "version": 2
                                                      }
                                                    },
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "orderNumber"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "orderNumber"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              },
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "message"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "message"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "statusCode"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "statusCode"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "CreateOrder1"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch7",
                "prevStep": null,
                "enableDebug": true,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch7",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch7",
                  "next": "Switch5",
                  "expressions": [
                    {
                      "name": "If success",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.steps.CreateOrder1.statusCode}}",
                      "value": "200",
                      "operation": "EQ",
                      "next": "Variable3811"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "CreateOrder1"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "statusCode"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "statusCode"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "CreateOrder1"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch5",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": "UNSKIP",
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable3811",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"trackstarId\": {% if data.steps.CreateOrder1.output.data.id  is defined %}{{data.steps.CreateOrder1.output.data.id | tojson}}{% else %}\"\"{% endif %},\n  \"trackstarOrderNumber\": {% if data.steps.CreateOrder1.output.data.order_number  is defined %}{{data.steps.CreateOrder1.output.data.order_number | tojson}}{% else %}null{% endif %},\n  \"message\": \"Order has been created\",\n  \"syncStatus\": \"Success\"\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"trackstarId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.CreateOrder1.output.data.id}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarOrderNumber\":{\"actionType\":\"map\",\"target\":\"{{data.steps.CreateOrder1.output.data.order_number}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"message\":{\"actionType\":\"map\",\"target\":\"Order has been created\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Success\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "CreateOrder1"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "id"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "id"
                                                        },
                                                        "version": 2
                                                      }
                                                    },
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "order_number"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "order_number"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "CreateOrder1"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INTERNAL_DB",
                "id": "SaveResultToReferenceTable",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": {
                  "next": "Success",
                  "query": "INSERT INTO \"{{data.var.referenceTable}}\" (\n    connection_id,\n    cin7_id,\n    cin7_key,\n    trackstar_id,\n    trackstar_key,\n    type,\n    last_sync_action,\n    last_sync_status,\n    last_sync_message,\n    created_at,\n    last_pushed_date,\n    reference_key\n) VALUES (\n    ?,\n    lower(?),\n    lower(?),\n    ?,\n    ?,\n    'sale',\n    'PUSH',\n    ?,\n    ?,\n    CURRENT_TIMESTAMP,\n    CURRENT_TIMESTAMP,\n    lower(?)\n)\nON CONFLICT (reference_key) DO UPDATE SET\n    connection_id = EXCLUDED.connection_id,\n    cin7_id = EXCLUDED.cin7_id,\n    cin7_key = EXCLUDED.cin7_key,\n    trackstar_id = EXCLUDED.trackstar_id,\n    trackstar_key = EXCLUDED.trackstar_key,\n    last_sync_action = 'PUSH',\n    last_sync_status = EXCLUDED.last_sync_status,\n    last_sync_message = EXCLUDED.last_sync_message,\n    last_pushed_date = CURRENT_TIMESTAMP;\n",
                  "code": "\n[\n{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.connectionId | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.saleId | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.saleOrderNumber | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.trackstarId | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.trackstarOrderNumber | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.syncStatus | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.message | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.referenceKey | tojson}}\n}\n\n]",
                  "dbQueryParams": [
                    {
                      "type": "string",
                      "value": "{{data.var.connectionId}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.saleId}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.saleOrderNumber}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.trackstarId}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.trackstarOrderNumber}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.syncStatus}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.message}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.referenceKey}}"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "referenceTable"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "referenceTable"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Success",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch5",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch5",
                  "next": "LogStatusCode",
                  "expressions": [
                    {
                      "name": "If failed",
                      "logic": "OR",
                      "conditions": [
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.var.statusCode}}",
                          "value": "400",
                          "operation": "EQ",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.var.statusCode}}",
                          "value": "422",
                          "operation": "EQ",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.var.statusCode}}",
                          "value": "500",
                          "operation": "EQ",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.var.statusCode}}",
                          "value": "504",
                          "operation": "EQ",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.var.statusCode}}",
                          "value": "501",
                          "operation": "EQ",
                          "next": null
                        }
                      ],
                      "variable": "{{data.steps.CreateOrder1.statusCode}}",
                      "value": "400",
                      "operation": "EQ",
                      "next": "Variable9111"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "CreateOrder1"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "statusCode"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "statusCode"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "CreateOrder1"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "LogStatusCode",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "GetAllOrders",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "GetAllOrdersMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n    let orderNumber = params.data?.steps.getCin7SaleDetails.output.Order.SaleOrderNumber;\n\tlet cin7Id = params.data?.steps.getCin7SaleDetails.output.ID;\n\tlet trackstarOrderNumber = params?.data.steps.SelectReferenceTable.output?.filter(item => item.cin7_id === cin7Id);\n\n    return {\n\t\t\"param\": {\t\n\t\t\t\"limit\": 1,\n\t\t\t//\"order_number\": orderNumber\n\t\t\t//\"order_number\": trackstarOrderNumber[0]?.trackstar_order_number || orderNumber,\n\t\t\t\"reference_id\": cin7Id\n\t\t}\n\t}\n}",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "GetAllOrdersApi",
                        "uiCode": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n    let orderNumber = params.data?.steps.getCin7SaleDetails.output.Order.SaleOrderNumber;\n\tlet cin7Id = params.data?.steps.getCin7SaleDetails.output.ID;\n\tlet trackstarOrderNumber = params?.data.steps.SelectReferenceTable.output?.filter(item => item.cin7_id === cin7Id);\n\n    return {\n\t\t\"param\": {\t\n\t\t\t\"limit\": 1,\n\t\t\t//\"order_number\": orderNumber\n\t\t\t//\"order_number\": trackstarOrderNumber[0]?.trackstar_order_number || orderNumber,\n\t\t\t\"reference_id\": cin7Id\n\t\t}\n\t}\n}",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "GetAllOrdersApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "GetAllOrdersApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-all-orders",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Get All Orders",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": true,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Variable3178",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"reference_id\":{\"type\":\"string\"},\"order_number\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"raw_status\":{\"type\":\"string\"},\"channel\":{\"type\":\"string\"},\"channel_object\":{\"type\":\"object\",\"properties\":{},\"required\":[]},\"type\":{\"type\":\"string\"},\"trading_partner\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"is_third_party_freight\":{\"type\":\"string\"},\"third_party_freight_account_number\":{\"type\":\"string\"},\"first_party_freight_account_number\":{\"type\":\"string\"},\"invoice_currency_code\":{\"type\":\"string\"},\"total_price\":{\"type\":\"string\"},\"total_tax\":{\"type\":\"string\"},\"total_discount\":{\"type\":\"string\"},\"total_shipping\":{\"type\":\"string\"},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"discount_amount\":{\"type\":\"string\"},\"is_picked\":{\"type\":\"string\"},\"product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_price\":{\"type\":\"string\"}},\"required\":[]}},\"tags\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"required_ship_date\":{\"type\":\"string\"},\"saturday_delivery\":{\"type\":\"string\"},\"signature_required\":{\"type\":\"string\"},\"international_duty_paid_by\":{\"type\":\"string\"},\"shipments\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"inventory_item_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"packages\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"carrier\":{\"type\":\"string\"},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"expiration_date\":{\"type\":\"string\"},\"inventory_item_id\":{\"type\":\"string\"},\"lot_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"measurements\":{\"type\":\"object\",\"properties\":{\"height\":{\"type\":\"string\"},\"length\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"},\"weight\":{\"type\":\"string\"},\"weight_unit\":{\"type\":\"string\"},\"width\":{\"type\":\"string\"}},\"required\":[]},\"package_id\":{\"type\":\"string\"},\"package_name\":{\"type\":\"string\"},\"scac\":{\"type\":\"string\"},\"shipping_cost\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"tracking_number\":{\"type\":\"string\"},\"tracking_url\":{\"type\":\"string\"}},\"required\":[]}},\"raw_status\":{\"type\":\"string\"},\"ship_from_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"shipment_id\":{\"type\":\"string\"},\"shipped_date\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]}},\"next_token\":{\"type\":\"string\"},\"total_count\":{\"type\":\"string\"}},\"required\":[]}",
                "next": "Variable3178",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the GetAllOrders operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "UpdateOrder1",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "UpdateOrder1Map",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n      params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n      const orderData = params.data?.steps?.GetTrackstarOrder?.output?.data || {};\n      const flatSchema = params.data?.steps.flattenSchemaForUpdateOrder?.output?.schema || {};\n      const data = params.data?.steps.getCin7SaleDetails?.output || {};\n      const shipping = params.data?.steps.determineShippingCountry?.output;\n      const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n      let warehouseId = params.data?.var.mappedWarehouse;\n\n      // Convert flat schema to nested structure\n      const unflattenSchema = (flatObj) => {\n        const result = {};\n\n        for (const key in flatObj) {\n          const parts = key.split('.');\n          let current = result;\n\n          for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n\n            if (i === parts.length - 1) {\n              current[part] = flatObj[key];\n            } else {\n              if (!current[part]) {\n                current[part] = {};\n              }\n              current = current[part];\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const schema = unflattenSchema(flatSchema);\n\n      // Build address object (reusable for both ship_to and bill_to)\n      const addressData = {\n        full_name: data?.Customer,\n        address1: data?.ShippingAddress?.Line1,\n        address2: data?.ShippingAddress?.Line2,\n        city: data?.ShippingAddress?.City,\n        state: data?.ShippingAddress?.State,\n        postal_code: data?.ShippingAddress?.Postcode,\n        company: data?.ShippingAddress?.Company || data?.Customer,\n        country: data?.ShippingAddress?.Country || shipping?.country || \"Australia\",\n      };\n\n      // Only include fields that match the Cin7 schema\n      const sourceData = {\n        warehouse_id: warehouseId,\n        trackstar_tags: \"\",\n        ship_to_address: addressData,\n        bill_to_address: addressData, // Cin7 requires this\n        line_items: (data?.Order?.Lines || []).map(line => {\n          const productMatch = products.find(p => p.sku === line.SKU);\n          return {\n            product_id: productMatch?.id || null,\n            quantity: line.Quantity,\n            unit_price: line.Price,\n            tax: line.Tax || 0,\n          };\n        }),\n      };\n\n      const fillFromSchema = (schemaObj, dataObj) => {\n        const result = {};\n\n        for (const key in schemaObj) {\n          const schemaVal = schemaObj[key];\n          const dataVal = dataObj?.[key];\n\n          if (key === \"line_items\") {\n            if (Array.isArray(dataVal) && dataVal.length > 0) {\n              const lineSchema = schemaObj[key];\n              const items = dataVal.map(item => fillFromSchema(lineSchema, item));\n              if (items.length > 0) result[key] = items;\n            }\n          } else if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n            const nested = fillFromSchema(schemaVal, dataVal || {});\n            if (Object.keys(nested).length > 0) result[key] = nested;\n          } else {\n            if (\n              dataVal !== undefined &&\n              dataVal !== null &&\n              dataVal !== \"\" &&\n              !(Array.isArray(dataVal) && dataVal.length === 0)\n            ) {\n              result[key] = dataVal;\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const body = fillFromSchema(schema, sourceData);\n\n      return { \t\n        \"url\": {\t\n                \"order_id\": orderData.id\n        },\n        body \n      }\n    }",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "UpdateOrder1Api",
                        "uiCode": "function handler(params) {\n      params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n      const orderData = params.data?.steps?.GetTrackstarOrder?.output?.data || {};\n      const flatSchema = params.data?.steps.flattenSchemaForUpdateOrder?.output?.schema || {};\n      const data = params.data?.steps.getCin7SaleDetails?.output || {};\n      const shipping = params.data?.steps.determineShippingCountry?.output;\n      const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n      let warehouseId = params.data?.var.mappedWarehouse;\n\n      // Convert flat schema to nested structure\n      const unflattenSchema = (flatObj) => {\n        const result = {};\n\n        for (const key in flatObj) {\n          const parts = key.split('.');\n          let current = result;\n\n          for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n\n            if (i === parts.length - 1) {\n              current[part] = flatObj[key];\n            } else {\n              if (!current[part]) {\n                current[part] = {};\n              }\n              current = current[part];\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const schema = unflattenSchema(flatSchema);\n\n      // Build address object (reusable for both ship_to and bill_to)\n      const addressData = {\n        full_name: data?.Customer,\n        address1: data?.ShippingAddress?.Line1,\n        address2: data?.ShippingAddress?.Line2,\n        city: data?.ShippingAddress?.City,\n        state: data?.ShippingAddress?.State,\n        postal_code: data?.ShippingAddress?.Postcode,\n        company: data?.ShippingAddress?.Company || data?.Customer,\n        country: data?.ShippingAddress?.Country || shipping?.country || \"Australia\",\n      };\n\n      // Only include fields that match the Cin7 schema\n      const sourceData = {\n        warehouse_id: warehouseId,\n        trackstar_tags: \"\",\n        ship_to_address: addressData,\n        bill_to_address: addressData, // Cin7 requires this\n        line_items: (data?.Order?.Lines || []).map(line => {\n          const productMatch = products.find(p => p.sku === line.SKU);\n          return {\n            product_id: productMatch?.id || null,\n            quantity: line.Quantity,\n            unit_price: line.Price,\n            tax: line.Tax || 0,\n          };\n        }),\n      };\n\n      const fillFromSchema = (schemaObj, dataObj) => {\n        const result = {};\n\n        for (const key in schemaObj) {\n          const schemaVal = schemaObj[key];\n          const dataVal = dataObj?.[key];\n\n          if (key === \"line_items\") {\n            if (Array.isArray(dataVal) && dataVal.length > 0) {\n              const lineSchema = schemaObj[key];\n              const items = dataVal.map(item => fillFromSchema(lineSchema, item));\n              if (items.length > 0) result[key] = items;\n            }\n          } else if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n            const nested = fillFromSchema(schemaVal, dataVal || {});\n            if (Object.keys(nested).length > 0) result[key] = nested;\n          } else {\n            if (\n              dataVal !== undefined &&\n              dataVal !== null &&\n              dataVal !== \"\" &&\n              !(Array.isArray(dataVal) && dataVal.length === 0)\n            ) {\n              result[key] = dataVal;\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const body = fillFromSchema(schema, sourceData);\n\n      return { \t\n        \"url\": {\t\n                \"order_id\": orderData.id\n        },\n        body \n      }\n    }",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "UpdateOrder1Api",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "UpdateOrder1Api",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cupdate-order",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Update Order",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": false,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": false,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Variable2090",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"reference_id\":{\"type\":\"string\"},\"order_number\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"raw_status\":{\"type\":\"string\"},\"channel\":{\"type\":\"string\"},\"channel_object\":{\"type\":\"object\",\"properties\":{},\"required\":[]},\"type\":{\"type\":\"string\"},\"trading_partner\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"is_third_party_freight\":{\"type\":\"string\"},\"third_party_freight_account_number\":{\"type\":\"string\"},\"first_party_freight_account_number\":{\"type\":\"string\"},\"invoice_currency_code\":{\"type\":\"string\"},\"total_price\":{\"type\":\"string\"},\"total_tax\":{\"type\":\"string\"},\"total_discount\":{\"type\":\"string\"},\"total_shipping\":{\"type\":\"string\"},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"discount_amount\":{\"type\":\"string\"},\"is_picked\":{\"type\":\"string\"},\"product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_price\":{\"type\":\"string\"}},\"required\":[]}},\"tags\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"required_ship_date\":{\"type\":\"string\"},\"saturday_delivery\":{\"type\":\"string\"},\"signature_required\":{\"type\":\"string\"},\"international_duty_paid_by\":{\"type\":\"string\"},\"shipments\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"inventory_item_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"packages\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"carrier\":{\"type\":\"string\"},\"line_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"expiration_date\":{\"type\":\"string\"},\"inventory_item_id\":{\"type\":\"string\"},\"lot_id\":{\"type\":\"string\"},\"parent_product_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}},\"required\":[]}},\"measurements\":{\"type\":\"object\",\"properties\":{\"height\":{\"type\":\"string\"},\"length\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"},\"weight\":{\"type\":\"string\"},\"weight_unit\":{\"type\":\"string\"},\"width\":{\"type\":\"string\"}},\"required\":[]},\"package_id\":{\"type\":\"string\"},\"package_name\":{\"type\":\"string\"},\"scac\":{\"type\":\"string\"},\"shipping_cost\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"tracking_number\":{\"type\":\"string\"},\"tracking_url\":{\"type\":\"string\"}},\"required\":[]}},\"raw_status\":{\"type\":\"string\"},\"ship_from_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"ship_to_address\":{\"type\":\"object\",\"properties\":{\"address1\":{\"type\":\"string\"},\"address2\":{\"type\":\"string\"},\"address3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"company\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"},\"email_address\":{\"type\":\"string\"},\"full_name\":{\"type\":\"string\"},\"phone_number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}},\"required\":[]},\"shipment_id\":{\"type\":\"string\"},\"shipped_date\":{\"type\":\"string\"},\"shipping_method\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]},\"id\":{\"type\":\"string\"},\"unused_fields\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]}",
                "next": "Variable2090",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the UpdateOrder operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "GetAllProducts",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "GetAllProductsMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\tconst skuList = params.data.steps.ExtractSKUList.output.skuList;\n\t\n    return {\n\t\t\"param\": {\n\t\t\t\"skuin\": skuList,\t\t\t\n\t\t\t\"limit\": 50\n\t\t}\n\t}\n}\n    ",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "GetAllProductsApi",
                        "uiCode": "function handler(params) {\n\tparams.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\tconst skuList = params.data.steps.ExtractSKUList.output.skuList;\n\t\n    return {\n\t\t\"param\": {\n\t\t\t\"skuin\": skuList,\t\t\t\n\t\t\t\"limit\": 50\n\t\t}\n\t}\n}\n    ",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "GetAllProductsApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "GetAllProductsApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-all-products",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Get All Products",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": false,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Variable8617",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"gtin\":{\"type\":\"string\"},\"unit_price\":{\"type\":\"string\"},\"inventory_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"inventory_item_id\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_quantity\":{\"type\":\"string\"}},\"required\":[]}},\"is_kit\":{\"type\":\"string\"},\"active\":{\"type\":\"string\"},\"supplier\":{\"type\":\"string\"},\"supplier_object\":{\"type\":\"object\",\"properties\":{},\"required\":[]},\"country_of_origin\":{\"type\":\"string\"},\"harmonized_code\":{\"type\":\"string\"},\"supplier_products\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"external_id\":{\"type\":\"string\"},\"supplier_id\":{\"type\":\"string\"},\"supplier_name\":{\"type\":\"string\"},\"unit_cost\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]}},\"next_token\":{\"type\":\"string\"},\"total_count\":{\"type\":\"string\"}},\"required\":[]}",
                "next": "Variable8617",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the GetAllProducts operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": "Get the product of the match sku from trackstar"
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable2090",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "UpdateSuccess",
                  "variables": [],
                  "code": "\n{\n  \"statusCode\": {% if data.steps.UpdateOrder1.statusCode is defined %}{{data.steps.UpdateOrder1.statusCode}}{% else %}\"\"{% endif %},\n  \"errorMessage\": {% if data.steps.UpdateOrder1.output.message  is defined %}{{data.steps.UpdateOrder1.output.message | tojson}}{% else %}null{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"statusCode\":{\"actionType\":\"map\",\"target\":\"{{data.steps.UpdateOrder1.statusCode}}\",\"targetType\":\"integer\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"errorMessage\":{\"actionType\":\"map\",\"target\":\"{{data.steps.UpdateOrder1.output.message}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "UpdateOrder1"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "message"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "message"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "statusCode"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "statusCode"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "UpdateOrder1"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "UpdateSuccess",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "NoIdWasProvided",
                "actionId": null,
                "inline": {
                  "code": "\n{\n  \"message\": \"No id was provided\"\n}",
                  "language": "JINJA",
                  "fields": [],
                  "next": null,
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"message\":{\"actionType\":\"map\",\"target\":\"No id was provided\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "hasResponse": true,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": {
                    "children": [],
                    "returnLiteral": true,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "LOGGER",
                "id": "LogStatusCode",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": {
                  "next": "Variable5104",
                  "context": "{{data.var.statusCode}}",
                  "message": "statusCode",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "statusCode"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "statusCode"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Variable5104",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "IfUpdateOrderSupported",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "IfUpdateOrderSupported",
                  "next": "Variable7819",
                  "expressions": [
                    {
                      "name": "Is update_order available?",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.var.availableActions}}",
                      "value": "update_order",
                      "operation": "CONTAINS",
                      "next": "flattenSchemaForUpdateOrder"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "availableActions"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "availableActions"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Variable7819",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable7819",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"message\": {{( \"Update order is not supported for \" ~ data.var.integrationName ~ \" integration\") | tojson}},\n  \"syncStatus\": \"Skipped\"\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"message\":{\"actionType\":\"map\",\"target\":\"Update order is not supported for {{data.var.integrationName}} integration\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Skipped\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "integrationName"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "integrationName"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "CONTINUE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable8763",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"trackstarOrderId\": {% if data.steps.UpdateOrder1.output.data.order_id  is defined %}{{data.steps.UpdateOrder1.output.data.order_id | tojson}}{% else %}\"\"{% endif %},\n  \"trackstarOrderNumber\": {% if data.steps.UpdateOrder1.output.data.order_number  is defined %}{{data.steps.UpdateOrder1.output.data.order_number | tojson}}{% else %}null{% endif %},\n  \"syncStatus\": \"Success\",\n  \"message\": \"Order successfully updated\"\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"trackstarOrderId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.UpdateOrder1.output.data.order_id}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarOrderNumber\":{\"actionType\":\"map\",\"target\":\"{{data.steps.UpdateOrder1.output.data.order_number}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Success\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"message\":{\"actionType\":\"map\",\"target\":\"Order successfully updated\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "UpdateOrder1"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "order_id"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "order_id"
                                                        },
                                                        "version": 2
                                                      }
                                                    },
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "order_number"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "order_number"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "UpdateOrder1"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable9111",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"message\": {% if data.var.errorMessage  is defined %}{{data.var.errorMessage | tojson}}{% else %}\"\"{% endif %},\n  \"syncStatus\": \"Failed\"\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"message\":{\"actionType\":\"map\",\"target\":\"{{data.var.errorMessage}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Failed\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "errorMessage"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "errorMessage"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable8285",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"syncStatus\": \"Skipped\",\n  \"message\": \"Tenant has location mapping but order location mapping not found for the order\"\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Skipped\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"message\":{\"actionType\":\"map\",\"target\":\"Tenant has location mapping but order location mapping not found for the order\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [],
                    "returnLiteral": true,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "handleParams",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n      params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n      const orderData = params.data?.steps?.GetTrackstarOrder?.output?.data || {};\n      const flatSchema = params.data?.steps.flattenSchemaForUpdateOrder?.output?.schema || {};\n      const data = params.data?.steps.getCin7SaleDetails?.output || {};\n      const shipping = params.data?.steps.determineShippingCountry?.output;\n      const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n      let warehouseId = params.data?.var.mappedWarehouse;\n\n      // Convert flat schema to nested structure\n      const unflattenSchema = (flatObj) => {\n        const result = {};\n\n        for (const key in flatObj) {\n          const parts = key.split('.');\n          let current = result;\n\n          for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n\n            if (i === parts.length - 1) {\n              current[part] = flatObj[key];\n            } else {\n              if (!current[part]) {\n                current[part] = {};\n              }\n              current = current[part];\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const schema = unflattenSchema(flatSchema);\n\n      // Build address object (reusable for both ship_to and bill_to)\n      const addressData = {\n        full_name: data?.Customer,\n        address1: data?.ShippingAddress?.Line1,\n        address2: data?.ShippingAddress?.Line2,\n        city: data?.ShippingAddress?.City,\n        state: data?.ShippingAddress?.State,\n        postal_code: data?.ShippingAddress?.Postcode,\n        company: data?.ShippingAddress?.Company || data?.Customer,\n        country: data?.ShippingAddress?.Country || shipping?.country || \"Australia\",\n      };\n\n      // Only include fields that match the Cin7 schema\n      const sourceData = {\n        warehouse_id: warehouseId,\n        trackstar_tags: \"\",\n        ship_to_address: addressData,\n        bill_to_address: addressData, // Cin7 requires this\n        line_items: (data?.Order?.Lines || []).map(line => {\n          const productMatch = products.find(p => p.sku === line.SKU);\n          return {\n            product_id: productMatch?.id || null,\n            quantity: line.Quantity,\n            unit_price: line.Price,\n            tax: line.Tax || 0,\n          };\n        }),\n      };\n\n      const fillFromSchema = (schemaObj, dataObj) => {\n        const result = {};\n\n        for (const key in schemaObj) {\n          const schemaVal = schemaObj[key];\n          const dataVal = dataObj?.[key];\n\n          if (key === \"line_items\") {\n            if (Array.isArray(dataVal) && dataVal.length > 0) {\n              const lineSchema = schemaObj[key];\n              const items = dataVal.map(item => fillFromSchema(lineSchema, item));\n              if (items.length > 0) result[key] = items;\n            }\n          } else if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n            const nested = fillFromSchema(schemaVal, dataVal || {});\n            if (Object.keys(nested).length > 0) result[key] = nested;\n          } else {\n            if (\n              dataVal !== undefined &&\n              dataVal !== null &&\n              dataVal !== \"\" &&\n              !(Array.isArray(dataVal) && dataVal.length === 0)\n            ) {\n              result[key] = dataVal;\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const body = fillFromSchema(schema, sourceData);\n\n      return { \t\n        \"url\": {\t\n                \"order_id\": orderData.id\n        },\n        body \n      }\n    }",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "UpdateOrder1",
                  "uiCode": "function handler(params) {\n      params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n\n      const orderData = params.data?.steps?.GetTrackstarOrder?.output?.data || {};\n      const flatSchema = params.data?.steps.flattenSchemaForUpdateOrder?.output?.schema || {};\n      const data = params.data?.steps.getCin7SaleDetails?.output || {};\n      const shipping = params.data?.steps.determineShippingCountry?.output;\n      const products = params.data?.steps?.GetAllProducts?.output?.data || [];\n      let warehouseId = params.data?.var.mappedWarehouse;\n\n      // Convert flat schema to nested structure\n      const unflattenSchema = (flatObj) => {\n        const result = {};\n\n        for (const key in flatObj) {\n          const parts = key.split('.');\n          let current = result;\n\n          for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n\n            if (i === parts.length - 1) {\n              current[part] = flatObj[key];\n            } else {\n              if (!current[part]) {\n                current[part] = {};\n              }\n              current = current[part];\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const schema = unflattenSchema(flatSchema);\n\n      // Build address object (reusable for both ship_to and bill_to)\n      const addressData = {\n        full_name: data?.Customer,\n        address1: data?.ShippingAddress?.Line1,\n        address2: data?.ShippingAddress?.Line2,\n        city: data?.ShippingAddress?.City,\n        state: data?.ShippingAddress?.State,\n        postal_code: data?.ShippingAddress?.Postcode,\n        company: data?.ShippingAddress?.Company || data?.Customer,\n        country: data?.ShippingAddress?.Country || shipping?.country || \"Australia\",\n      };\n\n      // Only include fields that match the Cin7 schema\n      const sourceData = {\n        warehouse_id: warehouseId,\n        trackstar_tags: \"\",\n        ship_to_address: addressData,\n        bill_to_address: addressData, // Cin7 requires this\n        line_items: (data?.Order?.Lines || []).map(line => {\n          const productMatch = products.find(p => p.sku === line.SKU);\n          return {\n            product_id: productMatch?.id || null,\n            quantity: line.Quantity,\n            unit_price: line.Price,\n            tax: line.Tax || 0,\n          };\n        }),\n      };\n\n      const fillFromSchema = (schemaObj, dataObj) => {\n        const result = {};\n\n        for (const key in schemaObj) {\n          const schemaVal = schemaObj[key];\n          const dataVal = dataObj?.[key];\n\n          if (key === \"line_items\") {\n            if (Array.isArray(dataVal) && dataVal.length > 0) {\n              const lineSchema = schemaObj[key];\n              const items = dataVal.map(item => fillFromSchema(lineSchema, item));\n              if (items.length > 0) result[key] = items;\n            }\n          } else if (typeof schemaVal === \"object\" && !Array.isArray(schemaVal)) {\n            const nested = fillFromSchema(schemaVal, dataVal || {});\n            if (Object.keys(nested).length > 0) result[key] = nested;\n          } else {\n            if (\n              dataVal !== undefined &&\n              dataVal !== null &&\n              dataVal !== \"\" &&\n              !(Array.isArray(dataVal) && dataVal.length === 0)\n            ) {\n              result[key] = dataVal;\n            }\n          }\n        }\n\n        return result;\n      };\n\n      const body = fillFromSchema(schema, sourceData);\n\n      return { \t\n        \"url\": {\t\n                \"order_id\": orderData.id\n        },\n        body \n      }\n    }",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "UpdateOrder1",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": "SKIP",
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "LAMBDA",
                "id": "flattenSchemaForUpdateOrder",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": {
                  "code": "import json\n\ndef fastn_function(params):\n    def set_nested(obj, path, value):\n        keys = path.split(\".\")\n        curr = obj\n        for i, key in enumerate(keys):\n            if i == len(keys) - 1:\n                curr[key] = value\n            else:\n                if key not in curr or not isinstance(curr[key], dict):\n                    curr[key] = {}\n                curr = curr[key]\n\n    schema_list = params.get(\"data\", {}).get(\"steps\", {}).get(\"GetIntegrationSchemaFromDB\", {}).get(\"output\", [])\n    schema = schema_list[0] if schema_list else {}\n\n    value_str = schema.get(\"data\", {}).get(\"value\")\n    if not value_str:\n        return {\"schema\": {}}\n\n    try:\n        parse_schema = json.loads(value_str)\n    except json.JSONDecodeError:\n        return {\"error\": \"Invalid JSON in schema.value\"}\n\n    action = params.get(\"data\", {}).get(\"input\", {}).get(\"action\", \"update_order\")\n\n    operations = parse_schema.get(\"operations\", [])\n    superset_schema = {}\n\n    for operation in operations:\n        if operation.get(\"action\") == action:\n            superset_schema = operation.get(\"superset_schema\", {})\n            break\n\n    if not superset_schema and operations:\n        superset_schema = operations[0].get(\"superset_schema\", {})\n\n    flatten_schema = {}\n\n    for key, value in superset_schema.items():\n        set_nested(flatten_schema, key, value)\n\n    return {\"schema\": flatten_schema}",
                  "next": "handleParams",
                  "validation": {
                    "validData": true,
                    "reason": null,
                    "valid": false,
                    "queryExecutor": null
                  },
                  "language": "PYTHON",
                  "version": 2,
                  "queryExecutor": null
                },
                "outputSchema": null,
                "next": "handleParams",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable3178",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "ifwarehousesAvilable",
                  "variables": [],
                  "code": "\n{\n  \"orderLength\": {% set orderLength_array_Length= data.steps.GetAllOrders.output.data | length %}{{orderLength_array_Length}},\n  \"trackstarOrderNumber\": {% if data.steps.GetAllOrders.output.data[0].order_number  is defined %}{{data.steps.GetAllOrders.output.data[0].order_number | tojson}}{% else %}null{% endif %},\n  \"trackstarId\": {% if data.steps.GetAllOrders.output.data[0].id  is defined %}{{data.steps.GetAllOrders.output.data[0].id | tojson}}{% else %}null{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"orderLength\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"arrayLength\",\"target\":\"{{data.steps.GetAllOrders.output.data}}\",\"variable\":\"orderLength_array_Length\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"orderLength_array_Length\"}],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarOrderNumber\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetAllOrders.output.data[0].order_number}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"trackstarId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetAllOrders.output.data[0].id}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "GetAllOrders"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.math.BigInteger",
                                                        "value": "0"
                                                      },
                                                      "value": {
                                                        "children": [
                                                          {
                                                            "key": {
                                                              "type": "java.lang.String",
                                                              "value": "id"
                                                            },
                                                            "value": {
                                                              "children": [],
                                                              "returnLiteral": true,
                                                              "symbolOrIndex": {
                                                                "type": "java.lang.String",
                                                                "value": "id"
                                                              },
                                                              "version": 2
                                                            }
                                                          },
                                                          {
                                                            "key": {
                                                              "type": "java.lang.String",
                                                              "value": "order_number"
                                                            },
                                                            "value": {
                                                              "children": [],
                                                              "returnLiteral": true,
                                                              "symbolOrIndex": {
                                                                "type": "java.lang.String",
                                                                "value": "order_number"
                                                              },
                                                              "version": 2
                                                            }
                                                          }
                                                        ],
                                                        "returnLiteral": false,
                                                        "symbolOrIndex": {
                                                          "type": "java.math.BigInteger",
                                                          "value": "0"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "GetAllOrders"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "ifwarehousesAvilable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable5104",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"message\": {% if data.var.errorMessage  is defined %}{{data.var.errorMessage | tojson}}{% else %}\"\"{% endif %},\n  \"syncStatus\": \"Failed\"\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"message\":{\"actionType\":\"map\",\"target\":\"{{data.var.errorMessage}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Failed\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "errorMessage"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "errorMessage"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "identifyUnfoundSkus",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n      const skuListString = params.data.steps.ExtractSKUList.output.skuList;\n      //const foundProducts = params.data?.steps.GetAllProducts.output?.data || [];\n      const foundProducts = params.data?.var.trackstarProducts || [];\n\n      // Split the comma-separated string into an array of SKUs\n      const requestedSkus = skuListString.split(',').map(sku => sku.trim());\n\n      // Build a Set of found SKUs\n      const foundSkusSet = new Set();\n\n      for (let i = 0; i < foundProducts.length; i++) {\n          const product = foundProducts[i];\n          if (product && product.sku) {\n              foundSkusSet.add(product.sku);\n          }\n\n          // Also check inventory_items for additional SKUs\n          if (product && product.inventory_items) {\n              for (let j = 0; j < product.inventory_items.length; j++) {\n                  const item = product.inventory_items[j];\n                  if (item && item.sku) {\n                      foundSkusSet.add(item.sku);\n                  }\n              }\n          }\n      }\n\n      // Find unfound SKUs\n      const unfoundSkus = [];\n      for (let k = 0; k < requestedSkus.length; k++) {\n          const requestedSku = requestedSkus[k];\n          if (!foundSkusSet.has(requestedSku)) {\n              unfoundSkus.push(requestedSku);\n          }\n      }\n\n      return {unfoundSkus, unFoundCount:unfoundSkus.length};\n  }",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "DetermineIfAllProductsExist",
                  "uiCode": "function handler(params) {\n      const skuListString = params.data.steps.ExtractSKUList.output.skuList;\n      //const foundProducts = params.data?.steps.GetAllProducts.output?.data || [];\n      const foundProducts = params.data?.var.trackstarProducts || [];\n\n      // Split the comma-separated string into an array of SKUs\n      const requestedSkus = skuListString.split(',').map(sku => sku.trim());\n\n      // Build a Set of found SKUs\n      const foundSkusSet = new Set();\n\n      for (let i = 0; i < foundProducts.length; i++) {\n          const product = foundProducts[i];\n          if (product && product.sku) {\n              foundSkusSet.add(product.sku);\n          }\n\n          // Also check inventory_items for additional SKUs\n          if (product && product.inventory_items) {\n              for (let j = 0; j < product.inventory_items.length; j++) {\n                  const item = product.inventory_items[j];\n                  if (item && item.sku) {\n                      foundSkusSet.add(item.sku);\n                  }\n              }\n          }\n      }\n\n      // Find unfound SKUs\n      const unfoundSkus = [];\n      for (let k = 0; k < requestedSkus.length; k++) {\n          const requestedSku = requestedSkus[k];\n          if (!foundSkusSet.has(requestedSku)) {\n              unfoundSkus.push(requestedSku);\n          }\n      }\n\n      return {unfoundSkus, unFoundCount:unfoundSkus.length};\n  }",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "DetermineIfAllProductsExist",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "ExtractSKUList",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  let data = params.data?.steps.getCin7SaleDetails.output;\n\tlet lines = data.Order?.Lines || [];\n\n\tconst skuList = lines\n    .map(line => line.SKU)\n    .filter(sku => sku && sku.trim() !== \"\")\n    .join(\",\");\n\n  return {skuList};\n}",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "GetAllProducts",
                  "uiCode": "function handler(params) {\n  let data = params.data?.steps.getCin7SaleDetails.output;\n\tlet lines = data.Order?.Lines || [];\n\n\tconst skuList = lines\n    .map(line => line.SKU)\n    .filter(sku => sku && sku.trim() !== \"\")\n    .join(\",\");\n\n  return {skuList};\n}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "GetAllProducts",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "LOOP",
                "id": "LoopOverMissingProducts",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": {
                  "next": "GetAllRecentlyAddedProducts",
                  "start": "Log3",
                  "loopOver": "{{data.steps.identifyUnfoundSkus.output.unfoundSkus}}",
                  "type": "DATA",
                  "steps": [
                    {
                      "type": "LOGGER",
                      "id": "Log3",
                      "actionId": null,
                      "inline": null,
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": {
                        "next": "sync_cin7_trackstar_product_v1",
                        "context": "Kunwari created na si {{data.steps.LoopOverMissingProducts.loopOverItem}}",
                        "message": null,
                        "queryExecutor": null
                      },
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "sync_cin7_trackstar_product_v1",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": 1,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": {
                        "failureBehavior": "FAILURE",
                        "skipStatus": null,
                        "errorMessage": null,
                        "stepNote": null
                      },
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "COMPOSITE",
                      "id": "sync_cin7_trackstar_product_v1",
                      "actionId": null,
                      "inline": null,
                      "function": null,
                      "composite": {
                        "steps": [
                          {
                            "type": "INLINE",
                            "id": "sync_cin7_trackstar_product_v1Map",
                            "actionId": null,
                            "inline": {
                              "code": "function handler(params) {\n\tlet tenantId = params.data?.headers['x-fastn-space-tenantid'];\n\tlet connectionId = params.data?.var.connectionId;\n\n\n\tconst sku = params.data.steps.LoopOverMissingProducts.loopOverItem;\n    return {\n\t\"headers\": {\n\t\t\t\"customAuth\": true,\n\t\t\t\"x-fastn-space-tenantid\": tenantId,\n\t\t\t\"x-fastn-space-connection-id\": connectionId\n\t},\n\t\"body\": {\n\t\t\"input\": {\n\t\t\t\"SKU\": sku\n\t\t}\n\t}\n}\n  }\n    ",
                              "language": "JAVASCRIPT",
                              "fields": [],
                              "next": "sync_cin7_trackstar_product_v1Api",
                              "uiCode": "function handler(params) {\n\tlet tenantId = params.data?.headers['x-fastn-space-tenantid'];\n\tlet connectionId = params.data?.var.connectionId;\n\n\n\tconst sku = params.data.steps.LoopOverMissingProducts.loopOverItem;\n    return {\n\t\"headers\": {\n\t\t\t\"customAuth\": true,\n\t\t\t\"x-fastn-space-tenantid\": tenantId,\n\t\t\t\"x-fastn-space-connection-id\": connectionId\n\t},\n\t\"body\": {\n\t\t\"input\": {\n\t\t\t\"SKU\": sku\n\t\t}\n\t}\n}\n  }\n    ",
                              "hasResponse": false,
                              "isError": false,
                              "statusCode": 200,
                              "outputSchema": null,
                              "queryExecutor": null
                            },
                            "function": null,
                            "composite": null,
                            "loop": null,
                            "internalDatabase": null,
                            "aiAction": null,
                            "mcpClient": null,
                            "logger": null,
                            "downLoadFile": null,
                            "endLoop": null,
                            "trigger": null,
                            "converter": null,
                            "variables": null,
                            "state": null,
                            "conditional": null,
                            "lambdaFunction": null,
                            "outputSchema": null,
                            "next": "sync_cin7_trackstar_product_v1Api",
                            "prevStep": null,
                            "enableDebug": false,
                            "description": null,
                            "debugBreakAfter": null,
                            "configuredStepSetting": null,
                            "filter": null,
                            "limit": null,
                            "splitOut": null,
                            "aggregate": null,
                            "merge": null,
                            "aiAgent": null,
                            "settings": null,
                            "ftp": null,
                            "summarizationChain": null,
                            "textClassifier": null,
                            "warnings": null,
                            "tenantSettings": null
                          },
                          {
                            "type": "API",
                            "id": "sync_cin7_trackstar_product_v1Api",
                            "actionId": null,
                            "inline": null,
                            "function": {
                              "id": "sync_cin7_trackstar_product_v1",
                              "groupId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
                              "connectorId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
                              "name": "sync_cin7_trackstar_product_v1",
                              "version": "1.0.1",
                              "imageUrl": "https://fastnai.s3.amazonaws.com/assets/fastn_logo.png",
                              "configuration": {
                                "enableCache": false,
                                "cacheTtlInSeconds": 0,
                                "required": true,
                                "validate": false,
                                "enableRetry": false,
                                "enableAuth": false,
                                "authType": "NO_AUTH",
                                "auth": {
                                  "identifier": null,
                                  "authKey": null,
                                  "enableMultiConnection": false,
                                  "isWorkspaceIdentifier": true,
                                  "defaultConnectionId": null
                                },
                                "retry": {
                                  "maxRetries": 1,
                                  "maxDelayMilliseconds": 1000,
                                  "enableConnectionErrors": false,
                                  "retryList": [
                                    {
                                      "delayMilliseconds": 50,
                                      "statusCode": 500,
                                      "body": null
                                    }
                                  ]
                                },
                                "requestSetting": null
                              },
                              "next": null,
                              "queryExecutor": null
                            },
                            "composite": null,
                            "loop": null,
                            "internalDatabase": null,
                            "aiAction": null,
                            "mcpClient": null,
                            "logger": null,
                            "downLoadFile": null,
                            "endLoop": null,
                            "trigger": null,
                            "converter": null,
                            "variables": null,
                            "state": null,
                            "conditional": null,
                            "lambdaFunction": null,
                            "outputSchema": null,
                            "next": null,
                            "prevStep": null,
                            "enableDebug": false,
                            "description": null,
                            "debugBreakAfter": null,
                            "configuredStepSetting": null,
                            "filter": null,
                            "limit": null,
                            "splitOut": null,
                            "aggregate": null,
                            "merge": null,
                            "aiAgent": null,
                            "settings": null,
                            "ftp": null,
                            "summarizationChain": null,
                            "textClassifier": null,
                            "warnings": null,
                            "tenantSettings": null
                          }
                        ],
                        "next": null,
                        "start": null,
                        "queryExecutor": null
                      },
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": "{\"description\":\"\",\"additionalProperties\":false,\"type\":\"object\",\"title\":\"\",\"properties\":{\"data\":{\"description\":\"\",\"additionalProperties\":false,\"type\":\"object\",\"title\":\"\",\"properties\":{\"sync_cin7_trackstar_product\":{\"properties\":{},\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\",\"required\":[]}}}}}",
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": 1,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": {
                        "failureBehavior": "FAILURE",
                        "skipStatus": null,
                        "errorMessage": null,
                        "stepNote": null
                      },
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "itemSchema": "{\n\t\"type\": \"object\"\n}",
                  "isParallel": false,
                  "loopSize": "0",
                  "loopStart": "0",
                  "filePath": null,
                  "batchSize": null,
                  "queryExecutor": null
                },
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "GetAllRecentlyAddedProducts",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "UpdateSuccess",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "UpdateSuccess",
                  "next": "Variable8282",
                  "expressions": [
                    {
                      "name": "If status200",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.var.statusCode}}",
                      "value": "200",
                      "operation": "EQ",
                      "next": "Variable8763"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "statusCode"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "statusCode"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Variable8282",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable8282",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "SaveResultToReferenceTable",
                  "variables": [],
                  "code": "\n{\n  \"syncStatus\": \"Failed\",\n  \"message\": {% if data.var.errorMessage  is defined %}{{data.var.errorMessage | tojson}}{% else %}null{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"syncStatus\":{\"actionType\":\"map\",\"target\":\"Failed\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"message\":{\"actionType\":\"map\",\"target\":\"{{data.var.errorMessage}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "errorMessage"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "errorMessage"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "SaveResultToReferenceTable",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable8617",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "ifCreateProductsupported",
                  "variables": [],
                  "code": "\n{\n  \"trackstarProducts\": {% if data.steps.GetAllProducts.output.data %}{{data.steps.GetAllProducts.output.data| shape}}{% else %}null{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"trackstarProducts\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetAllProducts.output.data}}\",\"targetType\":\"array\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"byUser\":false}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "GetAllProducts"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "GetAllProducts"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "ifCreateProductsupported",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "DetermineIfAllProductsExist",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "DetermineIfAllProductsExist",
                  "next": "LoopOverMissingProducts",
                  "expressions": [
                    {
                      "name": "If there's no missing product",
                      "logic": "OR",
                      "conditions": null,
                      "variable": "{{data.steps.identifyUnfoundSkus.output.unFoundCount}}",
                      "value": "0",
                      "operation": "EQ",
                      "next": "Switch6"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "identifyUnfoundSkus"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "unFoundCount"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "unFoundCount"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "identifyUnfoundSkus"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "LoopOverMissingProducts",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "GetAllRecentlyAddedProducts",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "GetAllRecentlyAddedProductsMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n    params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n    const newlyAdded = params.data.steps.identifyUnfoundSkus.output.unfoundSkus;\n    const skuList = newlyAdded\n    .map(line => line.SKU)\n    .filter(sku => sku && sku.trim() !== \"\")\n    .join(\",\");\n    {{}}\n    \n    return {\n        \"param\": {\n            \"skuin\": skuList,            \n            \"limit\": 50\n        }\n    }\n}",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "GetAllRecentlyAddedProductsApi",
                        "uiCode": "function handler(params) {\n    params.data.headers['x-fastn-space-connection-id'] = params.data.var.connectionId;\n    const newlyAdded = params.data.steps.identifyUnfoundSkus.output.unfoundSkus;\n    const skuList = newlyAdded\n    .map(line => line.SKU)\n    .filter(sku => sku && sku.trim() !== \"\")\n    .join(\",\");\n    {{}}\n    \n    return {\n        \"param\": {\n            \"skuin\": skuList,            \n            \"limit\": 50\n        }\n    }\n}",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "GetAllRecentlyAddedProductsApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "GetAllRecentlyAddedProductsApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-all-products",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Get All Products",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": false,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Variable9547",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"gtin\":{\"type\":\"string\"},\"unit_price\":{\"type\":\"string\"},\"inventory_items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"inventory_item_id\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_quantity\":{\"type\":\"string\"}},\"required\":[]}},\"is_kit\":{\"type\":\"string\"},\"active\":{\"type\":\"string\"},\"supplier\":{\"type\":\"string\"},\"supplier_object\":{\"type\":\"object\",\"properties\":{},\"required\":[]},\"country_of_origin\":{\"type\":\"string\"},\"harmonized_code\":{\"type\":\"string\"},\"supplier_products\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"external_id\":{\"type\":\"string\"},\"supplier_id\":{\"type\":\"string\"},\"supplier_name\":{\"type\":\"string\"},\"unit_cost\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]}},\"next_token\":{\"type\":\"string\"},\"total_count\":{\"type\":\"string\"}},\"required\":[]}",
                "next": "Variable9547",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the GetAllProducts operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": "Get the product of the match sku from trackstar"
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable9547",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "ifInventoryItemIsNeeded",
                  "variables": [],
                  "code": "\n{\n  \"trackstarProducts\": {{data.var.trackstarProducts  | insertItems(data.steps.GetAllProducts.output.data | tojson) | tojson}}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"trackstarProducts\":{\"actionType\":\"map\",\"target\":\"insertList\",\"targetType\":\"array\",\"actions\":[{\"actionType\":\"insertList\",\"items\":\"{{data.steps.GetAllProducts.output.data}}\",\"target\":\"{{data.var.trackstarProducts}}\",\"variable\":\"trackstarProducts_insertList\"},{\"actionType\":\"actions_return\",\"targetType\":\"array\",\"target\":\"trackstarProducts_insertList\"}],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "GetAllProducts"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "data"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "data"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "GetAllProducts"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            },
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "trackstarProducts"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "trackstarProducts"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "ifInventoryItemIsNeeded",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "ifCreateProductsupported",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "ifCreateProductsupported",
                  "next": "Switch6",
                  "expressions": [
                    {
                      "name": "create product sypported",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.var.availableActions}}",
                      "value": "create_product",
                      "operation": "CONTAINS",
                      "next": "identifyUnfoundSkus"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "availableActions"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "availableActions"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch6",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "ifInventoryItemIsNeeded",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "ifInventoryItemIsNeeded",
                  "next": "Switch6",
                  "expressions": [
                    {
                      "name": "If requires inventory item details",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{steps.flattenSchemaForCreateOrder.includesInventoryDetails",
                      "value": "TRUE",
                      "operation": "EQ",
                      "next": null
                    }
                  ],
                  "queryExecutor": {
                    "children": [],
                    "returnLiteral": true,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch6",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "itemSchema": "{\n\t\"type\": \"object\"\n}",
            "isParallel": false,
            "loopSize": "0",
            "loopStart": "0",
            "filePath": null,
            "batchSize": "100",
            "queryExecutor": null
          },
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Success",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        }
      ]
    },
    "types": [],
    "tests": null,
    "hasActionType": true,
    "metaData": {
      "enableLogs": false,
      "isAsync": false,
      "hasSecret": true,
      "enableMultitenant": false,
      "enableValidation": false,
      "runAsWorkflowOnTimeout": false,
      "architecture": "REST",
      "isCustomAuthenticationEnabled": true,
      "requiredAccessRole": null,
      "isNotificationEnabled": false,
      "flowType": "API",
      "jobMemoryLimit": 4096,
      "jobTimeOut": null,
      "jobCpuLimit": "1",
      "isConfigured": null,
      "configurationFlows": null,
      "invocationMethod": "API_REQUEST",
      "priority": null,
      "triggerType": null,
      "schedule": null,
      "triggerApp": null
    },
    "comment": null,
    "labels": [
      "Cin7xTrackstar-Orders"
    ],
    "resourceType": "EXTERNAL",
    "deleted": null,
    "webhookId": "30NLv7gmxMQVWmdw5Ee9hEXkwxV",
    "webhook": null,
    "deployedBy": null,
    "createdby": "Precious Tamparong"
  }
]