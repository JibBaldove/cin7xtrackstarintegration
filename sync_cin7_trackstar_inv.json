[
  {
    "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
    "id": "sync_trackstar_cin7_inv",
    "newName": null,
    "name": "sync_trackstar_cin7_inv",
    "description": "Trackstar -> Cin7: Inventory Reconciliation [https://app.clickup.com/t/86dy9tg1a]",
    "actionType": "CREATE",
    "inputName": "input",
    "inputModelId": "6df3ee396d7a0367205e2649014cc373",
    "chatWelcomeMessage": null,
    "outputModelId": "json",
    "errorModelId": "",
    "headerModelId": "json",
    "apiPreview": {
      "graphql": null,
      "rest": {
        "schema": "{\"openapi\":\"3.0.3\",\"info\":{\"title\":\"Flow OpenAPI Specification\",\"description\":\"OpenAPI specification for the flow\",\"version\":\"1.0.11\"},\"servers\":[{\"url\":\"https://live.fastn.ai/api/v1\"}],\"paths\":{\"/sync_trackstar_cin7_inv\":{\"post\":{\"summary\":\"sync_trackstar_cin7_inv\",\"operationId\":\"POST-sync_trackstar_cin7_inv\",\"parameters\":[{\"in\":\"header\",\"name\":\"x-fastn-space-id\",\"description\":\"x-fastn-space-id Header\",\"schema\":{\"type\":\"string\",\"default\":\"d0f8c7f3-69d3-403c-90a0-17c8857e095f\"},\"required\":false},{\"in\":\"header\",\"name\":\"stage\",\"description\":\"stage Header\",\"schema\":{\"type\":\"string\",\"default\":\"DRAFT\"},\"required\":false},{\"in\":\"header\",\"name\":\"content-type\",\"description\":\"content-type Header\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"},\"required\":false},{\"in\":\"header\",\"name\":\"x-fastn-space-tenantid\",\"description\":\"x-fastn-space-tenantid Header\",\"schema\":{\"type\":\"string\",\"default\":\"\"},\"required\":false}],\"requestBody\":{\"required\":true,\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"input\":{\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\",\"properties\":{\"data\":{\"type\":\"object\",\"properties\":{\"sku\":{\"type\":\"string\"}}}}}},\"type\":\"object\"}}}},\"responses\":{\"200\":{\"description\":\"Success\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{},\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\"}}}}},\"security\":[{\"apiKey\":[]}]}}},\"components\":{\"securitySchemes\":{\"apiKey\":{\"name\":\"x-fastn-api-key\",\"in\":\"header\",\"type\":\"apiKey\"},\"bearerAuth\":{\"scheme\":\"bearer\",\"type\":\"http\"}}}}"
      }
    },
    "version": "1.1.3",
    "inputModel": {
      "createdAt": 1765437436.463561,
      "updatedAt": 1765437436.4634993,
      "id": "6df3ee396d7a0367205e2649014cc373",
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "name": "InventorySyncTrackstartoCin7",
      "type": null,
      "version": "1.0",
      "preview": null,
      "jsonSchema": {
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "sku": {
                "type": "string"
              }
            },
            "required": [
              "sku"
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "uiSchema": null,
      "isReadOnly": true,
      "imageUrl": null,
      "groupId": null,
      "resourceType": null,
      "deleted": false,
      "isCommunityCreated": false,
      "dataModel": {
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "sku": {
                "type": "string"
              }
            },
            "required": [
              "sku"
            ]
          }
        },
        "required": [
          "data"
        ]
      }
    },
    "outputModel": {
      "createdAt": 1764924800.5378478,
      "updatedAt": 1764924800.5378265,
      "id": "json",
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "name": "Json",
      "type": null,
      "version": "1.0",
      "preview": null,
      "jsonSchema": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      },
      "uiSchema": null,
      "isReadOnly": true,
      "imageUrl": null,
      "groupId": null,
      "resourceType": null,
      "deleted": false,
      "isCommunityCreated": false,
      "dataModel": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      }
    },
    "errorModel": null,
    "headerModel": {
      "createdAt": 1764924800.5378478,
      "updatedAt": 1764924800.5378265,
      "id": "json",
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "name": "Json",
      "type": null,
      "version": "1.0",
      "preview": null,
      "jsonSchema": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      },
      "uiSchema": null,
      "isReadOnly": true,
      "imageUrl": null,
      "groupId": null,
      "resourceType": null,
      "deleted": false,
      "isCommunityCreated": false,
      "dataModel": {
        "properties": {},
        "type": "object",
        "description": "Free form JSON",
        "title": "JSON",
        "required": []
      }
    },
    "status": "CONNECT",
    "createdAt": 1765437442.3763688,
    "updatedAt": 1765552026.6362607,
    "deployedAt": 1765266063.7695656,
    "resolver": {
      "id": "sync_trackstar_cin7_inv",
      "label": null,
      "clientId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
      "groupId": null,
      "type": null,
      "field": null,
      "dependencies": null,
      "start": "Variable2575",
      "nodeBased": false,
      "steps": [
        {
          "type": "VARIABLE",
          "id": "Variable2575",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "extractTenantIdFromParams",
            "variables": [],
            "code": "\n{\n  \"referenceTable\": {{( \"cin7_trackstar_reference:\" ~ data.headers['x-fastn-space-tenantid'] ~ \"\") | tojson}},\n  \"schemaTable\": \"tbl_trackstar_schema\",\n  \"tenantConfig\": {% if data.steps.GetTenantConfig.output[0].config.value  is defined %}{{data.steps.GetTenantConfig.output[0].config.value | tojson}}{% else %}\"\"{% endif %},\n  \"connectionId\": {% if data.headers['x-fastn-space-connection-id']  is defined %}{{data.headers['x-fastn-space-connection-id'] | tojson}}{% else %}\"\"{% endif %},\n  \"referenceKey\": {{( \"product:\" ~ data.input.data.id ~ \"\") | tojson}},\n  \"pageToken\": \"\",\n  \"inventoryAdjustmentList\": {% if $fastn_array_default %}{{$fastn_array_default| shape}}{% else %}[]{% endif %}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"referenceTable\":{\"actionType\":\"map\",\"target\":\"cin7_trackstar_reference:{{data.headers['x-fastn-space-tenantid']}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"schemaTable\":{\"actionType\":\"map\",\"target\":\"tbl_trackstar_schema\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":false},\"tenantConfig\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetTenantConfig.output[0].config.value}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":false},\"connectionId\":{\"actionType\":\"map\",\"target\":\"{{data.headers['x-fastn-space-connection-id']}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":false},\"referenceKey\":{\"actionType\":\"map\",\"target\":\"product:{{data.input.data.id}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"pageToken\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"inventoryAdjustmentList\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"array\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"byUser\":false}},\"targetType\":\"object\",\"actions\":[],\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "headers"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "x-fastn-space-connection-id"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "x-fastn-space-connection-id"
                                },
                                "version": 2
                              }
                            },
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "x-fastn-space-tenantid"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "x-fastn-space-tenantid"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "headers"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "input"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "data"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "id"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "id"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "data"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "input"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "GetTenantConfig"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.math.BigInteger",
                                            "value": "0"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "config"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "value"
                                                      },
                                                      "value": {
                                                        "children": [],
                                                        "returnLiteral": true,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "value"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "config"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.math.BigInteger",
                                              "value": "0"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "GetTenantConfig"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "extractTenantIdFromParams",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "CONDITIONAL",
          "id": "switchDoes_Not_Have_Input",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": {
            "id": "switchDoes_Not_Have_Input",
            "next": "get_trackstar_integration_v1",
            "expressions": [
              {
                "name": "Does Not Have Input",
                "logic": "AND",
                "conditions": null,
                "variable": "{{data.input}}",
                "value": null,
                "operation": "NOT_EXISTS",
                "next": "generateBadRequestResponse"
              }
            ],
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "input"
                        },
                        "value": {
                          "children": [],
                          "returnLiteral": true,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "input"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "get_trackstar_integration_v1",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "COMPOSITE",
          "id": "get_trackstar_integration_v1",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": {
            "steps": [
              {
                "type": "INLINE",
                "id": "get_trackstar_integration_v1Map",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n\tconst tenantId = params.data.headers['x-fastn-space-tenantid'];\n\tconst connectorId = params.data.input.connectorId || \"_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15\";\n\tconst connectionId = params.data.var.connectionId || 'default';\n\n    return {\n\t\t\"headers\": {\n\t\t\t\"x-fastn-space-tenantid\": tenantId,\n\t\t\t\"x-fastn-space-connection-id\": connectionId,\n\t\t\t\"customAuth\": true,\n\t\t},\n\t\t\"body\": {\n\t\t\t\"input\": {\n\t\t\t\tconnectorId,\n\t\t\t\tconnectionId,\n\t\t\t\torgId: \"workspace\"\n\t\t\t}\n\t\t}\n\t}\n  }\n    ",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "get_trackstar_integration_v1Api",
                  "uiCode": "function handler(params) {\n\tconst tenantId = params.data.headers['x-fastn-space-tenantid'];\n\tconst connectorId = params.data.input.connectorId || \"_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15\";\n\tconst connectionId = params.data.var.connectionId || 'default';\n\n    return {\n\t\t\"headers\": {\n\t\t\t\"x-fastn-space-tenantid\": tenantId,\n\t\t\t\"x-fastn-space-connection-id\": connectionId,\n\t\t\t\"customAuth\": true,\n\t\t},\n\t\t\"body\": {\n\t\t\t\"input\": {\n\t\t\t\tconnectorId,\n\t\t\t\tconnectionId,\n\t\t\t\torgId: \"workspace\"\n\t\t\t}\n\t\t}\n\t}\n  }\n    ",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "get_trackstar_integration_v1Api",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "API",
                "id": "get_trackstar_integration_v1Api",
                "actionId": null,
                "inline": null,
                "function": {
                  "id": "get_trackstar_integration_v1",
                  "groupId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
                  "connectorId": "d0f8c7f3-69d3-403c-90a0-17c8857e095f",
                  "name": "get_trackstar_integration_v1",
                  "version": "1.0.1",
                  "imageUrl": "https://fastnai.s3.amazonaws.com/assets/fastn_logo.png",
                  "configuration": {
                    "enableCache": false,
                    "cacheTtlInSeconds": 0,
                    "required": true,
                    "validate": false,
                    "enableRetry": false,
                    "enableAuth": false,
                    "authType": "APIKEY",
                    "auth": {
                      "identifier": null,
                      "authKey": null,
                      "enableMultiConnection": false,
                      "isWorkspaceIdentifier": true,
                      "defaultConnectionId": null
                    },
                    "retry": {
                      "maxRetries": 1,
                      "maxDelayMilliseconds": 1000,
                      "enableConnectionErrors": false,
                      "retryList": [
                        {
                          "delayMilliseconds": 50,
                          "statusCode": 500,
                          "body": null
                        }
                      ]
                    },
                    "requestSetting": null
                  },
                  "next": null,
                  "queryExecutor": null
                },
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "next": "Variable1022",
            "start": null,
            "queryExecutor": null
          },
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": "{\"description\":\"\",\"additionalProperties\":false,\"type\":\"object\",\"title\":\"\",\"properties\":{\"data\":{\"description\":\"\",\"additionalProperties\":false,\"type\":\"object\",\"title\":\"\",\"properties\":{\"get_trackstar_integration\":{\"properties\":{},\"type\":\"object\",\"description\":\"Free form JSON\",\"title\":\"JSON\",\"required\":[]}}}}}",
          "next": "Variable1022",
          "prevStep": null,
          "enableDebug": false,
          "description": "This tool is designed to execute the get_trackstar_integration_v1 operation on the My connectors platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable1022",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "parseLocationMappingConfig",
            "variables": [],
            "code": "\n{\n  \"integrationName\": {% if data.steps.get_trackstar_integration_v1.output.integrationName  is defined %}{{data.steps.get_trackstar_integration_v1.output.integrationName | tojson}}{% else %}\"\"{% endif %},\n  \"availableActions\": {% if data.steps.get_trackstar_integration_v1.output.availableActions  is defined %}{{data.steps.get_trackstar_integration_v1.output.availableActions | tojson}}{% else %}\"\"{% endif %},\n  \"referenceKey\": {{( \"inventory:\" ~ data.input.data.sku ~ \"\") | tojson}}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"integrationName\":{\"actionType\":\"map\",\"target\":\"{{data.steps.get_trackstar_integration_v1.output.integrationName}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":false},\"availableActions\":{\"actionType\":\"map\",\"target\":\"{{data.steps.get_trackstar_integration_v1.output.availableActions}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":false},\"referenceKey\":{\"actionType\":\"map\",\"target\":\"inventory:{{data.input.data.sku}}\",\"targetType\":\"string\",\"actions\":[],\"default\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "input"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "data"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "sku"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "sku"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "data"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "input"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "get_trackstar_integration_v1"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "availableActions"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "availableActions"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "integrationName"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "integrationName"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "get_trackstar_integration_v1"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "parseLocationMappingConfig",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "COMPOSITE",
          "id": "createStockAdjustment",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": {
            "steps": [
              {
                "type": "INLINE",
                "id": "createStockAdjustmentMap",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n\tconst { shouldAutoApprove } = params.data.steps.evaluateStockAutoAcceptance.output;\n\tconst { trackstarInventory, accumulatedStocks } = params.data.var;\n\tconst location = params.data.steps.getLocations.output.LocationList.at(0);\n\tconst today = new Date().toISOString();\n\n\tconst payload = {\n\t\t\"EffectiveDate\": today,\n\t\t// \"StocktakeNumber\": \"\",\n\t\t\"Status\": shouldAutoApprove ? \"COMPLETED\" : \"DRAFT\",\n\t\t// \"Account\": \"403\",\n\t\t// \"Reference\": data.connection_id,\n\t\t\"Lines\": [\n\t\t\t{\n\t\t\t// \"ProductID\": data.id,\n\t\t\t\"SKU\": trackstarInventory.sku,\n\t\t\t\"ProductName\": trackstarInventory.name,\n\t\t\t\"Quantity\": accumulatedStocks.onhand || 1,\n\t\t\t\"UnitCost\": trackstarInventory.unit_cost || 1,\n\t\t\t\"LocationID\": location.ID,\n\t\t\t\"Location\": location.Name,\n\t\t\t// \"ReceivedDate\": data.timestamp,\n\t\t\t// \"Comments\": data.notes,\n\t\t\t\"ProductLength\": trackstarInventory.measurements.length || 1,\n\t\t\t\"ProductWidth\": trackstarInventory.measurements.width || 1,\n\t\t\t\"ProductHeight\": trackstarInventory.measurements.height || 1,\n\t\t\t\"ProductWeight\": trackstarInventory.measurements.weight || 1\n\t\t\t}\n\t\t]\n\t};\n\n    return {\n\t\t\"body\": payload\n\t}\n}\n    ",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "createStockAdjustmentApi",
                  "uiCode": "function handler(params) {\n\tconst { shouldAutoApprove } = params.data.steps.evaluateStockAutoAcceptance.output;\n\tconst { trackstarInventory, accumulatedStocks } = params.data.var;\n\tconst location = params.data.steps.getLocations.output.LocationList.at(0);\n\tconst today = new Date().toISOString();\n\n\tconst payload = {\n\t\t\"EffectiveDate\": today,\n\t\t// \"StocktakeNumber\": \"\",\n\t\t\"Status\": shouldAutoApprove ? \"COMPLETED\" : \"DRAFT\",\n\t\t// \"Account\": \"403\",\n\t\t// \"Reference\": data.connection_id,\n\t\t\"Lines\": [\n\t\t\t{\n\t\t\t// \"ProductID\": data.id,\n\t\t\t\"SKU\": trackstarInventory.sku,\n\t\t\t\"ProductName\": trackstarInventory.name,\n\t\t\t\"Quantity\": accumulatedStocks.onhand || 1,\n\t\t\t\"UnitCost\": trackstarInventory.unit_cost || 1,\n\t\t\t\"LocationID\": location.ID,\n\t\t\t\"Location\": location.Name,\n\t\t\t// \"ReceivedDate\": data.timestamp,\n\t\t\t// \"Comments\": data.notes,\n\t\t\t\"ProductLength\": trackstarInventory.measurements.length || 1,\n\t\t\t\"ProductWidth\": trackstarInventory.measurements.width || 1,\n\t\t\t\"ProductHeight\": trackstarInventory.measurements.height || 1,\n\t\t\t\"ProductWeight\": trackstarInventory.measurements.weight || 1\n\t\t\t}\n\t\t]\n\t};\n\n    return {\n\t\t\"body\": payload\n\t}\n}\n    ",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "createStockAdjustmentApi",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "API",
                "id": "createStockAdjustmentApi",
                "actionId": null,
                "inline": null,
                "function": {
                  "id": "_knexa_34TgY17iG8orxuoEcwHi8NyEgVz",
                  "groupId": "_knexa_ae6a88b6-0c2a-4f9d-b3f8-f641a782ab6a",
                  "connectorId": "community",
                  "name": "createStockAdjustment",
                  "version": "1.0.2",
                  "imageUrl": null,
                  "configuration": {
                    "enableCache": false,
                    "cacheTtlInSeconds": 0,
                    "required": false,
                    "validate": false,
                    "enableRetry": false,
                    "enableAuth": true,
                    "authType": "NO_AUTH",
                    "auth": {
                      "identifier": "$fastn_tenant_header",
                      "authKey": null,
                      "enableMultiConnection": false,
                      "isWorkspaceIdentifier": false,
                      "defaultConnectionId": null
                    },
                    "retry": {
                      "maxRetries": 1,
                      "maxDelayMilliseconds": 1000,
                      "enableConnectionErrors": false,
                      "retryList": [
                        {
                          "delayMilliseconds": 50,
                          "statusCode": 500,
                          "body": null
                        }
                      ]
                    },
                    "requestSetting": null
                  },
                  "next": null,
                  "queryExecutor": null
                },
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "next": "Switch5",
            "start": null,
            "queryExecutor": null
          },
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": "{\"type\":\"array\",\"items\":{\"type\":\"object\",\"description\":\"\",\"properties\":{\"ErrorCode\":{\"type\":\"integer\"},\"Exception\":{\"type\":\"string\"}},\"required\":[]}}",
          "next": "Switch5",
          "prevStep": null,
          "enableDebug": false,
          "description": "This tool is designed to execute the updateStockAdjustment operation on the Cin7 platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "generateBadRequestResponse",
          "actionId": null,
          "inline": {
            "code": "function handler(params) {\n  return {\n    statusCode: 400,\n    message: 'No input was provided.'\n  };\n}",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "generateEmptyResponseBasedOnUpStatusCode",
            "uiCode": "function handler(params) {\n  return {\n    statusCode: 400,\n    message: 'No input was provided.'\n  };\n}",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "generateEmptyResponseBasedOnUpStatusCode",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable6201",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "generateEmptyResponseBasedOnUpStatusCode",
            "variables": [],
            "code": "\n{\n  \"cin7Inventory\": {% if data.steps.createStockAdjustment.output[0]  is defined %}{{data.steps.createStockAdjustment.output[0] | tojson}}{% else %}\"\"{% endif %}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"cin7Inventory\":{\"actionType\":\"map\",\"target\":\"{{data.steps.createStockAdjustment.output[0]}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "createStockAdjustment"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.math.BigInteger",
                                            "value": "0"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.math.BigInteger",
                                              "value": "0"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "createStockAdjustment"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "generateEmptyResponseBasedOnUpStatusCode",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "CONDITIONAL",
          "id": "Switch5",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": {
            "id": "Switch5",
            "next": "Variable6201",
            "expressions": [
              {
                "name": "If 400 status code",
                "logic": "AND",
                "conditions": null,
                "variable": "{{data.steps.createStockAdjustment.output.datasourceDebug.statusCode}}",
                "value": "400",
                "operation": "EQ",
                "next": "processStockAdjustmentResponse"
              }
            ],
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "createStockAdjustment"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "datasourceDebug"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "statusCode"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "statusCode"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "datasourceDebug"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "createStockAdjustment"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Variable6201",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "processStockAdjustmentResponse",
          "actionId": null,
          "inline": {
            "code": "function handler(params) {\n  const result = (JSON.parse(params.data.steps.createStockAdjustment.output.message ?? '[]') ?? [])?.at(0);\n\n  if (result.ErrorCode === 400 && result.Exception.includes('no need to create Stock Adjustment.')) {\n    return {\n      statusCode: 200,\n      message: result.Exception\n    }\n  }\n\n  return {\n    statusCode: 200,\n    message: '--'\n  };\n}",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "generateEmptyResponseBasedOnUpStatusCode",
            "uiCode": "function handler(params) {\n  const result = (JSON.parse(params.data.steps.createStockAdjustment.output.message ?? '[]') ?? [])?.at(0);\n\n  if (result.ErrorCode === 400 && result.Exception.includes('no need to create Stock Adjustment.')) {\n    return {\n      statusCode: 200,\n      message: result.Exception\n    }\n  }\n\n  return {\n    statusCode: 200,\n    message: '--'\n  };\n}",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "generateEmptyResponseBasedOnUpStatusCode",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "extractTenantIdFromParams",
          "actionId": null,
          "inline": {
            "code": "function handler(params) {\n  if (params.data.input?.connection_id) {\n    return { tenantId: params.data.input.connection_id };\n  } else {\n    return { tenantId: params.data.headers['x-fastn-space-tenantid'] };\n  }\n}",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "SelectTableTblCin7TrackstarTenantConfig",
            "uiCode": "function handler(params) {\n  if (params.data.input?.connection_id) {\n    return { tenantId: params.data.input.connection_id };\n  } else {\n    return { tenantId: params.data.headers['x-fastn-space-tenantid'] };\n  }\n}",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "SelectTableTblCin7TrackstarTenantConfig",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INTERNAL_DB",
          "id": "SelectTableTblCin7TrackstarTenantConfig",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": {
            "next": "extractTenantConfig",
            "query": "SELECt config::TEXT as tenant_config FROM tbl_cin7_trackstar_tenant_config WHERE tenant_id = ?;",
            "code": "\n[\n{\n  \"type\" : \"string\",\n  \"value\" : {{data.steps.extractTenantIdFromParams.output.tenantId | tojson}}\n}\n\n]",
            "dbQueryParams": [
              {
                "type": "string",
                "value": "{{data.steps.extractTenantIdFromParams.output.tenantId}}"
              }
            ],
            "queryExecutor": {
              "children": [],
              "returnLiteral": true,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "extractTenantConfig",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "extractTenantConfig",
          "actionId": null,
          "inline": {
            "code": " function handler(params) {\n    const SYNC_ENTITY = 'inventory';\n\n    const { tenant_config: tenantConfigStr } = params.data.steps.SelectTableTblCin7TrackstarTenantConfig.output[0];\n    const connectionId = params.data.var.connectionId;\n\n    const tenantConfig = JSON.parse(tenantConfigStr);\n    const { syncConfig, locationMapping } = tenantConfig;\n\n    let isSyncActive = false;\n    let quantityType = 'sellable'; // default\n    let locationScope = 'mapped'; // default\n    let warehouses = [];\n\n    for (const entityConfig of syncConfig) {\n      if (entityConfig.entity === SYNC_ENTITY) {\n        isSyncActive = entityConfig.status === 'Active';\n        quantityType = entityConfig.quantityType || 'sellable';\n        locationScope = entityConfig.locationScope || 'mapped';\n        break;\n      }\n    }\n\n    // Find warehouses for the specific connectionId\n    for (const mapping of locationMapping) {\n      if (mapping.connectionId === connectionId) {\n        const warehousesData = mapping.warehouses || {};\n      warehouses = Array.isArray(warehousesData)\n        ? warehousesData\n        : Object.entries(warehousesData).map(([id, warehouseId]) => ({ id, warehouseId }));\n        break;\n      }\n    }\n\n    return {\n      isSyncActive,\n      quantityType,\n      locationScope,\n      warehouses\n    };\n  }\n",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "Switch6",
            "uiCode": " function handler(params) {\n    const SYNC_ENTITY = 'inventory';\n\n    const { tenant_config: tenantConfigStr } = params.data.steps.SelectTableTblCin7TrackstarTenantConfig.output[0];\n    const connectionId = params.data.var.connectionId;\n\n    const tenantConfig = JSON.parse(tenantConfigStr);\n    const { syncConfig, locationMapping } = tenantConfig;\n\n    let isSyncActive = false;\n    let quantityType = 'sellable'; // default\n    let locationScope = 'mapped'; // default\n    let warehouses = [];\n\n    for (const entityConfig of syncConfig) {\n      if (entityConfig.entity === SYNC_ENTITY) {\n        isSyncActive = entityConfig.status === 'Active';\n        quantityType = entityConfig.quantityType || 'sellable';\n        locationScope = entityConfig.locationScope || 'mapped';\n        break;\n      }\n    }\n\n    // Find warehouses for the specific connectionId\n    for (const mapping of locationMapping) {\n      if (mapping.connectionId === connectionId) {\n        const warehousesData = mapping.warehouses || {};\n      warehouses = Array.isArray(warehousesData)\n        ? warehousesData\n        : Object.entries(warehousesData).map(([id, warehouseId]) => ({ id, warehouseId }));\n        break;\n      }\n    }\n\n    return {\n      isSyncActive,\n      quantityType,\n      locationScope,\n      warehouses\n    };\n  }\n",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "Switch6",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "CONDITIONAL",
          "id": "Switch6",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": {
            "id": "Switch6",
            "next": "switchDoes_Not_Have_Input",
            "expressions": [
              {
                "name": "Sync Disabled",
                "logic": "AND",
                "conditions": null,
                "variable": "{{data.steps.extractTenantConfig.output.isSyncActive}}",
                "value": "false",
                "operation": "EQ",
                "next": "generateSyncDisabledResponse"
              }
            ],
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "extractTenantConfig"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "isSyncActive"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "isSyncActive"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "extractTenantConfig"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "switchDoes_Not_Have_Input",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "generateSyncDisabledResponse",
          "actionId": null,
          "inline": {
            "code": "function handler(params) {\n  return {\n    statusCode: 204,\n    message: 'Sync for inventory is disabled from the config.'\n  };\n}",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "generateEmptyResponseBasedOnUpStatusCode",
            "uiCode": "function handler(params) {\n  return {\n    statusCode: 204,\n    message: 'Sync for inventory is disabled from the config.'\n  };\n}",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "generateEmptyResponseBasedOnUpStatusCode",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "LAMBDA",
          "id": "parseLocationMappingConfig",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": {
            "code": "# To use value from the input write params['data']['steps']['getProductStep']['output']\nimport json\n\ndef fastn_function(params):\n    config = json.loads(params['data']['steps']['SelectTableTblCin7TrackstarTenantConfig']['output'][0]['tenant_config'])\n    location_mappings = config['locationMapping']\n    target_connection_id = params['data']['var'].get('connectionId')\n\n    if len(location_mappings) == 1:\n        result = {\n            'connectionId': location_mappings[0]['connectionId']\n        }\n    else:\n        result = {'connectionId': None}\n\n        # First, try to find matching connectionId from params\n        for location_mapping in location_mappings:\n            if location_mapping['connectionId'] == target_connection_id:\n                result = {\n                    'connectionId': location_mapping['connectionId'],\n                    'warehouse': list(location_mapping['warehouses'].keys())[0],\n                    'warehouseId': list(location_mapping['warehouses'].values())[0]\n                }\n                break\n\n        # If not found, fall back to default connectionId\n        if result['connectionId'] is None:\n            for location_mapping in location_mappings:\n                if location_mapping['connectionId'] == 'default':\n                    result = {\n                        'connectionId': location_mapping['connectionId'],\n                        'warehouse': list(location_mapping['warehouses'].keys())[0],\n                        'warehouseId': list(location_mapping['warehouses'].values())[0]\n                    }\n                    break\n\n    return result",
            "next": "Variable2249",
            "validation": {
              "validData": true,
              "reason": null,
              "valid": false,
              "queryExecutor": null
            },
            "language": "PYTHON",
            "version": 2,
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "SelectTableTblCin7TrackstarTenantConfig"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.math.BigInteger",
                                            "value": "0"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "tenant_config"
                                                },
                                                "value": {
                                                  "children": [
                                                    {
                                                      "key": {
                                                        "type": "java.lang.String",
                                                        "value": "locationMapping"
                                                      },
                                                      "value": {
                                                        "children": [
                                                          {
                                                            "key": {
                                                              "type": "null",
                                                              "value": null
                                                            },
                                                            "value": {
                                                              "children": [
                                                                {
                                                                  "key": {
                                                                    "type": "null",
                                                                    "value": null
                                                                  },
                                                                  "value": {
                                                                    "children": [
                                                                      {
                                                                        "key": {
                                                                          "type": "java.lang.String",
                                                                          "value": "connectionId"
                                                                        },
                                                                        "value": {
                                                                          "children": [
                                                                            {
                                                                              "key": {
                                                                                "type": "java.lang.String",
                                                                                "value": "connectionId"
                                                                              },
                                                                              "value": {
                                                                                "children": [],
                                                                                "returnLiteral": true,
                                                                                "symbolOrIndex": {
                                                                                  "type": "java.lang.String",
                                                                                  "value": "connectionId"
                                                                                },
                                                                                "version": 2
                                                                              }
                                                                            }
                                                                          ],
                                                                          "returnLiteral": false,
                                                                          "symbolOrIndex": {
                                                                            "type": "java.lang.String",
                                                                            "value": "connectionId"
                                                                          },
                                                                          "version": 2
                                                                        }
                                                                      }
                                                                    ],
                                                                    "returnLiteral": false,
                                                                    "symbolOrIndex": {
                                                                      "type": "null",
                                                                      "value": null
                                                                    },
                                                                    "version": 2
                                                                  }
                                                                }
                                                              ],
                                                              "returnLiteral": false,
                                                              "symbolOrIndex": {
                                                                "type": "null",
                                                                "value": null
                                                              },
                                                              "version": 2
                                                            }
                                                          }
                                                        ],
                                                        "returnLiteral": false,
                                                        "symbolOrIndex": {
                                                          "type": "java.lang.String",
                                                          "value": "locationMapping"
                                                        },
                                                        "version": 2
                                                      }
                                                    }
                                                  ],
                                                  "returnLiteral": false,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "tenant_config"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.math.BigInteger",
                                              "value": "0"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "SelectTableTblCin7TrackstarTenantConfig"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      },
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "var"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "connectionId"
                              },
                              "value": {
                                "children": [],
                                "returnLiteral": true,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "connectionId"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "var"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "outputSchema": null,
          "next": "Variable2249",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "VARIABLE",
          "id": "Variable2249",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": {
            "next": "generateParams",
            "variables": [],
            "code": "\n{\n  \"connectionId\": {% if data.steps.parseLocationMappingConfig.output.connectionId  is defined %}{{data.steps.parseLocationMappingConfig.output.connectionId | tojson}}{% else %}\"\"{% endif %}\n}",
            "uiCode": "{\"actionType\":\"map\",\"target\":{\"connectionId\":{\"actionType\":\"map\",\"target\":\"{{data.steps.parseLocationMappingConfig.output.connectionId}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
            "queryExecutor": {
              "children": [
                {
                  "key": {
                    "type": "java.lang.String",
                    "value": "data"
                  },
                  "value": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "steps"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "parseLocationMappingConfig"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "output"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "connectionId"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "connectionId"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "output"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "parseLocationMappingConfig"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "steps"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "java.lang.String",
                      "value": "data"
                    },
                    "version": 2
                  }
                }
              ],
              "returnLiteral": false,
              "symbolOrIndex": {
                "type": "null",
                "value": null
              },
              "version": 2
            }
          },
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "generateParams",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "LOOP",
          "id": "InventoryLoop",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": {
            "next": null,
            "start": "Variable2482",
            "loopOver": null,
            "type": "INFINITY",
            "steps": [
              {
                "type": "COMPOSITE",
                "id": "GetAllInventoryItems",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "GetAllInventoryItemsMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n\tconst connectionId =  params.data.var.connectionId;\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = connectionId;\n\n    return {\n\t\t\"param\": {\t\n\t\t\t\"sku\": params.data.var.sku\n\t\t}\n\t}\n}\n\n",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "GetAllInventoryItemsApi",
                        "uiCode": "function handler(params) {\n\tconst connectionId =  params.data.var.connectionId;\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = connectionId;\n\n    return {\n\t\t\"param\": {\t\n\t\t\t\"sku\": params.data.var.sku\n\t\t}\n\t}\n}\n\n",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "GetAllInventoryItemsApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "GetAllInventoryItemsApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-all-inventory-items",
                        "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                        "connectorId": "community",
                        "name": "Get All Inventory Items",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": true,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": true,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "accumulateStocks",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_cost\":{\"type\":\"string\"},\"active\":{\"type\":\"string\"},\"awaiting\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"substitute_skus\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"inventory_by_warehouse_id\":{\"type\":\"object\",\"properties\":{\"nisi_63e\":{\"type\":\"object\",\"properties\":{\"awaiting\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"}},\"required\":[]},\"occaecat_\":{\"type\":\"object\",\"properties\":{\"awaiting\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"}},\"required\":[]},\"ut_7a\":{\"type\":\"object\",\"properties\":{\"awaiting\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"}},\"required\":[]}},\"required\":[]},\"lots\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"expiration_date\":{\"type\":\"string\"},\"lot_id\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"measurements\":{\"type\":\"object\",\"properties\":{\"height\":{\"type\":\"string\"},\"length\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"},\"weight\":{\"type\":\"string\"},\"weight_unit\":{\"type\":\"string\"},\"width\":{\"type\":\"string\"}},\"required\":[]},\"locations\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"location_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]}},\"next_token\":{\"type\":\"string\"},\"total_count\":{\"type\":\"string\"}},\"required\":[]}",
                "next": "accumulateStocks",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the GetAllInventoryItems operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "accumulateStocks",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  const { warehouseId } = params.data.steps.parseLocationMappingConfig.output;\n  const inventoryItems = params.data.steps.GetAllInventoryItems.output.data;\n\n  const batchInventory = inventoryItems.reduce((prev, curr) => {\n    const warehousesInventory = curr.inventory_by_warehouse_id;\n    const warehouseInventory = warehousesInventory[warehouseId];\n\n    if (!warehouseInventory) return prev;\n\n    return {\n      awaiting: prev.awaiting + warehouseInventory.awaiting,\n      onhand: prev.onhand + warehouseInventory.onhand,\n      unfulfillable: prev.unfulfillable + warehouseInventory.unfulfillable,\n      fulfillable: prev.fulfillable + warehouseInventory.fulfillable,\n      unsellable: prev.unsellable + warehouseInventory.unsellable,\n      sellable: prev.sellable + warehouseInventory.sellable\n    }\n  }, {\n    awaiting: 0,\n    onhand: 0,\n    unfulfillable: 0,\n    fulfillable: 0,\n    unsellable: 0,\n    sellable: 0\n  });\n\n  // return { ...batchInventory, variables: params.data.var };\n\n  params.data.var.trackstarInventory = inventoryItems[0];\n\n  params.data.var.accumulatedStocks.awaiting = (params.data.var.accumulatedStocks.awaiting ?? 0) + (batchInventory.awaiting ?? 0);\n  params.data.var.accumulatedStocks.onhand = (params.data.var.accumulatedStocks.onhand ?? 0) + (batchInventory.onhand ?? 0);\n  params.data.var.accumulatedStocks.unfulfillable = (params.data.var.accumulatedStocks.unfulfillable ?? 0) + (batchInventory.unfulfillable ?? 0);\n  params.data.var.accumulatedStocks.fulfillable = (params.data.var.accumulatedStocks.fulfillable ?? 0) + (batchInventory.fulfillable ?? 0);\n  params.data.var.accumulatedStocks.unsellable = (params.data.var.accumulatedStocks.unsellable ?? 0) + (batchInventory.unsellable ?? 0);\n  params.data.var.accumulatedStocks.sellable = (params.data.var.accumulatedStocks.sellable ?? 0) + (batchInventory.sellable ?? 0);\n\n  return {\n    // variables: params.data.var\n  };\n}",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "Variable8721",
                  "uiCode": "function handler(params) {\n  const { warehouseId } = params.data.steps.parseLocationMappingConfig.output;\n  const inventoryItems = params.data.steps.GetAllInventoryItems.output.data;\n\n  const batchInventory = inventoryItems.reduce((prev, curr) => {\n    const warehousesInventory = curr.inventory_by_warehouse_id;\n    const warehouseInventory = warehousesInventory[warehouseId];\n\n    if (!warehouseInventory) return prev;\n\n    return {\n      awaiting: prev.awaiting + warehouseInventory.awaiting,\n      onhand: prev.onhand + warehouseInventory.onhand,\n      unfulfillable: prev.unfulfillable + warehouseInventory.unfulfillable,\n      fulfillable: prev.fulfillable + warehouseInventory.fulfillable,\n      unsellable: prev.unsellable + warehouseInventory.unsellable,\n      sellable: prev.sellable + warehouseInventory.sellable\n    }\n  }, {\n    awaiting: 0,\n    onhand: 0,\n    unfulfillable: 0,\n    fulfillable: 0,\n    unsellable: 0,\n    sellable: 0\n  });\n\n  // return { ...batchInventory, variables: params.data.var };\n\n  params.data.var.trackstarInventory = inventoryItems[0];\n\n  params.data.var.accumulatedStocks.awaiting = (params.data.var.accumulatedStocks.awaiting ?? 0) + (batchInventory.awaiting ?? 0);\n  params.data.var.accumulatedStocks.onhand = (params.data.var.accumulatedStocks.onhand ?? 0) + (batchInventory.onhand ?? 0);\n  params.data.var.accumulatedStocks.unfulfillable = (params.data.var.accumulatedStocks.unfulfillable ?? 0) + (batchInventory.unfulfillable ?? 0);\n  params.data.var.accumulatedStocks.fulfillable = (params.data.var.accumulatedStocks.fulfillable ?? 0) + (batchInventory.fulfillable ?? 0);\n  params.data.var.accumulatedStocks.unsellable = (params.data.var.accumulatedStocks.unsellable ?? 0) + (batchInventory.unsellable ?? 0);\n  params.data.var.accumulatedStocks.sellable = (params.data.var.accumulatedStocks.sellable ?? 0) + (batchInventory.sellable ?? 0);\n\n  return {\n    // variables: params.data.var\n  };\n}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Variable8721",
                "prevStep": null,
                "enableDebug": true,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch7",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch7",
                  "next": "Variable4706",
                  "expressions": [
                    {
                      "name": "has no next page",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.steps.GetAllInventoryItems.output.next_token}}",
                      "value": null,
                      "operation": "NOT_EXISTS",
                      "next": "EndInventoryLoop"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "FetchtAllInventoryItems"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "next_token"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "next_token"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "FetchtAllInventoryItems"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Variable4706",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "ENDLOOP",
                "id": "EndInventoryLoop",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": {
                  "next": null,
                  "queryExecutor": null
                },
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable4706",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": null,
                  "variables": [],
                  "code": "\n{\n  \"pageToken\": {% if data.steps.GetAllInventoryItems.output.next_token  is defined %}{{data.steps.GetAllInventoryItems.output.next_token | tojson}}{% else %}\"\"{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"pageToken\":{\"actionType\":\"map\",\"target\":\"{{data.steps.GetAllInventoryItems.output.next_token}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "FetchtAllInventoryItems"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "next_token"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "next_token"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "FetchtAllInventoryItems"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable8721",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "Switch7",
                  "variables": [],
                  "code": "\n{\n  \"accumulatedStocks\": {\n  \"awaiting\": {% set math_expression_490=data.var.accumulatedStocks.awaiting | int +  data.steps.accumulateStocks.output.awaiting| int %}{% if math_expression_490 is defined %}{{math_expression_490|int}}{% else %}null{% endif %},\n  \"onhand\": {% set onhand_math_expression=data.var.accumulatedStocks.onhand | int +  data.steps.accumulateStocks.output.onhand| int %}{% if onhand_math_expression is defined %}{{onhand_math_expression|int}}{% else %}null{% endif %},\n  \"unfulfillable\": {% set unfulfillable_math_expression=data.var.accumulatedStocks.unfulfillable | int +  data.steps.accumulateStocks.output.unfulfillable| int %}{% if unfulfillable_math_expression is defined %}{{unfulfillable_math_expression|int}}{% else %}null{% endif %},\n  \"fulfillable\": {% set fulfillable_math_expression=data.var.accumulatedStocks.fulfillable | int +  data.steps.accumulateStocks.output.fulfillable| int %}{% if fulfillable_math_expression is defined %}{{fulfillable_math_expression|int}}{% else %}null{% endif %},\n  \"unsellable\": {% set unsellable_math_expression=data.var.accumulatedStocks.unsellable | int +  data.steps.accumulateStocks.output.unsellable| int %}{% if unsellable_math_expression is defined %}{{unsellable_math_expression|int}}{% else %}null{% endif %},\n  \"sellable\": {% set sellable_math_expression=data.var.accumulatedStocks.sellable | int +  data.steps.accumulateStocks.output.sellable| int %}{% if sellable_math_expression is defined %}{{sellable_math_expression|int}}{% else %}null{% endif %}\n}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"accumulatedStocks\":{\"actionType\":\"map\",\"target\":{\"awaiting\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"mathematical_expression\",\"castType\":\"int\",\"calculation\":\"{{data.var.accumulatedStocks.awaiting}} + {{data.steps.accumulateStocks.output.awaiting}}\",\"variable\":\"math_expression_490\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"math_expression_490\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"onhand\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"mathematical_expression\",\"castType\":\"int\",\"calculation\":\"{{data.var.accumulatedStocks.onhand}} + {{data.steps.accumulateStocks.output.onhand}}\",\"variable\":\"onhand_math_expression\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"onhand_math_expression\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"unfulfillable\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"mathematical_expression\",\"castType\":\"int\",\"calculation\":\"{{data.var.accumulatedStocks.unfulfillable}} + {{data.steps.accumulateStocks.output.unfulfillable}}\",\"variable\":\"unfulfillable_math_expression\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"unfulfillable_math_expression\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"fulfillable\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"mathematical_expression\",\"castType\":\"int\",\"calculation\":\"{{data.var.accumulatedStocks.fulfillable}} + {{data.steps.accumulateStocks.output.fulfillable}}\",\"variable\":\"fulfillable_math_expression\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"fulfillable_math_expression\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"unsellable\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"mathematical_expression\",\"castType\":\"int\",\"calculation\":\"{{data.var.accumulatedStocks.unsellable}} + {{data.steps.accumulateStocks.output.unsellable}}\",\"variable\":\"unsellable_math_expression\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"unsellable_math_expression\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true},\"sellable\":{\"actionType\":\"map\",\"target\":\"\",\"targetType\":\"integer\",\"actions\":[{\"actionType\":\"mathematical_expression\",\"castType\":\"int\",\"calculation\":\"{{data.var.accumulatedStocks.sellable}} + {{data.steps.accumulateStocks.output.sellable}}\",\"variable\":\"sellable_math_expression\"},{\"actionType\":\"actions_return\",\"targetType\":\"integer\",\"target\":\"sellable_math_expression\"}],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "accumulateStocks"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "unsellable"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "unsellable"
                                                  },
                                                  "version": 2
                                                }
                                              },
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "sellable"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "sellable"
                                                  },
                                                  "version": 2
                                                }
                                              },
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "fulfillable"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "fulfillable"
                                                  },
                                                  "version": 2
                                                }
                                              },
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "onhand"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "onhand"
                                                  },
                                                  "version": 2
                                                }
                                              },
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "awaiting"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "awaiting"
                                                  },
                                                  "version": 2
                                                }
                                              },
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "unfulfillable"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "unfulfillable"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "accumulateStocks"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            },
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "accumulatedStocks"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "unsellable"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "unsellable"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "sellable"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "sellable"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "fulfillable"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "fulfillable"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "onhand"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "onhand"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "awaiting"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "awaiting"
                                            },
                                            "version": 2
                                          }
                                        },
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "unfulfillable"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "unfulfillable"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "accumulatedStocks"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch7",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": "SKIP",
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable2482",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "GetAllInventoryItems",
                  "variables": [],
                  "code": "\n{\n  \"sku\": {% if data.input.data.sku  is defined %}{{data.input.data.sku | tojson}}{% else %}\"\"{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"sku\":{\"actionType\":\"map\",\"target\":\"{{data.input.data.sku}}\",\"targetType\":\"string\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "input"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "data"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "sku"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "sku"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "data"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "input"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "GetAllInventoryItems",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "itemSchema": null,
            "isParallel": false,
            "loopSize": "0",
            "loopStart": "0",
            "filePath": null,
            "batchSize": "100",
            "queryExecutor": null
          },
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": null,
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "COMPOSITE",
          "id": "GetInventoryItemBySKU",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": {
            "steps": [
              {
                "type": "INLINE",
                "id": "GetInventoryItemBySKUMap",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = 'cin7xcin7';\n\t\n\n    return {\n\t\t\"param\": params.data.steps.generateParams.output.getTrackstarInventoryPayload\n\t}\n}\n",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "GetInventoryItemBySKUApi",
                  "uiCode": "function handler(params) {\n\t//change connection\n\tparams.data.headers['x-fastn-space-connection-id'] = 'cin7xcin7';\n\t\n\n    return {\n\t\t\"param\": params.data.steps.generateParams.output.getTrackstarInventoryPayload\n\t}\n}\n",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "GetInventoryItemBySKUApi",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "API",
                "id": "GetInventoryItemBySKUApi",
                "actionId": null,
                "inline": null,
                "function": {
                  "id": "_knexa_bf7e9b2c-4014-45ea-a6ee-64ceaab74f8cget-all-inventory-items",
                  "groupId": "_knexa_b218d705-5d3a-47e1-a18f-3a1a3432bd15",
                  "connectorId": "community",
                  "name": "Get All Inventory Items",
                  "version": "1.0.2",
                  "imageUrl": null,
                  "configuration": {
                    "enableCache": false,
                    "cacheTtlInSeconds": 0,
                    "required": true,
                    "validate": false,
                    "enableRetry": false,
                    "enableAuth": true,
                    "authType": "NO_AUTH",
                    "auth": {
                      "identifier": "$fastn_tenant_header",
                      "authKey": null,
                      "enableMultiConnection": true,
                      "isWorkspaceIdentifier": false,
                      "defaultConnectionId": null
                    },
                    "retry": {
                      "maxRetries": 1,
                      "maxDelayMilliseconds": 1000,
                      "enableConnectionErrors": false,
                      "retryList": [
                        {
                          "delayMilliseconds": 50,
                          "statusCode": 500,
                          "body": null
                        }
                      ]
                    },
                    "requestSetting": null
                  },
                  "next": null,
                  "queryExecutor": null
                },
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": null,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": null,
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "next": "mapInventoryAdjustment",
            "start": null,
            "queryExecutor": null
          },
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"warehouse_customer_id\":{\"type\":\"string\"},\"created_date\":{\"type\":\"string\"},\"updated_date\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"},\"unit_cost\":{\"type\":\"string\"},\"active\":{\"type\":\"string\"},\"awaiting\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"substitute_skus\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"inventory_by_warehouse_id\":{\"type\":\"object\",\"properties\":{\"nisi_63e\":{\"type\":\"object\",\"properties\":{\"awaiting\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"}},\"required\":[]},\"occaecat_\":{\"type\":\"object\",\"properties\":{\"awaiting\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"}},\"required\":[]},\"ut_7a\":{\"type\":\"object\",\"properties\":{\"awaiting\":{\"type\":\"string\"},\"committed\":{\"type\":\"string\"},\"fulfillable\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"sellable\":{\"type\":\"string\"},\"unfulfillable\":{\"type\":\"string\"},\"unsellable\":{\"type\":\"string\"}},\"required\":[]}},\"required\":[]},\"lots\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"expiration_date\":{\"type\":\"string\"},\"lot_id\":{\"type\":\"string\"},\"onhand\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"measurements\":{\"type\":\"object\",\"properties\":{\"height\":{\"type\":\"string\"},\"length\":{\"type\":\"string\"},\"unit\":{\"type\":\"string\"},\"weight\":{\"type\":\"string\"},\"weight_unit\":{\"type\":\"string\"},\"width\":{\"type\":\"string\"}},\"required\":[]},\"locations\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"location_id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"string\"},\"warehouse_id\":{\"type\":\"string\"}},\"required\":[]}},\"external_system_url\":{\"type\":\"string\"}},\"required\":[]}},\"next_token\":{\"type\":\"string\"},\"total_count\":{\"type\":\"string\"}},\"required\":[]}",
          "next": "mapInventoryAdjustment",
          "prevStep": null,
          "enableDebug": false,
          "description": "This tool is designed to execute the GetInboundShipment operation on the Trackstar platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "generateParams",
          "actionId": null,
          "inline": {
            "code": "function handler(params) {\n \n  return {\n    \"getTrackstarInventoryPayload\": {\t\n\t\t\t\"skueq\": params.data.input.data.sku\n\t\t}\n  }\n}",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "GetInventoryItemBySKU",
            "uiCode": "function handler(params) {\n \n  return {\n    \"getTrackstarInventoryPayload\": {\t\n\t\t\t\"skueq\": params.data.input.data.sku\n\t\t}\n  }\n}",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "GetInventoryItemBySKU",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "INLINE",
          "id": "mapInventoryAdjustment",
          "actionId": null,
          "inline": {
            "code": "function handler(params) {\n  const tenantConfig = params.data.steps.extractTenantConfig.output;\n  const trackstarInventoryData = params.data.steps.GetInventoryItemBySKU.output;\n\n  // Validate inventory data exists\n  if (!trackstarInventoryData.data || trackstarInventoryData.data.length === 0) {\n    return { error: 'No inventory data found' };\n  }\n\n  const trackstarInventory = trackstarInventoryData.data[0];\n  const { quantityType, locationScope, warehouses } = tenantConfig;\n\n  const results = [];\n\n  for (const warehouse of warehouses) {\n    let quantity;\n\n    if (locationScope === 'all') {\n      // Use top-level quantity (aggregated across all warehouses)\n      // Note: \"all\" scope is only valid when there's 1 warehouse mapped\n      quantity = trackstarInventory[quantityType] || 0;\n    } else {\n      // Use warehouse-specific quantity from inventory_by_warehouse_id\n      const warehouseInventory = trackstarInventory.inventory_by_warehouse_id?.[warehouse.warehouseId];\n      quantity = warehouseInventory ? (warehouseInventory[quantityType] || 0) : 0;\n    }\n\n    const result = {\n      locationName: warehouse.id, // e.g., \"Retail Store\"\n      warehouseId: warehouse.warehouseId, // e.g., \"da314a37-7053-4eaf-a9ab-65596a0045b5\"\n      Lines: [{\n        SKU: trackstarInventory.sku,\n        ProductName: trackstarInventory.name,\n        Quantity: quantity,\n        UnitCost: trackstarInventory.unit_cost || 1,\n        ProductLength: trackstarInventory.measurements?.length || 1,\n        ProductWidth: trackstarInventory.measurements?.width || 1,\n        ProductHeight: trackstarInventory.measurements?.height || 1,\n        ProductWeight: trackstarInventory.measurements?.weight || 1\n      }]\n    };\n\n    results.push(result);\n  }\n\n  // Always return array regardless of number of results\n  return results;\n}\n",
            "language": "JAVASCRIPT",
            "fields": [],
            "next": "loopOverInventoryAdjustments",
            "uiCode": "function handler(params) {\n  const tenantConfig = params.data.steps.extractTenantConfig.output;\n  const trackstarInventoryData = params.data.steps.GetInventoryItemBySKU.output;\n\n  // Validate inventory data exists\n  if (!trackstarInventoryData.data || trackstarInventoryData.data.length === 0) {\n    return { error: 'No inventory data found' };\n  }\n\n  const trackstarInventory = trackstarInventoryData.data[0];\n  const { quantityType, locationScope, warehouses } = tenantConfig;\n\n  const results = [];\n\n  for (const warehouse of warehouses) {\n    let quantity;\n\n    if (locationScope === 'all') {\n      // Use top-level quantity (aggregated across all warehouses)\n      // Note: \"all\" scope is only valid when there's 1 warehouse mapped\n      quantity = trackstarInventory[quantityType] || 0;\n    } else {\n      // Use warehouse-specific quantity from inventory_by_warehouse_id\n      const warehouseInventory = trackstarInventory.inventory_by_warehouse_id?.[warehouse.warehouseId];\n      quantity = warehouseInventory ? (warehouseInventory[quantityType] || 0) : 0;\n    }\n\n    const result = {\n      locationName: warehouse.id, // e.g., \"Retail Store\"\n      warehouseId: warehouse.warehouseId, // e.g., \"da314a37-7053-4eaf-a9ab-65596a0045b5\"\n      Lines: [{\n        SKU: trackstarInventory.sku,\n        ProductName: trackstarInventory.name,\n        Quantity: quantity,\n        UnitCost: trackstarInventory.unit_cost || 1,\n        ProductLength: trackstarInventory.measurements?.length || 1,\n        ProductWidth: trackstarInventory.measurements?.width || 1,\n        ProductHeight: trackstarInventory.measurements?.height || 1,\n        ProductWeight: trackstarInventory.measurements?.weight || 1\n      }]\n    };\n\n    results.push(result);\n  }\n\n  // Always return array regardless of number of results\n  return results;\n}\n",
            "hasResponse": false,
            "isError": false,
            "statusCode": 200,
            "outputSchema": null,
            "queryExecutor": null
          },
          "function": null,
          "composite": null,
          "loop": null,
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "loopOverInventoryAdjustments",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        },
        {
          "type": "LOOP",
          "id": "loopOverInventoryAdjustments",
          "actionId": null,
          "inline": null,
          "function": null,
          "composite": null,
          "loop": {
            "next": "Variable6374",
            "start": null,
            "loopOver": "{{data.steps.mapInventoryAdjustment.output}}",
            "type": "DATA",
            "steps": [
              {
                "type": "INLINE",
                "id": "generateEmptyResponseBasedOnUpStatusCode",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  const step = (\n    params.data.steps?.generateSkuNotFoundResponse?.output ??\n    params.data.steps?.generateResponseWithAutoAcceptanceMessage?.output ??\n    params.data.steps?.generateSyncDisabledResponse?.output ??\n    params.data.steps?.generateNotFoundResponse ??\n    params.data.steps?.processStockAdjustmentResponse?.output ??\n    params.data.steps?.createStockAdjustment ??\n    // params.data.steps?.emptyResponseHandler?.output ??\n    params.data.steps?.generateBadRequestResponse?.output\n  ) ?? { message: \"No available steps to check accurate response.\", statusCode: 500 };\n\n  const message = step?.message ?? null;\n  const statusCode = step.statusCode;\n\n  const syncResult = {\n    message,\n    syncStatus: ''\n  }\n\n  switch (statusCode) {\n    case 200:\n    case '200':\n      syncResult.message ??= 'Successfully Synced';\n      syncResult.syncStatus = 'Success';\n    break;\n\n    case 204:\n    case '204':\n      syncResult.message ??= 'No Action';\n      syncResult.syncStatus = 'Success';\n    break;\n\n    case 404:\n    case '404':\n      syncResult.message ??= 'Product not found';\n      syncResult.syncStatus = 'Failed';\n      break;\n\n    default:\n      syncResult.message ??= 'Unknown Sync Error';\n      syncResult.syncStatus = 'Failed';\n  }\n\n  return syncResult;\n}",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "InsertTableSet",
                  "uiCode": "function handler(params) {\n  const step = (\n    params.data.steps?.generateSkuNotFoundResponse?.output ??\n    params.data.steps?.generateResponseWithAutoAcceptanceMessage?.output ??\n    params.data.steps?.generateSyncDisabledResponse?.output ??\n    params.data.steps?.generateNotFoundResponse ??\n    params.data.steps?.processStockAdjustmentResponse?.output ??\n    params.data.steps?.createStockAdjustment ??\n    // params.data.steps?.emptyResponseHandler?.output ??\n    params.data.steps?.generateBadRequestResponse?.output\n  ) ?? { message: \"No available steps to check accurate response.\", statusCode: 500 };\n\n  const message = step?.message ?? null;\n  const statusCode = step.statusCode;\n\n  const syncResult = {\n    message,\n    syncStatus: ''\n  }\n\n  switch (statusCode) {\n    case 200:\n    case '200':\n      syncResult.message ??= 'Successfully Synced';\n      syncResult.syncStatus = 'Success';\n    break;\n\n    case 204:\n    case '204':\n      syncResult.message ??= 'No Action';\n      syncResult.syncStatus = 'Success';\n    break;\n\n    case 404:\n    case '404':\n      syncResult.message ??= 'Product not found';\n      syncResult.syncStatus = 'Failed';\n      break;\n\n    default:\n      syncResult.message ??= 'Unknown Sync Error';\n      syncResult.syncStatus = 'Failed';\n  }\n\n  return syncResult;\n}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "InsertTableSet",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INTERNAL_DB",
                "id": "InsertTableSet",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": {
                  "next": "Message",
                  "query": "INSERT INTO \"{{data.var.referenceTable}}\" (\n    connection_id,\n    cin7_id,\n    cin7_key,\n    trackstar_id,\n    trackstar_key,\n    type,\n    last_sync_action,\n    last_sync_status,\n    last_sync_message,\n    created_at,\n    last_pushed_date,\n    reference_key\n) VALUES (\n    ?,\n    lower(?),\n    lower(?),\n    ?,\n    ?,\n    'inventory',\n    'PUSH',\n    ?,\n    ?,\n    CURRENT_TIMESTAMP,\n    CURRENT_TIMESTAMP,\n    lower(?)\n)\nON CONFLICT (reference_key) DO UPDATE SET\n    connection_id = EXCLUDED.connection_id,\n    cin7_id = EXCLUDED.cin7_id,\n    cin7_key = EXCLUDED.cin7_key,\n    trackstar_id = EXCLUDED.trackstar_id,\n    trackstar_key = EXCLUDED.trackstar_key,\n    type = 'inventory',\n    last_sync_action = 'PUSH',\n    last_sync_status = EXCLUDED.last_sync_status,\n    last_sync_message = EXCLUDED.last_sync_message,\n    last_pushed_date = CURRENT_TIMESTAMP;\n",
                  "code": "\n[\n{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.connectionId | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.cin7Inventory.TaskID | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.trackstarInventory.sku | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.trackstarInventory.id | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.trackstarInventory.sku | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.steps.generateEmptyResponseBasedOnUpStatusCode.output.statusCode | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.steps.generateEmptyResponseBasedOnUpStatusCode.output.message | tojson}}\n}\n,{\n  \"type\" : \"string\",\n  \"value\" : {{data.var.referenceKey | tojson}}\n}\n\n]",
                  "dbQueryParams": [
                    {
                      "type": "string",
                      "value": "{{data.var.connectionId}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.cin7Inventory.TaskID}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.trackstarInventory.sku}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.trackstarInventory.id}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.trackstarInventory.sku}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.steps.generateEmptyResponseBasedOnUpStatusCode.output.statusCode}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.steps.generateEmptyResponseBasedOnUpStatusCode.output.message}}"
                    },
                    {
                      "type": "string",
                      "value": "{{data.var.referenceKey}}"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "referenceTable"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "referenceTable"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Message",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "Message",
                "actionId": null,
                "inline": {
                  "code": "\n{\n  \"message\": {% if data.steps.generateEmptyResponseBasedOnUpStatusCode.output.message  is defined %}{{data.steps.generateEmptyResponseBasedOnUpStatusCode.output.message | tojson}}{% else %}null{% endif %}\n}",
                  "language": "JINJA",
                  "fields": [],
                  "next": null,
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"message\":{\"actionType\":\"map\",\"target\":\"{{data.steps.generateEmptyResponseBasedOnUpStatusCode.output.message}}\",\"targetType\":\"string\",\"actions\":[],\"default\":null,\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":true,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "hasResponse": true,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "generateEmptyResponseBasedOnUpStatusCode"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "message"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "message"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "generateEmptyResponseBasedOnUpStatusCode"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "getLocations",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "getLocationsMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n    return {\n\t\t\"param\": {\n\t\t\t\"Name\": params.data.var.inventoryAdjustment.locationName\n\t\t}\n}\n}\n    ",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "getLocationsApi",
                        "uiCode": "function handler(params) {\n    return {\n\t\t\"param\": {\n\t\t\t\"Name\": params.data.var.inventoryAdjustment.locationName\n\t\t}\n}\n}\n    ",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "getLocationsApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "getLocationsApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_2ydj9q86MefTcRqtDc52uJEmZ04",
                        "groupId": "_knexa_ae6a88b6-0c2a-4f9d-b3f8-f641a782ab6a",
                        "connectorId": "community",
                        "name": "getLocations",
                        "version": "1.0.2",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": true,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": false,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Switch3",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"Total\":{\"type\":\"integer\"},\"Page\":{\"type\":\"integer\"},\"LocationList\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"ID\":{\"type\":\"string\"},\"Name\":{\"type\":\"string\"},\"IsDefault\":{\"type\":\"boolean\"},\"IsDeprecated\":{\"type\":\"boolean\"},\"ParentID\":{\"type\":[\"string\",\"null\"]},\"Bins\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"ID\":{\"type\":\"string\"},\"Name\":{\"type\":\"string\"},\"IsDeprecated\":{\"type\":\"boolean\"},\"IsStaging\":{\"type\":\"boolean\"}},\"required\":[]}},\"FixedAssetsLocation\":{\"type\":\"boolean\"},\"AddressLine1\":{\"type\":[\"null\",\"string\"]},\"AddressLine2\":{\"type\":[\"null\",\"string\"]},\"AddressCitySuburb\":{\"type\":[\"null\",\"string\"]},\"AddressStateProvince\":{\"type\":[\"null\",\"string\"]},\"AddressZipPostCode\":{\"type\":[\"null\",\"string\"]},\"AddressCountry\":{\"type\":[\"null\",\"string\"]},\"PickZones\":{\"type\":\"string\"},\"IsCoMan\":{\"type\":\"boolean\"},\"IsShopFloor\":{\"type\":\"boolean\"},\"IsStaging\":{\"type\":\"boolean\"}},\"required\":[]}}},\"required\":[]}",
                "next": "Switch3",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the getLocations operation on the Cin7 platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch3",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch3",
                  "next": "generateNotFoundResponse",
                  "expressions": [
                    {
                      "name": "If Success",
                      "logic": "AND",
                      "conditions": [
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.steps.getLocations.statusCode}}",
                          "value": "200",
                          "operation": "EQ",
                          "next": null
                        },
                        {
                          "name": null,
                          "logic": "AND",
                          "conditions": null,
                          "variable": "{{data.steps.getLocations.output.Total}}",
                          "value": "0",
                          "operation": "NEQ",
                          "next": null
                        }
                      ],
                      "variable": "{{data.steps.getLocations.statusCode}}",
                      "value": "200",
                      "operation": "EQ",
                      "next": "enrichInventoryAdjustmentLines"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "getLocations"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "statusCode"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "statusCode"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "getLocations"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "generateNotFoundResponse",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "generateNotFoundResponse",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  return {\n    statusCode: 404,\n    message: 'Location does not exist in Cin7.'\n  };\n}",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "generateEmptyResponseBasedOnUpStatusCode",
                  "uiCode": "function handler(params) {\n  return {\n    statusCode: 404,\n    message: 'Location does not exist in Cin7.'\n  };\n}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "generateEmptyResponseBasedOnUpStatusCode",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "COMPOSITE",
                "id": "getProductAvailability",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": {
                  "steps": [
                    {
                      "type": "INLINE",
                      "id": "getProductAvailabilityMap",
                      "actionId": null,
                      "inline": {
                        "code": "function handler(params) {\n    return {\n\t\t\"param\": {\n\t\t\t\"sku\": params.data.input.data.sku,\n\t\t\t\"location\": params.data.var.inventoryAdjustment.locationName\n\t\t}\n\t}\n}\n    ",
                        "language": "JAVASCRIPT",
                        "fields": [],
                        "next": "getProductAvailabilityApi",
                        "uiCode": "function handler(params) {\n    return {\n\t\t\"param\": {\n\t\t\t\"sku\": params.data.input.data.sku,\n\t\t\t\"location\": params.data.var.inventoryAdjustment.locationName\n\t\t}\n\t}\n}\n    ",
                        "hasResponse": false,
                        "isError": false,
                        "statusCode": 200,
                        "outputSchema": null,
                        "queryExecutor": null
                      },
                      "function": null,
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": "getProductAvailabilityApi",
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    },
                    {
                      "type": "API",
                      "id": "getProductAvailabilityApi",
                      "actionId": null,
                      "inline": null,
                      "function": {
                        "id": "_knexa_2uBoMSSwkTr7sy9x8zXa3IOYmtk",
                        "groupId": "_knexa_ae6a88b6-0c2a-4f9d-b3f8-f641a782ab6a",
                        "connectorId": "community",
                        "name": "getProductAvailability",
                        "version": "1.0.5",
                        "imageUrl": null,
                        "configuration": {
                          "enableCache": false,
                          "cacheTtlInSeconds": 0,
                          "required": false,
                          "validate": false,
                          "enableRetry": false,
                          "enableAuth": true,
                          "authType": "NO_AUTH",
                          "auth": {
                            "identifier": "$fastn_tenant_header",
                            "authKey": null,
                            "enableMultiConnection": false,
                            "isWorkspaceIdentifier": false,
                            "defaultConnectionId": null
                          },
                          "retry": {
                            "maxRetries": 1,
                            "maxDelayMilliseconds": 1000,
                            "enableConnectionErrors": false,
                            "retryList": [
                              {
                                "delayMilliseconds": 50,
                                "statusCode": 500,
                                "body": null
                              }
                            ]
                          },
                          "requestSetting": null
                        },
                        "next": null,
                        "queryExecutor": null
                      },
                      "composite": null,
                      "loop": null,
                      "internalDatabase": null,
                      "aiAction": null,
                      "mcpClient": null,
                      "logger": null,
                      "downLoadFile": null,
                      "endLoop": null,
                      "trigger": null,
                      "converter": null,
                      "variables": null,
                      "state": null,
                      "conditional": null,
                      "lambdaFunction": null,
                      "outputSchema": null,
                      "next": null,
                      "prevStep": null,
                      "enableDebug": false,
                      "description": null,
                      "debugBreakAfter": null,
                      "configuredStepSetting": null,
                      "filter": null,
                      "limit": null,
                      "splitOut": null,
                      "aggregate": null,
                      "merge": null,
                      "aiAgent": null,
                      "settings": null,
                      "ftp": null,
                      "summarizationChain": null,
                      "textClassifier": null,
                      "warnings": null,
                      "tenantSettings": null
                    }
                  ],
                  "next": "Switch4",
                  "start": null,
                  "queryExecutor": null
                },
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": "{\"type\":\"object\",\"description\":\"\",\"title\":\"\",\"properties\":{\"Total\":{\"type\":\"integer\"},\"Page\":{\"type\":\"integer\"},\"ProductAvailability\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[]}",
                "next": "Switch4",
                "prevStep": null,
                "enableDebug": false,
                "description": "This tool is designed to execute the getProductAvailability operation on the Cin7 platform. It requires the JSON payload to strictly match the expected structure (key and type), otherwise, the operation will fail. Always get confirmation from the user before calling the tool.",
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch4",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch4",
                  "next": "evaluateStockAutoAcceptance",
                  "expressions": [
                    {
                      "name": "Is empty",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.steps.getProductAvailability.output.Total}}",
                      "value": "0",
                      "operation": "EQ",
                      "next": "generateSkuNotFoundResponse"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "getProductAvailability"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "Total"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "Total"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "getProductAvailability"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "evaluateStockAutoAcceptance",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "evaluateStockAutoAcceptance",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  const autoAcceptThreshold = 5; // Should be configurable\n\n  const inventoryAdjustment = params.data.var.inventoryAdjustment;\n  const productAvailabilityList = params.data.steps.getProductAvailability.output.ProductAvailability;\n\n  if (!inventoryAdjustment || !inventoryAdjustment.Lines || inventoryAdjustment.Lines.length === 0) {\n    return {\n      success: false,\n      shouldAutoApprove: false,\n      message: 'No inventory adjustment data found',\n    };\n  }\n\n  const line = inventoryAdjustment.Lines[0];\n  const sku = line.SKU;\n  const warehouse = inventoryAdjustment.locationName;\n  const trackstarQuantity = line.Quantity;\n\n  // Find product availability with exact SKU and Location match\n  const productAvailabilityOnWarehouse = productAvailabilityList.find(\n    (item) => item.SKU === sku && item.Location === warehouse\n  );\n\n  if (!productAvailabilityOnWarehouse) {\n    return {\n      success: false,\n      shouldAutoApprove: false,\n      message: `Product with SKU ${sku} at warehouse ${warehouse} was not found in the Product availability list`,\n    };\n  }\n\n  return {\n    success: true,\n    shouldAutoApprove: Math.abs(trackstarQuantity - productAvailabilityOnWarehouse.OnHand) >= autoAcceptThreshold,\n  };\n}\n",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "Switch8",
                  "uiCode": "function handler(params) {\n  const autoAcceptThreshold = 5; // Should be configurable\n\n  const inventoryAdjustment = params.data.var.inventoryAdjustment;\n  const productAvailabilityList = params.data.steps.getProductAvailability.output.ProductAvailability;\n\n  if (!inventoryAdjustment || !inventoryAdjustment.Lines || inventoryAdjustment.Lines.length === 0) {\n    return {\n      success: false,\n      shouldAutoApprove: false,\n      message: 'No inventory adjustment data found',\n    };\n  }\n\n  const line = inventoryAdjustment.Lines[0];\n  const sku = line.SKU;\n  const warehouse = inventoryAdjustment.locationName;\n  const trackstarQuantity = line.Quantity;\n\n  // Find product availability with exact SKU and Location match\n  const productAvailabilityOnWarehouse = productAvailabilityList.find(\n    (item) => item.SKU === sku && item.Location === warehouse\n  );\n\n  if (!productAvailabilityOnWarehouse) {\n    return {\n      success: false,\n      shouldAutoApprove: false,\n      message: `Product with SKU ${sku} at warehouse ${warehouse} was not found in the Product availability list`,\n    };\n  }\n\n  return {\n    success: true,\n    shouldAutoApprove: Math.abs(trackstarQuantity - productAvailabilityOnWarehouse.OnHand) >= autoAcceptThreshold,\n  };\n}\n",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Switch8",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "CONDITIONAL",
                "id": "Switch8",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": {
                  "id": "Switch8",
                  "next": "generateResponseWithAutoAcceptanceMessage",
                  "expressions": [
                    {
                      "name": "Has successfully found product availability in warehouse",
                      "logic": "AND",
                      "conditions": null,
                      "variable": "{{data.steps.evaluateStockAutoAcceptance.output.success}}",
                      "value": "true",
                      "operation": "EQ",
                      "next": "getLocations"
                    }
                  ],
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "evaluateStockAutoAcceptance"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.lang.String",
                                                  "value": "success"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.lang.String",
                                                    "value": "success"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "evaluateStockAutoAcceptance"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "generateResponseWithAutoAcceptanceMessage",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "generateResponseWithAutoAcceptanceMessage",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  return {\n    statusCode: 404,\n    message: params.data.steps.evaluateStockAutoAcceptance.output.message,\n  };\n}",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "generateEmptyResponseBasedOnUpStatusCode",
                  "uiCode": "function handler(params) {\n  return {\n    statusCode: 404,\n    message: params.data.steps.evaluateStockAutoAcceptance.output.message,\n  };\n}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "generateEmptyResponseBasedOnUpStatusCode",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "generateSkuNotFoundResponse",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  return {\n    statusCode: 404,\n    message: 'SKU was not found in the product availability response.',\n  };\n}",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "generateEmptyResponseBasedOnUpStatusCode",
                  "uiCode": "function handler(params) {\n  return {\n    statusCode: 404,\n    message: 'SKU was not found in the product availability response.',\n  };\n}",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "generateEmptyResponseBasedOnUpStatusCode",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable6374",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "getProductAvailability",
                  "variables": [],
                  "code": "\n{\n  \"inventoryAdjustment\": {% if data.steps.mapInventoryAdjustment.output[0] %}{{data.steps.mapInventoryAdjustment.output[0]| shape}}{% else %}\"\"{% endif %}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"inventoryAdjustment\":{\"actionType\":\"map\",\"target\":\"{{data.steps.mapInventoryAdjustment.output[0]}}\",\"targetType\":\"object\",\"actions\":[],\"default\":\"\",\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\",\"byUser\":true}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "mapInventoryAdjustment"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [
                                              {
                                                "key": {
                                                  "type": "java.math.BigInteger",
                                                  "value": "0"
                                                },
                                                "value": {
                                                  "children": [],
                                                  "returnLiteral": true,
                                                  "symbolOrIndex": {
                                                    "type": "java.math.BigInteger",
                                                    "value": "0"
                                                  },
                                                  "version": 2
                                                }
                                              }
                                            ],
                                            "returnLiteral": false,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "mapInventoryAdjustment"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "getProductAvailability",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": "Start of looping"
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "INLINE",
                "id": "enrichInventoryAdjustmentLines",
                "actionId": null,
                "inline": {
                  "code": "function handler(params) {\n  const inventoryAdjustment = params.data.var.inventoryAdjustment;\n  const locationList = params.data.steps.getLocations.output.LocationList;\n\n  // Validate inventory adjustment exists\n  if (!inventoryAdjustment || !inventoryAdjustment.Lines || inventoryAdjustment.Lines.length === 0) {\n    return { error: 'No inventory adjustment lines found' };\n  }\n\n  // Find the matching location by name\n  const locationName = inventoryAdjustment.locationName;\n  const matchingLocation = locationList.find((loc) => loc.Name === locationName);\n\n  if (!matchingLocation) {\n    return { error: `Location ${locationName} not found in LocationList` };\n  }\n\n  // Extract lines and enrich with LocationId and LocationName\n  const enrichedLines = inventoryAdjustment.Lines.map((line) => ({\n    LocationId: matchingLocation.ID,\n    LocationName: matchingLocation.Name,\n    SKU: line.SKU,\n    ProductName: line.ProductName,\n    Quantity: line.Quantity,\n    UnitCost: line.UnitCost,\n    ProductLength: line.ProductLength,\n    ProductWidth: line.ProductWidth,\n    ProductHeight: line.ProductHeight,\n    ProductWeight: line.ProductWeight\n  }));\n\n  return enrichedLines;\n}\n",
                  "language": "JAVASCRIPT",
                  "fields": [],
                  "next": "Variable3751",
                  "uiCode": "function handler(params) {\n  const inventoryAdjustment = params.data.var.inventoryAdjustment;\n  const locationList = params.data.steps.getLocations.output.LocationList;\n\n  // Validate inventory adjustment exists\n  if (!inventoryAdjustment || !inventoryAdjustment.Lines || inventoryAdjustment.Lines.length === 0) {\n    return { error: 'No inventory adjustment lines found' };\n  }\n\n  // Find the matching location by name\n  const locationName = inventoryAdjustment.locationName;\n  const matchingLocation = locationList.find((loc) => loc.Name === locationName);\n\n  if (!matchingLocation) {\n    return { error: `Location ${locationName} not found in LocationList` };\n  }\n\n  // Extract lines and enrich with LocationId and LocationName\n  const enrichedLines = inventoryAdjustment.Lines.map((line) => ({\n    LocationId: matchingLocation.ID,\n    LocationName: matchingLocation.Name,\n    SKU: line.SKU,\n    ProductName: line.ProductName,\n    Quantity: line.Quantity,\n    UnitCost: line.UnitCost,\n    ProductLength: line.ProductLength,\n    ProductWidth: line.ProductWidth,\n    ProductHeight: line.ProductHeight,\n    ProductWeight: line.ProductWeight\n  }));\n\n  return enrichedLines;\n}\n",
                  "hasResponse": false,
                  "isError": false,
                  "statusCode": 200,
                  "outputSchema": null,
                  "queryExecutor": null
                },
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": null,
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": "Variable3751",
                "prevStep": null,
                "enableDebug": false,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              },
              {
                "type": "VARIABLE",
                "id": "Variable3751",
                "actionId": null,
                "inline": null,
                "function": null,
                "composite": null,
                "loop": null,
                "internalDatabase": null,
                "aiAction": null,
                "mcpClient": null,
                "logger": null,
                "downLoadFile": null,
                "endLoop": null,
                "trigger": null,
                "converter": null,
                "variables": {
                  "next": "createStockAdjustment",
                  "variables": [],
                  "code": "\n{\n  \"inventoryAdjustmentList\": {{data.var.inventoryAdjustmentList  | insertItems(data.steps.enrichInventoryAdjustmentLines.output | tojson) | tojson}}\n}",
                  "uiCode": "{\"actionType\":\"map\",\"target\":{\"inventoryAdjustmentList\":{\"actionType\":\"map\",\"target\":\"insertList\",\"targetType\":\"array\",\"actions\":[{\"actionType\":\"insertList\",\"items\":\"{{data.steps.enrichInventoryAdjustmentLines.output}}\",\"target\":\"{{data.var.inventoryAdjustmentList}}\",\"variable\":\"inventoryAdjustmentList_insertList\"},{\"actionType\":\"actions_return\",\"targetType\":\"array\",\"target\":\"inventoryAdjustmentList_insertList\"}],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"selected\":false,\"autoEscape\":\"AUTO\"}},\"targetType\":\"object\",\"actions\":[],\"enum\":[],\"title\":\"\",\"description\":\"\",\"isRequred\":false,\"default\":[]}",
                  "queryExecutor": {
                    "children": [
                      {
                        "key": {
                          "type": "java.lang.String",
                          "value": "data"
                        },
                        "value": {
                          "children": [
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "steps"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "enrichInventoryAdjustmentLines"
                                    },
                                    "value": {
                                      "children": [
                                        {
                                          "key": {
                                            "type": "java.lang.String",
                                            "value": "output"
                                          },
                                          "value": {
                                            "children": [],
                                            "returnLiteral": true,
                                            "symbolOrIndex": {
                                              "type": "java.lang.String",
                                              "value": "output"
                                            },
                                            "version": 2
                                          }
                                        }
                                      ],
                                      "returnLiteral": false,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "enrichInventoryAdjustmentLines"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "steps"
                                },
                                "version": 2
                              }
                            },
                            {
                              "key": {
                                "type": "java.lang.String",
                                "value": "var"
                              },
                              "value": {
                                "children": [
                                  {
                                    "key": {
                                      "type": "java.lang.String",
                                      "value": "inventoryAdjustmentList"
                                    },
                                    "value": {
                                      "children": [],
                                      "returnLiteral": true,
                                      "symbolOrIndex": {
                                        "type": "java.lang.String",
                                        "value": "inventoryAdjustmentList"
                                      },
                                      "version": 2
                                    }
                                  }
                                ],
                                "returnLiteral": false,
                                "symbolOrIndex": {
                                  "type": "java.lang.String",
                                  "value": "var"
                                },
                                "version": 2
                              }
                            }
                          ],
                          "returnLiteral": false,
                          "symbolOrIndex": {
                            "type": "java.lang.String",
                            "value": "data"
                          },
                          "version": 2
                        }
                      }
                    ],
                    "returnLiteral": false,
                    "symbolOrIndex": {
                      "type": "null",
                      "value": null
                    },
                    "version": 2
                  }
                },
                "state": null,
                "conditional": null,
                "lambdaFunction": null,
                "outputSchema": null,
                "next": null,
                "prevStep": null,
                "enableDebug": true,
                "description": null,
                "debugBreakAfter": 1,
                "configuredStepSetting": null,
                "filter": null,
                "limit": null,
                "splitOut": null,
                "aggregate": null,
                "merge": null,
                "aiAgent": null,
                "settings": {
                  "failureBehavior": "FAILURE",
                  "skipStatus": null,
                  "errorMessage": null,
                  "stepNote": null
                },
                "ftp": null,
                "summarizationChain": null,
                "textClassifier": null,
                "warnings": null,
                "tenantSettings": null
              }
            ],
            "itemSchema": "{\n\t\"type\": \"object\"\n}",
            "isParallel": false,
            "loopSize": "0",
            "loopStart": "0",
            "filePath": null,
            "batchSize": "100",
            "queryExecutor": null
          },
          "internalDatabase": null,
          "aiAction": null,
          "mcpClient": null,
          "logger": null,
          "downLoadFile": null,
          "endLoop": null,
          "trigger": null,
          "converter": null,
          "variables": null,
          "state": null,
          "conditional": null,
          "lambdaFunction": null,
          "outputSchema": null,
          "next": "createStockAdjustment",
          "prevStep": null,
          "enableDebug": false,
          "description": null,
          "debugBreakAfter": 1,
          "configuredStepSetting": null,
          "filter": null,
          "limit": null,
          "splitOut": null,
          "aggregate": null,
          "merge": null,
          "aiAgent": null,
          "settings": {
            "failureBehavior": "FAILURE",
            "skipStatus": null,
            "errorMessage": null,
            "stepNote": null
          },
          "ftp": null,
          "summarizationChain": null,
          "textClassifier": null,
          "warnings": null,
          "tenantSettings": null
        }
      ]
    },
    "types": [],
    "tests": null,
    "hasActionType": true,
    "metaData": {
      "enableLogs": false,
      "isAsync": false,
      "hasSecret": true,
      "enableMultitenant": false,
      "enableValidation": false,
      "runAsWorkflowOnTimeout": false,
      "architecture": "REST",
      "isCustomAuthenticationEnabled": null,
      "requiredAccessRole": null,
      "isNotificationEnabled": false,
      "flowType": "API",
      "jobMemoryLimit": 4096,
      "jobTimeOut": null,
      "jobCpuLimit": "1",
      "isConfigured": null,
      "configurationFlows": null,
      "invocationMethod": "API_REQUEST",
      "priority": null,
      "triggerType": null,
      "schedule": null,
      "triggerApp": null
    },
    "comment": null,
    "labels": [
      "Cin7xTrackstar-Inventory"
    ],
    "resourceType": "EXTERNAL",
    "deleted": null,
    "webhookId": null,
    "webhook": null,
    "deployedBy": "Charles P",
    "createdby": "Charles P"
  }
]